<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#4a148c">
    <title>Android Platform Debug - Bilgoo</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }
        
        .debug-container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(0, 0, 0, 0.7);
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }
        
        .debug-section {
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            border-left: 4px solid #4a90e2;
        }
        
        .debug-title {
            color: #4a90e2;
            margin-bottom: 15px;
            font-size: 18px;
            font-weight: bold;
        }
        
        .debug-item {
            margin: 10px 0;
            padding: 8px 12px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 6px;
            font-family: monospace;
            word-break: break-all;
        }
        
        .debug-success {
            color: #4CAF50;
        }
        
        .debug-error {
            color: #f44336;
        }
        
        .debug-warning {
            color: #ff9800;
        }
        
        .debug-info {
            color: #2196f3;
        }
        
        .test-button {
            background: linear-gradient(45deg, #4a90e2, #357abd);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            margin: 10px 10px 10px 0;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .test-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(74, 144, 226, 0.4);
        }
        
        .test-success {
            background: linear-gradient(45deg, #4CAF50, #2e7d32);
        }
        
        .test-error {
            background: linear-gradient(45deg, #f44336, #c62828);
        }
    </style>
</head>
<body>
    <div class="debug-container">
        <h1 style="text-align: center; margin-bottom: 30px;">
            üîß Android Platform Debug Panel
        </h1>
        
        <!-- Platform Bilgileri -->
        <div class="debug-section">
            <div class="debug-title">üì± Platform Bilgileri</div>
            <div class="debug-item">User Agent: <span id="userAgent"></span></div>
            <div class="debug-item">Platform: <span id="platform"></span></div>
            <div class="debug-item">Screen Size: <span id="screenSize"></span></div>
            <div class="debug-item">Window Size: <span id="windowSize"></span></div>
            <div class="debug-item">Protocol: <span id="protocol"></span></div>
            <div class="debug-item">URL: <span id="currentUrl"></span></div>
            <div class="debug-item">Referrer: <span id="referrer"></span></div>
        </div>
        
        <!-- Capacitor Bilgileri -->
        <div class="debug-section">
            <div class="debug-title">‚ö° Capacitor Bilgileri</div>
            <div class="debug-item">Capacitor Available: <span id="capacitorAvailable"></span></div>
            <div class="debug-item">Capacitor Platform: <span id="capacitorPlatform"></span></div>
            <div class="debug-item">Capacitor Info: <span id="capacitorInfo"></span></div>
            <div class="debug-item">Device Ready: <span id="deviceReady"></span></div>
        </div>
        
        <!-- CSS Class Bilgileri -->
        <div class="debug-section">
            <div class="debug-title">üé® CSS Classes</div>
            <div class="debug-item">Body Classes: <span id="bodyClasses"></span></div>
            <div class="debug-item">HTML Classes: <span id="htmlClasses"></span></div>
            <div class="debug-item">Data Attributes: <span id="dataAttributes"></span></div>
        </div>
        
        <!-- Login Sayfasƒ± Test -->
        <div class="debug-section">
            <div class="debug-title">üîê Login Sayfasƒ± Test</div>
            <div class="debug-item">CSS Loaded: <span id="cssLoaded"></span></div>
            <div class="debug-item">Platform CSS Active: <span id="platformCss"></span></div>
            <div class="debug-item">Login Test: <span id="loginTest"></span></div>
            
            <button class="test-button" onclick="testLoginPage()">Login Sayfasƒ±nƒ± Test Et</button>
            <button class="test-button" onclick="openLogin()">Login Sayfasƒ±nƒ± A√ß</button>
            <button class="test-button" onclick="openTestPage()">Test Sayfasƒ±nƒ± A√ß</button>
        </div>
        
        <!-- Actions -->
        <div class="debug-section">
            <div class="debug-title">üöÄ Hƒ±zlƒ± ƒ∞≈ülemler</div>
            <button class="test-button" onclick="forceAndroidClasses()">Android Classes Ekle</button>
            <button class="test-button" onclick="refreshPage()">Sayfayƒ± Yenile</button>
            <button class="test-button" onclick="clearStorage()">Local Storage Temizle</button>
            <button class="test-button" onclick="testNetworkConnectivity()">Network Test</button>
        </div>
        
        <!-- Console Log -->
        <div class="debug-section">
            <div class="debug-title">üìù Console Log</div>
            <div id="consoleLog" style="
                max-height: 200px;
                overflow-y: auto;
                background: rgba(0, 0, 0, 0.5);
                padding: 15px;
                border-radius: 8px;
                font-family: monospace;
                font-size: 12px;
                line-height: 1.4;
            "></div>
        </div>
    </div>

    <script>
        // Console log yakalama
        const originalLog = console.log;
        const originalError = console.error;
        const originalWarn = console.warn;
        const consoleDiv = document.getElementById('consoleLog');
        
        function addToConsole(message, type = 'log') {
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = document.createElement('div');
            logEntry.style.margin = '2px 0';
            
            switch(type) {
                case 'error':
                    logEntry.style.color = '#f44336';
                    logEntry.innerHTML = `[${timestamp}] ‚ùå ${message}`;
                    break;
                case 'warn':
                    logEntry.style.color = '#ff9800';
                    logEntry.innerHTML = `[${timestamp}] ‚ö†Ô∏è ${message}`;
                    break;
                default:
                    logEntry.style.color = '#4CAF50';
                    logEntry.innerHTML = `[${timestamp}] ‚ÑπÔ∏è ${message}`;
            }
            
            consoleDiv.appendChild(logEntry);
            consoleDiv.scrollTop = consoleDiv.scrollHeight;
            
            // Son 20 giri≈üi tut
            while (consoleDiv.children.length > 20) {
                consoleDiv.removeChild(consoleDiv.firstChild);
            }
        }
        
        console.log = function(...args) {
            originalLog.apply(console, args);
            addToConsole(args.join(' '), 'log');
        };
        
        console.error = function(...args) {
            originalError.apply(console, args);
            addToConsole(args.join(' '), 'error');
        };
        
        console.warn = function(...args) {
            originalWarn.apply(console, args);
            addToConsole(args.join(' '), 'warn');
        };
        
        // Debug bilgilerini g√ºncelle
        function updateDebugInfo() {
            // Platform bilgileri
            document.getElementById('userAgent').textContent = navigator.userAgent;
            document.getElementById('platform').textContent = navigator.platform;
            document.getElementById('screenSize').textContent = `${screen.width}x${screen.height}`;
            document.getElementById('windowSize').textContent = `${window.innerWidth}x${window.innerHeight}`;
            document.getElementById('protocol').textContent = window.location.protocol;
            document.getElementById('currentUrl').textContent = window.location.href;
            document.getElementById('referrer').textContent = document.referrer || 'None';
            
            // Capacitor bilgileri
            const hasCapacitor = !!window.Capacitor;
            document.getElementById('capacitorAvailable').textContent = hasCapacitor ? '‚úÖ Yes' : '‚ùå No';
            document.getElementById('capacitorAvailable').className = hasCapacitor ? 'debug-success' : 'debug-error';
            
            if (hasCapacitor) {
                document.getElementById('capacitorPlatform').textContent = window.Capacitor.getPlatform?.() || 'Unknown';
                document.getElementById('capacitorInfo').textContent = JSON.stringify(window.Capacitor.getInfo?.() || {});
            } else {
                document.getElementById('capacitorPlatform').textContent = 'N/A';
                document.getElementById('capacitorInfo').textContent = 'N/A';
            }
            
            // CSS Classes
            document.getElementById('bodyClasses').textContent = document.body.className || 'None';
            document.getElementById('htmlClasses').textContent = document.documentElement.className || 'None';
            
            const dataAttrs = [];
            for (let attr of document.body.attributes) {
                if (attr.name.startsWith('data-')) {
                    dataAttrs.push(`${attr.name}="${attr.value}"`);
                }
            }
            document.getElementById('dataAttributes').textContent = dataAttrs.join(', ') || 'None';
            
            // Android algƒ±lama
            const isAndroid = /Android/i.test(navigator.userAgent);
            const hasAndroidClass = document.body.classList.contains('platform-android');
            
            console.log(`Platform Debug: Android=${isAndroid}, HasClass=${hasAndroidClass}`);
        }
        
        // Test fonksiyonlarƒ±
        function testLoginPage() {
            // Platform CSS test
            const testDiv = document.createElement('div');
            testDiv.className = 'platform-android';
            testDiv.style.cssText = 'position: absolute; top: -1000px; opacity: 0;';
            document.body.appendChild(testDiv);
            
            const computedStyle = window.getComputedStyle(testDiv);
            const hasCustomCSS = computedStyle.backgroundColor !== 'rgba(0, 0, 0, 0)' || 
                                 computedStyle.display !== 'block';
            
            document.body.removeChild(testDiv);
            
            document.getElementById('platformCss').textContent = hasCustomCSS ? '‚úÖ Active' : '‚ùå Not Found';
            document.getElementById('platformCss').className = hasCustomCSS ? 'debug-success' : 'debug-error';
            
            document.getElementById('loginTest').textContent = '‚úÖ Test Completed';
            document.getElementById('loginTest').className = 'debug-success';
            
            console.log('Login page test completed');
        }
        
        function openLogin() {
            console.log('Opening login page...');
            window.location.href = 'login.html';
        }
        
        function openTestPage() {
            console.log('Opening test page...');
            window.location.href = 'android-login-test.html';
        }
        
        function forceAndroidClasses() {
            document.body.classList.add('platform-android', 'platform-capacitor');
            document.documentElement.classList.add('platform-android', 'platform-capacitor');
            document.body.setAttribute('data-platform', 'android');
            document.documentElement.setAttribute('data-platform', 'android');
            
            console.log('Android classes forced');
            updateDebugInfo();
        }
        
        function refreshPage() {
            window.location.reload();
        }
        
        function clearStorage() {
            localStorage.clear();
            sessionStorage.clear();
            console.log('Storage cleared');
        }
        
        function testNetworkConnectivity() {
            fetch('https://www.google.com/favicon.ico', { mode: 'no-cors' })
                .then(() => {
                    console.log('‚úÖ Network connectivity test passed');
                })
                .catch(() => {
                    console.error('‚ùå Network connectivity test failed');
                });
        }
        
        // Sayfa y√ºklendiƒüinde
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üîß Android Debug Panel loaded');
            
            // Android sƒ±nƒ±flarƒ±nƒ± ekle
            forceAndroidClasses();
            
            // Debug bilgilerini g√ºncelle
            updateDebugInfo();
            
            // 5 saniyede bir g√ºncelle
            setInterval(updateDebugInfo, 5000);
            
            // Device ready event
            if (window.Capacitor) {
                document.addEventListener('deviceready', function() {
                    document.getElementById('deviceReady').textContent = '‚úÖ Fired';
                    document.getElementById('deviceReady').className = 'debug-success';
                    console.log('üì± Device ready event fired');
                });
                
                setTimeout(() => {
                    if (!document.getElementById('deviceReady').textContent.includes('Fired')) {
                        document.getElementById('deviceReady').textContent = '‚ùå Not Fired';
                        document.getElementById('deviceReady').className = 'debug-error';
                    }
                }, 3000);
            } else {
                document.getElementById('deviceReady').textContent = '‚ùå No Capacitor';
                document.getElementById('deviceReady').className = 'debug-error';
            }
        });
    </script>
</body>
</html>
