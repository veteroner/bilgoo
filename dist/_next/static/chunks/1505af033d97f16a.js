(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33326,e=>{"use strict";var t=e.i(76009);e.i(1465);var s=e.i(34991);e.i(36180);var r=e.i(98925);async function a(e,s,a){try{let o=(0,r.doc)(t.firestore,"users",e);(await (0,r.getDoc)(o)).exists()?await (0,r.updateDoc)(o,{lastLogin:(0,r.serverTimestamp)()}):(await (0,r.setDoc)(o,{email:s,displayName:a||s.split("@")[0],photoURL:null,coins:0,stats:{totalGames:0,totalQuestions:0,correctAnswers:0,accuracy:0,highestScore:0},createdAt:(0,r.serverTimestamp)(),lastLogin:(0,r.serverTimestamp)()}),console.log("User profile created:",e))}catch(e){console.error("Error creating user profile:",e)}}async function o(e,r,a,o){try{let i=(0,s.ref)(t.database,`scores/${r}/${e}`),n=await (0,s.get)(i);(!n.exists()||n.val().score<a)&&(await (0,s.set)(i,{score:a,username:o,timestamp:Date.now()}),console.log("Score saved:",{category:r,score:a}))}catch(e){console.error("Error saving score:",e)}}async function i(e,s,a,o,i,n){try{let l=(0,r.collection)(t.firestore,"gameHistory");await (0,r.addDoc)(l,{userId:e,category:s,score:a,totalQuestions:o,correctAnswers:i,questions:n,timestamp:(0,r.serverTimestamp)()}),console.log("Game history saved")}catch(e){console.error("Error saving game history:",e)}}async function n(e,s,a,o){try{let i=(0,r.doc)(t.firestore,"users",e),n=await (0,r.getDoc)(i);if(n.exists()){let e=n.data().stats||{totalGames:0,totalQuestions:0,correctAnswers:0,accuracy:0,highestScore:0},t=e.totalGames+1,l=e.totalQuestions+s,c=e.correctAnswers+a,d=Math.round(c/l*100),u=Math.max(e.highestScore,o);await (0,r.updateDoc)(i,{stats:{totalGames:t,totalQuestions:l,correctAnswers:c,accuracy:d,highestScore:u},coins:(n.data().coins||0)+5*a}),console.log("User stats updated")}}catch(e){console.error("Error updating user stats:",e)}}e.s(["createUserProfile",()=>a,"saveGameHistory",()=>i,"saveScore",()=>o,"updateUserStats",()=>n])},34967,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(18566),a=e.i(76009);e.i(51718);var o=e.i(18357),i=e.i(33326);let n={"genel-kultur":{name:"Genel KÃ¼ltÃ¼r",icon:"ðŸŒ"},tarih:{name:"Tarih",icon:"ðŸ“œ"},cografya:{name:"CoÄŸrafya",icon:"ðŸ—ºï¸"},bilim:{name:"Bilim",icon:"ðŸ”¬"},edebiyat:{name:"Edebiyat",icon:"ðŸ“–"},spor:{name:"Spor",icon:"âš½"},muzik:{name:"MÃ¼zik",icon:"ðŸŽµ"},teknoloji:{name:"Teknoloji",icon:"ðŸ’»"}};function l(){let e=(0,r.useRouter)(),l=(0,r.useSearchParams)().get("category")||"genel-kultur",[c,d]=(0,s.useState)([]),[u,m]=(0,s.useState)(0),[h,x]=(0,s.useState)(0),[g,f]=(0,s.useState)(30),[y,b]=(0,s.useState)(!1),[p,j]=(0,s.useState)(null),[v,w]=(0,s.useState)(!1),[N,S]=(0,s.useState)(!0),[k,T]=(0,s.useState)(null),[G,A]=(0,s.useState)(0);(0,s.useEffect)(()=>{let t=(0,o.onAuthStateChanged)(a.auth,t=>{t?(T(t),C()):e.push("/login")});return()=>t()},[l]);let C=async()=>{try{console.log("Loading questions for category:",l);let e=await fetch("/languages/tr/questions.json");if(!e.ok)throw Error("Questions could not be loaded");let t=await e.json();console.log("Questions data loaded:",Object.keys(t));let s=[],r={"genel-kultur":"Genel KÃ¼ltÃ¼r",tarih:"Tarih",cografya:"CoÄŸrafya",bilim:"Bilim",edebiyat:"Edebiyat",spor:"Spor",muzik:"MÃ¼zik",teknoloji:"Teknoloji"}[l]||"Genel KÃ¼ltÃ¼r";if(console.log("Looking for category:",r),t[r]&&(s=t[r]),console.log("Found questions:",s.length),0===s.length){console.error("No questions found for category:",r),alert("Bu kategori iÃ§in soru bulunamadÄ±!"),S(!1);return}let a=s.map(e=>{let t=e.options.indexOf(e.correctAnswer);return{...e,correct:t>=0?t:0}});d(a.sort(()=>Math.random()-.5).slice(0,10)),S(!1)}catch(e){console.error("Error loading questions:",e),alert("Sorular yÃ¼klenirken hata oluÅŸtu!"),S(!1)}},E=async()=>{if(b(!0),k){let e=k.displayName||k.email||"Anonim",t=n[l]?.name||"Genel KÃ¼ltÃ¼r";await Promise.all([(0,i.saveScore)(k.uid,t,h,e),(0,i.saveGameHistory)(k.uid,t,h,c.length,G,c),(0,i.updateUserStats)(k.uid,c.length,G,h)]),console.log("Game saved to Firebase:",{category:t,score:h,correctAnswers:G})}};if(N)return(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-primary to-secondary flex items-center justify-center text-white text-2xl font-bold",children:"YÃ¼kleniyor..."});if(y)return(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-primary to-secondary flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full text-center",children:[(0,t.jsx)("div",{className:"text-6xl mb-4",children:"ðŸŽ‰"}),(0,t.jsx)("h2",{className:"text-3xl font-bold mb-4",children:"Oyun Bitti!"}),(0,t.jsxs)("div",{className:"text-5xl font-bold text-primary mb-6",children:[h," Puan"]}),(0,t.jsxs)("p",{className:"text-gray-600 mb-2",children:[c.length," sorudan ",G," doÄŸru"]}),(0,t.jsxs)("p",{className:"text-gray-500 mb-4",children:["BaÅŸarÄ± OranÄ±: %",Math.round(G/c.length*100)]}),(0,t.jsx)("p",{className:"text-sm text-green-600 mb-8",children:"âœ“ Skorunuz Firebase'e kaydedildi"}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("button",{onClick:()=>window.location.reload(),className:"flex-1 bg-primary text-white font-semibold py-3 rounded-lg",children:"Tekrar"}),(0,t.jsx)("button",{onClick:()=>e.push("/"),className:"flex-1 bg-gray-200 text-gray-800 font-semibold py-3 rounded-lg",children:"Ana Sayfa"})]})]})});let U=c[u],B=n[l];return(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-primary to-secondary flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"max-w-2xl w-full",children:[(0,t.jsx)("div",{className:"bg-white/10 backdrop-blur-md rounded-2xl p-6 mb-4 text-white",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("span",{className:"text-3xl",children:B?.icon}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-bold",children:B?.name}),(0,t.jsxs)("p",{className:"text-sm opacity-80",children:["Soru ",u+1,"/",c.length]})]})]}),(0,t.jsxs)("div",{className:"text-3xl font-bold",children:[g,"s"]})]})}),(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl p-8",children:[(0,t.jsx)("h3",{className:"text-2xl font-bold mb-6",children:U?.question}),(0,t.jsx)("div",{className:"space-y-3",children:U?.options.map((e,s)=>(0,t.jsxs)("button",{onClick:()=>{null!==p||v||(j(s),w(!0),s===c[u].correct&&(x(h+10),A(G+1)),setTimeout(()=>{u+1>=c.length?E():(m(u+1),j(null),w(!1),f(30))},2e3))},disabled:v,className:`w-full p-4 rounded-xl text-left font-medium transition ${v&&s===U.correct?"bg-green-500 text-white":v&&p===s&&s!==U.correct?"bg-red-500 text-white":"bg-gray-100 hover:bg-gray-200"}`,children:[String.fromCharCode(65+s),") ",e]},s))}),(0,t.jsxs)("div",{className:"mt-6 flex justify-between text-sm",children:[(0,t.jsxs)("div",{children:["Puan: ",(0,t.jsx)("span",{className:"font-bold",children:h})]}),(0,t.jsx)("button",{onClick:()=>e.push("/"),className:"text-gray-500",children:"Ã‡Ä±kÄ±ÅŸ"})]})]})]})})}function c(){return(0,t.jsx)(s.Suspense,{fallback:(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-primary to-secondary flex items-center justify-center text-white text-2xl",children:"YÃ¼kleniyor..."}),children:(0,t.jsx)(l,{})})}e.s(["default",()=>c])}]);