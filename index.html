<!DOCTYPE html>
<html lang="tr" data-theme="light" data-language="tr" id="html-root">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
    <meta http-equiv="Strict-Transport-Security" content="max-age=31536000; includeSubDomains; preload">
    <meta name="description" content="√úcretsiz T√ºrk√ße bilgi yarƒ±≈ümasƒ±! Genel k√ºlt√ºr, bilim, tarih ve daha fazla kategoride binlerce soru. Arkada≈ülarƒ±nla yarƒ±≈ü, lider tablosunda yerini al. Hemen oyna!">
    <meta name="keywords" content="bilgi yarƒ±≈ümasƒ±, quiz, test, genel k√ºlt√ºr, eƒüitim, oyun, t√ºrk√ße, online, √ºcretsiz">
    <meta name="author" content="Teknova Bili≈üim">
    <meta name="robots" content="index, follow">
    <meta name="language" content="Turkish">
    <meta name="theme-color" content="#4a148c">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://yourdomain.com/">
    <meta property="og:title" content="Bilgoo - √úcretsiz Online Quiz">
    <meta property="og:description" content="Binlerce soruda bilginizi test edin! Arkada≈ülarƒ±nƒ±zla yarƒ±≈üƒ±n ve lider tablosunda yerini alƒ±n.">
    <meta property="og:image" content="https://yourdomain.com/og-image.jpg">
    <meta property="og:site_name" content="Bilgoo">
    <meta property="og:locale" content="tr_TR">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://yourdomain.com/">
    <meta property="twitter:title" content="Bilgoo - √úcretsiz Online Quiz">
    <meta property="twitter:description" content="Binlerce soruda bilginizi test edin! Arkada≈ülarƒ±nƒ±zla yarƒ±≈üƒ±n ve lider tablosunda yerini alƒ±n.">
    <meta property="twitter:image" content="https://yourdomain.com/og-image.jpg">
    
    <!-- Schema.org -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Game",
        "name": "Bilgoo",
        "description": "√úcretsiz T√ºrk√ße bilgi yarƒ±≈ümasƒ± oyunu",
        "url": "https://yourdomain.com",
        "applicationCategory": "Game",
        "operatingSystem": "Web Browser",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "TRY"
        },
        "aggregateRating": {
            "@type": "AggregateRating",
            "ratingValue": "4.8",
            "ratingCount": "1250"
        }
    }
    </script>
    
    <title>Bilgoo - √úcretsiz Online Quiz Oyunu | Test Bilginizi</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <!-- Font Awesome ƒ∞konlarƒ± -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <!-- Favicon -->
    <link rel="icon" href="bilgoo-logo.svg" type="image/svg+xml">
    <!-- üîí G√úVENLƒ∞K KONFƒ∞G√úRASYONU -->
    <script src="runtime-env.js"></script>
    <script src="env-config.js"></script>
    <script src="netlify-config.js"></script>
    <script src="netlify-firebase-fix.js"></script>
    <script src="security-config.js"></script>
    <!-- G√∂rsel i√ßeren sorular ve Doƒüru/Yanlƒ±≈ü sorularƒ± i√ßin stil -->
    <link rel="stylesheet" href="custom-question-styles.css">
    <link rel="stylesheet" href="admin-pending-styles.css">
    <!-- Manifest linki direkt olarak ekle -->
    <link rel="manifest" href="manifest.json">
    <style>
        /* Genel stil */
        :root {
            --primary-color: #4a148c;
            --secondary-color: #e91e63;
            --accent-color: #ff9800;
            --text-color: #333;
            --bg-color: #f9f9f9;
            --error-color: #e53935;
            --success-color: #43a047;
            --border-radius: 8px;
            --shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            --header-bg: #333;
            --header-text: #fff;
        }

        [data-theme="dark"] {
            --primary-color: #9c27b0;
            --secondary-color: #ff4081;
            --accent-color: #ffb74d;
            --text-color: #f5f5f5;
            --bg-color: #212121;
            --error-color: #e57373;
            --success-color: #81c784;
            --header-bg: #121212;
            --header-text: #f5f5f5;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 0;
            background-color: var(--bg-color);
            color: var(--text-color);
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        /* ... existing styles ... */
        
        /* Profil sayfasƒ± stilleri */
        .profile-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        .profile-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            border-bottom: 1px solid #ddd;
            padding-bottom: 10px;
        }

        .profile-card {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            padding: 20px;
            margin-bottom: 20px;
            display: flex;
            flex-wrap: wrap;
            align-items: center;
        }

        .profile-avatar {
            font-size: 48px;
            color: var(--primary-color);
            margin-right: 20px;
            flex: 0 0 80px;
            text-align: center;
        }

        .profile-details {
            flex: 1;
            min-width: 200px;
        }

        .profile-details h2 {
            margin-top: 0;
            color: var(--primary-color);
        }

        .profile-actions-secondary {
            flex: 1 0 100%;
            margin-top: 15px;
            text-align: right;
        }

        .stats-card, .high-scores-card {
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            padding: 20px;
            margin-bottom: 20px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
        }

        .stat-item {
            text-align: center;
            background-color: #f5f5f5;
            padding: 10px;
            border-radius: 5px;
        }

        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: var(--primary-color);
            display: block;
        }

        .stat-label {
            font-size: 14px;
            color: #666;
        }

        .high-scores-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }

        .high-scores-table th, .high-scores-table td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        .high-scores-table th {
            background-color: #f5f5f5;
        }

        .profile-actions {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 20px;
        }

        /* Y√ºkleniyor g√∂stergesi */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }

        .loading-spinner {
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .loading-spinner i {
            color: var(--primary-color);
            margin-bottom: 10px;
        }

        /* Hata mesajƒ± konteyner */
        .error-container {
            max-width: 500px;
            margin: 100px auto;
            padding: 20px;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .error-container h3 {
            color: var(--error-color);
            margin-top: 0;
        }

        .error-container i {
            font-size: 28px;
            margin-right: 10px;
        }

        .error-container p {
            margin-bottom: 20px;
        }

        .error-container button {
            margin: 5px;
            min-width: 120px;
        }

        /* Buton stilleri */
        .btn-primary {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
        }

        .btn-primary:hover {
            background-color: #7b1fa2;
        }

        .btn-secondary {
            background-color: var(--secondary-color);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
        }

        .btn-secondary:hover {
            background-color: #c2185b;
        }

        .btn-danger {
            background-color: var(--error-color);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
        }

        .btn-danger:hover {
            background-color: #c62828;
        }

        /* √úst bilgi √ßubuƒüu (Kullanƒ±cƒ± bilgisi) */
        .user-info-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: #333;
            color: white;
            padding: 10px 20px;
            margin-bottom: 20px;
        }

        .user-info {
            display: flex;
            align-items: center;
        }

        .user-info i {
            margin-right: 10px;
            font-size: 18px;
        }

        .user-actions {
            display: flex;
            gap: 10px;
        }

        .btn-small {
            background-color: transparent;
            border: 1px solid white;
            color: white;
            padding: 5px 10px;
            border-radius: 3px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s;
        }

        .btn-small:hover {
            background-color: white;
            color: #333;
        }

        /* Karanlƒ±k mod ayarlarƒ± */
        [data-theme="dark"] .profile-card,
        [data-theme="dark"] .stats-card,
        [data-theme="dark"] .high-scores-card,
        [data-theme="dark"] .loading-spinner,
        [data-theme="dark"] .error-container {
            background-color: #333;
            color: #f5f5f5;
        }

        [data-theme="dark"] .stat-item {
            background-color: #444;
        }

        [data-theme="dark"] .high-scores-table th {
            background-color: #444;
        }

        [data-theme="dark"] .high-scores-table td {
            border-bottom: 1px solid #444;
        }

        /* Responsivite i√ßin medya sorgularƒ± */
        @media (max-width: 600px) {
            .profile-card {
                flex-direction: column;
                text-align: center;
            }

            .profile-avatar {
                margin-right: 0;
                margin-bottom: 15px;
            }

            .user-info-bar {
                flex-direction: column;
                gap: 10px;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        /* ... other existing styles ... */

        /* Hamburger men√º stilleri - Modern tasarƒ±m */
        .hamburger-menu {
            position: fixed;
            top: 0;
            right: -350px; /* Ba≈ülangƒ±√ßta gizli, biraz daha geni≈ü */
            width: 350px;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            backdrop-filter: blur(20px);
            color: white;
            box-shadow: -5px 0 25px rgba(0, 0, 0, 0.3);
            z-index: 1000;
            transition: right 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            overflow-y: auto;
            padding: 0;
            border-left: 3px solid rgba(255, 255, 255, 0.2);
        }

        .hamburger-menu.active {
            right: 0; /* Men√º a√ßƒ±ldƒ±ƒüƒ±nda g√∂r√ºn√ºr */
        }

        .hamburger-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            border-radius: 15px;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            cursor: pointer;
            z-index: 1001;
            box-shadow: 0 8px 20px rgba(255, 107, 107, 0.3);
            transition: all 0.3s ease;
            border: 2px solid rgba(255, 255, 255, 0.1);
        }

        .hamburger-toggle:hover {
            transform: scale(1.1) rotate(5deg);
            box-shadow: 0 12px 30px rgba(255, 107, 107, 0.5);
            background: linear-gradient(135deg, #ff5252, #d32f2f);
        }

        .hamburger-toggle i {
            font-size: 18px;
            transition: transform 0.3s ease;
        }

        .hamburger-toggle:hover i {
            transform: rotate(90deg);
        }

        .menu-section {
            padding: 20px 25px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.15);
            position: relative;
        }

        .menu-section::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            width: 4px;
            height: 100%;
            background: linear-gradient(to bottom, #ff6b6b, #ee5a24);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .menu-section:hover::before {
            opacity: 1;
        }

        .menu-section h3 {
            margin: 0 0 15px 0;
            font-size: 14px;
            color: rgba(255, 255, 255, 0.9);
            text-transform: uppercase;
            letter-spacing: 2px;
            font-weight: 600;
            position: relative;
            padding-bottom: 8px;
        }

        .menu-section h3::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 30px;
            height: 2px;
            background: linear-gradient(to right, #ff6b6b, #ee5a24);
            border-radius: 1px;
        }

        .menu-item {
            padding: 12px 15px;
            display: flex;
            align-items: center;
            cursor: pointer;
            color: rgba(255, 255, 255, 0.9);
            text-decoration: none;
            border-radius: 10px;
            margin: 5px 0;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .menu-item::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            width: 0;
            height: 100%;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
            transition: width 0.3s ease;
            z-index: -1;
        }

        .menu-item:hover::before {
            width: 100%;
        }

        .menu-item i {
            margin-right: 15px;
            width: 20px;
            text-align: center;
            font-size: 16px;
            color: #ff6b6b;
            transition: all 0.3s ease;
        }

        .menu-item:hover {
            color: white;
            transform: translateX(5px);
            background: rgba(255, 255, 255, 0.1);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .menu-item:hover i {
            color: #ffffff;
            transform: scale(1.2);
        }

        .menu-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 999;
            display: none;
        }

        .menu-overlay.active {
            display: block;
        }

        /* D√ºzen ayarlamalarƒ± */
        body {
            padding-top: 20px; /* Hamburger toggle i√ßin alan */
        }



        .hamburger-menu .toggle-switch {
            margin-left: auto;
        }

        .user-profile-section {
            display: flex;
            align-items: center;
            padding: 25px;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.05));
            backdrop-filter: blur(10px);
            border-bottom: 2px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 10px;
        }

        .user-avatar {
            font-size: 32px;
            margin-right: 15px;
            color: #ff6b6b;
            background: rgba(255, 255, 255, 0.1);
            padding: 10px;
            border-radius: 50%;
            box-shadow: 0 4px 15px rgba(255, 107, 107, 0.2);
        }

        .user-info-menu {
            flex: 1;
        }

        .user-info-menu p {
            margin: 0;
            font-size: 14px;
            color: rgba(255, 255, 255, 0.8);
        }

        .user-info-menu .user-name {
            font-weight: 600;
            font-size: 18px;
            color: white;
            margin-bottom: 5px;
        }

        /* Responsive ayarlamalar */
        @media (max-width: 600px) {
            .hamburger-menu {
                width: 80%;
                max-width: 300px;
            }
        }

        /* Bo≈üluk doldurma harfleri g√∂r√ºn√ºrl√ºk d√ºzeltmesi */
        .blank-filling-container .letters-container {
            display: flex !important;
            flex-wrap: wrap !important;
            justify-content: center !important;
            visibility: visible !important;
            opacity: 1 !important;
            position: relative !important;
            z-index: 10 !important;
        }

        .tab-button.active {
            color: var(--primary-color);
            border-bottom: 3px solid var(--primary-color);
            background: rgba(0,0,0,0.01);
        }

        /* Toggle switch stillerini g√ºncelleme */
        input:checked + .slider {
            background-color: var(--primary-color);
        }

        /* Dil deƒüi≈ütirici i√ßin stiller */
        .language-selector {
            display: flex;
            align-items: center;
            margin-left: auto;
            margin-right: 15px;
        }
        
        .language-selector label {
            margin-right: 5px;
            color: var(--header-text);
            font-size: 14px;
        }
        
        .language-selector select {
            background-color: transparent;
            border: 1px solid rgba(255,255,255,0.3);
            color: var(--header-text);
            padding: 3px 5px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }
        
        .language-selector select:hover {
            background-color: rgba(255,255,255,0.1);
        }
        
        .language-selector select option {
            background-color: var(--bg-color);
            color: var(--text-color);
        }

        /* Reklam Alanlarƒ± */
        .ad-banner {
            margin: 0 0 10px 0; /* √ústteki margin kaldƒ±rƒ±ldƒ±, sadece altta bƒ±rakƒ±ldƒ± */
            min-height: 50px;
            text-align: center;
            background: #f5f5f5;
            border-radius: 8px;
            padding: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .interstitial-ad {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 10000;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
        }

        /* Cookie Consent Stilleri */
        .cookie-consent {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            z-index: 10000;
            border-top: 3px solid rgba(255,255,255,0.2);
        }

        .cookie-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 20px;
        }

        .cookie-text h3 {
            margin: 0 0 10px 0;
            font-size: 18px;
        }

        .cookie-text p {
            margin: 0;
            font-size: 14px;
            line-height: 1.4;
        }

        .cookie-text a {
            color: #ffd700;
            text-decoration: underline;
        }

        .cookie-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .cookie-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .cookie-btn-primary {
            background: #ff6b6b;
            color: white;
        }

        .cookie-btn-primary:hover {
            background: #ff5252;
            transform: translateY(-2px);
        }

        .cookie-btn-secondary {
            background: rgba(255,255,255,0.2);
            color: white;
            border: 1px solid rgba(255,255,255,0.3);
        }

        .cookie-btn-secondary:hover {
            background: rgba(255,255,255,0.3);
        }

        .cookie-btn-link {
            background: transparent;
            color: #ffd700;
            text-decoration: underline;
        }

        /* Cookie Modal */
        .cookie-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 10001;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .cookie-modal-content {
            background: white;
            border-radius: 10px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .cookie-modal-header {
            padding: 20px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .cookie-modal-header h3 {
            margin: 0;
            color: var(--primary-color);
        }

        .cookie-close {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #666;
        }

        .cookie-modal-body {
            padding: 20px;
        }

        .cookie-category {
            margin-bottom: 20px;
            padding: 15px;
            border: 1px solid #eee;
            border-radius: 8px;
        }

        .cookie-toggle {
            display: flex;
            align-items: center;
            cursor: pointer;
        }

        .cookie-toggle input[type="checkbox"] {
            display: none;
        }

        .cookie-slider {
            width: 50px;
            height: 25px;
            background: #ccc;
            border-radius: 25px;
            position: relative;
            margin-right: 15px;
            transition: all 0.3s ease;
        }

        .cookie-slider:before {
            content: '';
            position: absolute;
            width: 21px;
            height: 21px;
            background: white;
            border-radius: 50%;
            top: 2px;
            left: 2px;
            transition: all 0.3s ease;
        }

        .cookie-toggle input:checked + .cookie-slider {
            background: var(--primary-color);
        }

        .cookie-toggle input:checked + .cookie-slider:before {
            transform: translateX(25px);
        }

        .cookie-toggle input:disabled + .cookie-slider {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .cookie-info h4 {
            margin: 0 0 5px 0;
            font-size: 16px;
            color: var(--primary-color);
        }

        .cookie-info p {
            margin: 0;
            font-size: 14px;
            color: #666;
        }

        .cookie-modal-footer {
            padding: 20px;
            border-top: 1px solid #eee;
            text-align: right;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .cookie-content {
                flex-direction: column;
                text-align: center;
            }

            .cookie-buttons {
                justify-content: center;
            }

            .ad-banner {
                margin: 0 0 10px 0; /* √ústteki margin kaldƒ±rƒ±ldƒ±, sadece altta bƒ±rakƒ±ldƒ± */
                min-height: 50px;
            }
        }
        
        /* Admin Panel Stilleri */
        .admin-panel {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 10000;
            overflow-y: auto;
            padding: 20px;
            box-sizing: border-box;
        }

        .admin-panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px 10px 0 0;
            margin-bottom: 0;
        }

        .admin-panel-header h2 {
            margin: 0;
            font-size: 24px;
        }

        .close-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            transition: all 0.3s ease;
        }

        .close-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.1);
        }

        .admin-tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 1px solid #dee2e6;
            overflow-x: auto;
        }

        .admin-tab-btn {
            background: none;
            border: none;
            padding: 15px 20px;
            cursor: pointer;
            white-space: nowrap;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
            color: #6c757d;
            font-weight: 500;
        }

        .admin-tab-btn:hover {
            background: #e9ecef;
            color: #495057;
        }

        .admin-tab-btn.active {
            background: white;
            color: var(--primary-color);
            border-bottom-color: var(--primary-color);
        }

        .admin-content {
            background: white;
            min-height: 70vh;
            padding: 20px;
            border-radius: 0 0 10px 10px;
        }

        .admin-tab-content {
            display: none;
        }

        .admin-tab-content.active {
            display: block;
        }

        .admin-stats-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .admin-stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .admin-stat-card .stat-icon {
            font-size: 32px;
            margin-bottom: 10px;
            opacity: 0.8;
        }

        .admin-stat-card .stat-value {
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 5px;
            color: white;
        }

        .admin-stat-card .stat-label {
            font-size: 14px;
            opacity: 0.9;
            color: white;
        }

        .admin-search-box {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            align-items: center;
        }

        .admin-search-box input {
            flex: 1;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
        }

        .admin-search-box select {
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
            min-width: 150px;
        }

        .admin-btn-secondary {
            background: #6c757d;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .admin-btn-secondary:hover {
            background: #5a6268;
            transform: translateY(-2px);
        }

        .admin-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .admin-table th {
            background: var(--primary-color);
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: 600;
        }

        .admin-table td {
            padding: 12px 15px;
            border-bottom: 1px solid #eee;
        }

        .admin-table tr:hover {
            background: #f8f9fa;
        }

        .admin-pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            margin-top: 20px;
        }

        .admin-actions {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .admin-action-btn {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
        }

        .admin-action-btn:hover {
            background: #7b1fa2;
            transform: translateY(-2px);
        }

        .admin-recent-activity {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
        }

        .admin-recent-activity h3 {
            margin-top: 0;
            color: var(--primary-color);
        }

        .admin-activity-list {
            max-height: 300px;
            overflow-y: auto;
        }

        .admin-tab-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .admin-tab-header h3 {
            margin: 0;
            color: var(--primary-color);
        }

        .admin-filter {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .admin-pending-questions-list,
        .admin-reports-list {
            display: grid;
            gap: 15px;
        }

        .admin-settings-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .admin-settings-section h3 {
            margin-top: 0;
            color: var(--primary-color);
        }

        .admin-setting-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid #dee2e6;
        }

        .admin-setting-item:last-child {
            border-bottom: none;
        }

        .admin-toggle {
            position: relative;
            width: 50px;
            height: 25px;
        }

        .admin-toggle input {
            display: none;
        }

        .admin-toggle-slider {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: #ccc;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .admin-toggle-slider:before {
            content: '';
            position: absolute;
            height: 19px;
            width: 19px;
            left: 3px;
            bottom: 3px;
            background: white;
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .admin-toggle input:checked + .admin-toggle-slider {
            background: var(--primary-color);
        }

        .admin-toggle input:checked + .admin-toggle-slider:before {
            transform: translateX(25px);
        }

        .admin-settings-actions {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
        }

        .admin-btn-primary {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .admin-btn-primary:hover {
            background: #7b1fa2;
            transform: translateY(-2px);
        }

        /* Karanlƒ±k tema desteƒüi */
        [data-theme="dark"] .admin-panel {
            background: rgba(0, 0, 0, 0.95);
        }

        [data-theme="dark"] .admin-content {
            background: #333;
            color: #f5f5f5;
        }

        [data-theme="dark"] .admin-tabs {
            background: #444;
        }

        [data-theme="dark"] .admin-tab-btn {
            color: #ccc;
        }

        [data-theme="dark"] .admin-tab-btn.active {
            background: #333;
            color: white;
        }

        [data-theme="dark"] .admin-table {
            background: #333;
            color: #f5f5f5;
        }

        [data-theme="dark"] .admin-table td {
            border-bottom-color: #555;
        }

        [data-theme="dark"] .admin-table tr:hover {
            background: #444;
        }

        [data-theme="dark"] .admin-settings-section,
        [data-theme="dark"] .admin-recent-activity {
            background: #444;
        }

        /* Responsive admin panel */
        @media (max-width: 768px) {
            .admin-panel {
                padding: 10px;
            }

            .admin-stats-cards {
                grid-template-columns: 1fr;
            }

            .admin-tabs {
                flex-direction: column;
            }

            .admin-search-box {
                flex-direction: column;
            }

            .admin-actions {
                flex-direction: column;
            }

            .admin-table {
                font-size: 12px;
            }

            .admin-table th,
            .admin-table td {
                padding: 8px;
            }
        }

        /* Modal stilleri */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(5px);
            animation: fadeIn 0.3s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }

        .modal-content {
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
            margin: 3% auto;
            padding: 0;
            border: none;
            border-radius: 20px;
            width: 90%;
            max-width: 600px;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.25);
            position: relative;
            animation: slideIn 0.4s ease-out;
            overflow: hidden;
        }

        @keyframes slideIn {
            from { 
                transform: translateY(-50px); 
                opacity: 0; 
            }
            to { 
                transform: translateY(0); 
                opacity: 1; 
            }
        }

        .modal-content h2 {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            text-align: center;
            margin: 0;
            padding: 25px;
            font-size: 24px;
            font-weight: 700;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            position: relative;
        }

        .modal-content h2::before {
            content: '‚ú®';
            margin-right: 10px;
            font-size: 20px;
        }

        .close {
            position: absolute;
            top: 15px;
            right: 20px;
            color: rgba(255, 255, 255, 0.9);
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            border-radius: 50%;
            width: 35px;
            height: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255, 255, 255, 0.1);
        }

        .close:hover,
        .close:focus {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.1);
            text-decoration: none;
        }

        #question-form {
            padding: 30px;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2d3748;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .form-group label::before {
            margin-right: 8px;
        }

        .form-group:nth-child(1) label::before { content: 'üìã'; }
        .form-group:nth-child(2) label::before { content: '‚ùì'; }
        .form-group:nth-child(3) label::before { content: 'üìù'; }
        .form-group:nth-child(4) label::before { content: '‚úÖ'; }
        .form-group:nth-child(5) label::before { content: '‚ö°'; }

        .form-group select,
        .form-group textarea,
        .form-group input[type="text"] {
            width: 100%;
            padding: 15px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            font-size: 16px;
            background: white;
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            font-family: 'Poppins', sans-serif;
        }

        .form-group select:focus,
        .form-group textarea:focus,
        .form-group input[type="text"]:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102,126,234,0.1);
            transform: translateY(-2px);
        }

        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }

        .form-group input[type="text"] {
            margin-bottom: 12px;
        }

        .form-group input[type="text"]:nth-child(2)::placeholder::before { content: 'üÖ∞Ô∏è '; }
        .form-group input[type="text"]:nth-child(3)::placeholder::before { content: 'üÖ±Ô∏è '; }
        .form-group input[type="text"]:nth-child(4)::placeholder::before { content: 'üÖæÔ∏è '; }
        .form-group input[type="text"]:nth-child(5)::placeholder::before { content: 'üî¥ '; }

        .submit-button {
            width: 100%;
            padding: 15px 30px;
            background: linear-gradient(135deg, #48bb78, #38a169);
            color: white;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-weight: 600;
            font-size: 18px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(72,187,120,0.3);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .submit-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(72,187,120,0.4);
            background: linear-gradient(135deg, #38a169, #2f855a);
        }

        .submit-button:active {
            transform: translateY(-1px);
        }

        .submit-button::before {
            content: '‚úÖ ';
            margin-right: 8px;
        }

        /* Responsive modal */
        @media (max-width: 768px) {
            .modal-content {
                width: 95%;
                margin: 10px auto;
                border-radius: 15px;
            }
            
            .modal-content h2 {
                font-size: 20px;
                padding: 20px;
            }
            
            #question-form {
                padding: 20px;
            }
            
            .form-group {
                margin-bottom: 20px;
            }
        }

        /* Loading animation */
        .submit-button.loading {
            position: relative;
            color: transparent;
        }

        .submit-button.loading::after {
            content: '';
            position: absolute;
            width: 20px;
            height: 20px;
            top: 50%;
            left: 50%;
            margin-left: -10px;
            margin-top: -10px;
            border: 2px solid transparent;
            border-top: 2px solid white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Ba≈üarƒ± mesajƒ± animasyonlarƒ± */
        @keyframes slideInRight {
            from {
                transform: translateX(300px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes slideOutRight {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(300px);
                opacity: 0;
            }
        }
    </style>
</head>
<body>
    <!-- Ana ƒ∞√ßerik -->
    <!-- Ses efektleri i√ßin audio elementleri -->
    <audio id="sound-correct" src="https://assets.mixkit.co/active_storage/sfx/951/951.wav" preload="auto"></audio>
    <audio id="sound-wrong" src="https://assets.mixkit.co/active_storage/sfx/1021/1021.wav" preload="auto"></audio>
    <audio id="sound-timer" src="https://assets.mixkit.co/active_storage/sfx/3005/3005.wav" preload="auto"></audio>
    <audio id="sound-gameover" src="https://assets.mixkit.co/active_storage/sfx/3006/3006.wav" preload="auto"></audio>
    <audio id="sound-victory" src="https://assets.mixkit.co/active_storage/sfx/2018/2018.wav" preload="auto"></audio>
    
    <!-- Hamburger Men√º Toggle -->
    <div class="hamburger-toggle" id="hamburger-toggle">
        <i class="fas fa-bars"></i>
    </div>
    
    <!-- Men√º Overlay (Arka plan kapatƒ±cƒ±) -->
    <div class="menu-overlay" id="menu-overlay"></div>
    
    <!-- Hamburger Men√º -->
    <div class="hamburger-menu" id="hamburger-menu">
        <!-- Kullanƒ±cƒ± Profil Bilgisi (Oturum a√ßƒ±ksa g√∂r√ºn√ºr) -->
        <div class="user-profile-section" id="user-profile-section" style="display: none;">
            <div class="user-avatar">
                <i class="fas fa-user-circle"></i>
            </div>
            <div class="user-info-menu">
                <p class="user-name" id="menu-user-name">Kullanƒ±cƒ±</p>
                <p class="user-email" id="menu-user-email">kullanici@email.com</p>
            </div>
        </div>
        
        <!-- Men√º √ñƒüeleri -->
        <div class="menu-section">
            <h3 id="menu-app-title">Uygulama</h3>
            <div class="menu-item" id="menu-home">
                <i class="fas fa-home"></i> <span id="menu-home-text">Ana Sayfa</span>
            </div>
            <div class="menu-item" id="menu-profile">
                <i class="fas fa-user"></i> <span id="menu-profile-text">Profilim</span>
            </div>
            <div class="menu-item" id="menu-friends">
                <i class="fas fa-user-friends"></i> <span id="menu-friends-text">Arkada≈ülarƒ±m</span>
            </div>
            <div class="menu-item" id="menu-leaderboard">
                <i class="fas fa-trophy"></i> <span id="menu-leaderboard-text">Lider Tablosu</span>
            </div>
            <div class="menu-item" id="menu-admin-panel" style="display: none;">
                <i class="fas fa-shield-alt"></i> <span id="menu-admin-text">Y√∂netici Paneli</span>
            </div>
        </div>
        
        <!-- Ayarlar B√∂l√ºm√º -->
        <div class="menu-section">
            <h3 id="menu-settings-title">Ayarlar</h3>
            <!-- Zorluk Seviyesi -->
            <div class="menu-item">
                <i class="fas fa-sliders-h"></i> <span id="menu-difficulty-text">Zorluk</span>
                <select id="difficulty-level" style="margin-left: auto; background: rgba(255, 255, 255, 0.1); color: white; border: 2px solid rgba(255,255,255,0.2); padding: 8px; border-radius: 8px; transition: all 0.3s ease;">
                    <option value="easy">Kolay</option>
                    <option value="medium" selected>Orta</option>
                    <option value="hard">Zor</option>
                </select>
            </div>
            
            <!-- Ses Ayarlarƒ± -->
            <div class="menu-item">
                <i class="fas fa-volume-up"></i> <span id="menu-sound-text">Ses</span>
                <div class="toggle-switch">
                    <input type="checkbox" id="sound-toggle" checked />
                    <label for="sound-toggle" class="switch-label"></label>
                </div>
            </div>
            
            <!-- Tema Ayarlarƒ± -->
            <div class="menu-item">
                <i class="fas fa-moon"></i> <span id="menu-theme-text">Karanlƒ±k Tema</span>
                <div class="theme-switch-wrapper">
                    <label class="theme-switch" for="checkbox">
                        <input type="checkbox" id="checkbox" />
                        <div class="slider round">
                            <i class="fas fa-sun"></i>
                            <i class="fas fa-moon"></i>
                        </div>
                    </label>
                </div>
            </div>
        </div>
        
        <!-- √áƒ±kƒ±≈ü B√∂l√ºm√º -->
        <div class="menu-section">
            <div class="menu-item" id="menu-logout">
                <i class="fas fa-sign-out-alt"></i> <span id="menu-logout-text">√áƒ±kƒ±≈ü Yap</span>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="main-logo-container" style="text-align: center; margin-bottom: 10px;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 500 140" width="400" height="112" style="max-width: 100%; height: auto;">
                <defs>
                    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
                        <feDropShadow dx="2" dy="4" stdDeviation="3" flood-color="rgba(0,0,0,0.2)"/>
                    </filter>
                    <linearGradient id="blueGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                        <stop offset="0%" style="stop-color:#4285f4;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#1a73e8;stop-opacity:1" />
                    </linearGradient>
                    <linearGradient id="redGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                        <stop offset="0%" style="stop-color:#ea4335;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#d93025;stop-opacity:1" />
                    </linearGradient>
                    <linearGradient id="yellowGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                        <stop offset="0%" style="stop-color:#fbbc04;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#f9ab00;stop-opacity:1" />
                    </linearGradient>
                    <linearGradient id="greenGrad" x1="0%" y1="0%" x2="0%" y2="100%">
                        <stop offset="0%" style="stop-color:#34a853;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#137333;stop-opacity:1" />
                    </linearGradient>
                </defs>
                <text x="60" y="100" font-family="Arial, sans-serif" font-size="100" font-weight="bold" 
                      fill="url(#blueGrad)" filter="url(#shadow)">B</text>
                <text x="135" y="100" font-family="Arial, sans-serif" font-size="100" font-weight="bold" 
                      fill="url(#redGrad)" filter="url(#shadow)">i</text>
                <text x="170" y="100" font-family="Arial, sans-serif" font-size="100" font-weight="bold" 
                      fill="url(#yellowGrad)" filter="url(#shadow)">l</text>
                <text x="205" y="100" font-family="Arial, sans-serif" font-size="100" font-weight="bold" 
                      fill="url(#blueGrad)" filter="url(#shadow)">g</text>
                <text x="275" y="100" font-family="Arial, sans-serif" font-size="100" font-weight="bold" 
                      fill="url(#greenGrad)" filter="url(#shadow)">o</text>
                <text x="345" y="100" font-family="Arial, sans-serif" font-size="100" font-weight="bold" 
                      fill="url(#redGrad)" filter="url(#shadow)">o</text>
            </svg>
        </div>

        <!-- √áevrimi√ßi oyun b√∂l√ºm√º -->
        <div id="online-game-options" style="display: none;">
            <h2><i class="fas fa-globe"></i> <span data-i18n="online_mode">√áevrimi√ßi Mod</span></h2>
            <div class="online-options">
                <button id="create-room" class="online-btn"><i class="fas fa-plus-circle"></i> <span data-i18n="create_room">Oda Olu≈ütur</span></button>
                <button id="join-room" class="online-btn"><i class="fas fa-sign-in-alt"></i> <span data-i18n="join_room">Odaya Katƒ±l</span></button>
                <button id="back-to-main" class="online-btn"><i class="fas fa-arrow-left"></i> <span data-i18n="back">Geri</span></button>
            </div>
            <div id="room-creation" style="display: none;">
                <input type="text" id="room-name" placeholder="Oda adƒ±" maxlength="20">
                <div class="room-capacity-container">
                    <label for="room-capacity">Oda Kapasitesi:</label>
                    <select id="room-capacity">
                        <option value="2">2 Oyuncu</option>
                        <option value="3">3 Oyuncu</option>
                        <option value="4">4 Oyuncu</option>
                        <option value="5">5 Oyuncu</option>
                        <option value="6">6 Oyuncu</option>
                    </select>
                </div>
                <div class="room-category-container">
                    <label for="room-category">Kategori:</label>
                    <select id="room-category">
                        <option value="">Kategori Se√ßin</option>
                        <!-- Kategoriler JS ile dinamik olarak eklenecek -->
                    </select>
                </div>
                <button id="create-room-submit" class="btn-primary"><i class="fas fa-check-circle"></i> <span data-i18n="create">Olu≈ütur</span></button>
            </div>
            <div id="room-join" style="display: none;">
                <input type="text" id="room-code" placeholder="Oda kodu" maxlength="6">
                <button id="join-room-submit" class="btn-primary"><i class="fas fa-sign-in-alt"></i> <span data-i18n="join">Katƒ±l</span></button>
            </div>
        </div>
        
        <!-- Bekleme odasƒ± - √ßoklu oyun ba≈ülƒ±ƒüƒ± dƒ±≈üƒ±nda -->
        <div id="waiting-room" style="display: none;">
            <h3><i class="fas fa-users"></i> <span data-i18n="waiting_players">Oyuncular Bekleniyor</span></h3>
            <div class="room-code-display">
                <p><span data-i18n="room_code">Oda Kodu</span>:</p>
                <div id="display-room-code" class="room-code">XXXXXX</div>
                <button class="copy-code-btn" onclick="navigator.clipboard.writeText(document.getElementById('display-room-code').textContent)"><i class="fas fa-copy"></i></button>
            </div>
            <div class="waiting-room-container">
                <div class="player-list-container">
                    <h4><i class="fas fa-user-friends"></i> <span data-i18n="players">Oyuncular</span></h4>
                    <div id="player-list">
                        <!-- Oyuncular buraya eklenecek -->
                    </div>
                </div>
                
                <div class="chat-container">
                    <div class="chat-header">
                        <h4><i class="fas fa-comments"></i> Sohbet</h4>
                        <button id="chat-rules-btn" class="chat-rules-btn" title="Sohbet kurallarƒ±"><i class="fas fa-info-circle"></i></button>
                    </div>
                    <div class="chat-consent-notice" id="chat-consent-notice">
                        <p>Bu sohbetteki mesajlar KVKK/GDPR kapsamƒ±nda korunmaktadƒ±r. Mesajlar s√ºresiz olarak saklanabilir. Ki≈üisel bilgilerinizi payla≈ümayƒ±nƒ±z.</p>
                        <button id="accept-chat-terms" class="accept-btn">Kabul Ediyorum</button>
                        <a href="#" id="chat-policy-link">Gizlilik Politikasƒ±</a>
                    </div>
                    <div id="chat-messages" class="chat-messages">
                        <!-- Mesajlar buraya eklenecek -->
                        <div class="system-message">Oda olu≈üturuldu. Oyuncular bekleniyor...</div>
                    </div>
                    <div class="chat-controls">
                        <div class="chat-input-container">
                            <input type="text" id="chat-input" placeholder="Bir mesaj yazƒ±n..." maxlength="100" disabled>
                            <button id="send-message-btn" disabled><i class="fas fa-paper-plane"></i></button>
                        </div>
                        <div class="chat-actions">
                            <button id="report-message-btn" class="action-btn" title="Mesajƒ± bildir"><i class="fas fa-flag"></i></button>
                            <button id="block-user-btn" class="action-btn" title="Kullanƒ±cƒ±yƒ± engelle"><i class="fas fa-ban"></i></button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="waiting-room-actions">
                <button id="start-game" class="btn-success" disabled><i class="fas fa-play"></i> <span data-i18n="start_game">Oyunu Ba≈ülat</span></button>
                <button id="leave-room" class="btn-danger"><i class="fas fa-sign-out-alt"></i> <span data-i18n="leave_room">Odadan Ayrƒ±l</span></button>
            </div>
        </div>

        <!-- Banner Reklam Alanƒ± -->
        <div class="ad-banner" id="top-banner-ad">
            <!-- Google AdSense Banner -->
            <ins class="adsbygoogle"
                 style="display:block"
                 data-ad-client="ca-pub-XXXXXXXXXXXXXXXX"
                 data-ad-slot="XXXXXXXXXX"
                 data-ad-format="auto"
                 data-full-width-responsive="true"></ins>
            <script>
                 (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
        </div>

        <div id="main-menu" class="main-menu" style="display: none;">
            <div class="menu-buttons">
                <button id="single-player-btn" class="menu-button">Tekli Oyun</button>
                <button id="online-game-button" class="menu-button">√áok Oyunculu</button>
                <button id="view-global-leaderboard" class="menu-button">K√ºresel Skor Tablosu</button>
                <button id="show-stats" class="menu-button">ƒ∞statistikler</button>
                <button id="add-question-button" class="menu-button">Soru Ekle</button>
            </div>
        </div>

        <!-- Kategori se√ßimi -->
        <div id="category-selection" style="display: none;">
            <h2><i class="fas fa-th-list"></i> <span data-i18n="select_category">Kategori Se√ßin</span></h2>
            <div id="categories"></div>
        </div>

        <div id="quiz" style="display: none;"> <!-- Ba≈ülangƒ±√ßta gizli -->
            
            <!-- Oyun Sƒ±rasƒ±nda Puan G√∂stergesi -->
            <div class="game-header">
                <!-- Can g√∂sterimi -->
                <div id="lives-container" class="lives-container">
                    <!-- Canlar JavaScript ile dinamik olarak eklenecek -->
                </div>
                
                <!-- Zamanlayƒ±cƒ± -->
                <div id="timer" class="timer-display"><i class="fas fa-hourglass-half"></i> <span id="time-left">--</span>sn</div>
                
                <!-- Puan g√∂sterimi -->
                <div class="score-display-simple">
                    <div class="total-score-simple">
                        <i class="fas fa-star"></i>
                        <span id="total-score-value">0</span>
                    </div>
                    <div class="current-score-simple">
                        <i class="fas fa-trophy"></i>
                        <span id="current-score">0</span>
                    </div>
                </div>
            </div>
            
            <div class="quiz-container">
                <div class="quiz-main">
                    <div id="question">Soru burada g√∂r√ºnecek</div>
                    
                    <!-- √áevrimi√ßi oyun g√∂stergeleri -->
                    <div id="online-indicators" style="display: none;">
                        <div id="player-scores">
                            <!-- Oyuncu skorlarƒ± burada g√∂sterilecek -->
                        </div>
                    </div>
                    
                    <div id="options">
                        <!-- Se√ßenekler buraya JavaScript ile eklenecek -->
                    </div>
                    <button id="next-question" style="display: none;"><i class="fas fa-arrow-right"></i> <span data-i18n="next_question">Sonraki Soru</span></button> <!-- Sonraki soru butonu eklendi -->
                    
                    <!-- Joker butonlarƒ± - en alta alƒ±ndƒ± -->
                    <div id="jokers">
                        <button id="joker-fifty" class="joker-btn" title="50:50 - ƒ∞ki yanlƒ±≈ü cevabƒ± ele"><i class="fas fa-star-half-alt"></i></button>
                        <button id="joker-hint" class="joker-btn" title="ƒ∞pucu - Doƒüru cevap hakkƒ±nda ipucu verir"><i class="fas fa-lightbulb"></i></button>
                        <button id="joker-time" class="joker-btn" title="S√ºre Uzatma - Sorunun s√ºresini 15 saniye uzatƒ±r"><i class="fas fa-clock"></i></button>
                        <button id="joker-skip" class="joker-btn" title="Pas - Bu soruyu atlayƒ±n ve puan kaybetmeyin"><i class="fas fa-forward"></i></button>
                        <button id="joker-store" class="joker-store-btn" title="Joker Maƒüazasƒ± - Puanlarƒ±nƒ±zla joker satƒ±n alƒ±n"><i class="fas fa-store"></i></button>
                    </div>
                </div>
                
                <!-- Oyun sƒ±rasƒ±nda g√∂r√ºnecek chat paneli -->
                <div id="game-chat-container" class="game-chat-container">
                    <div class="chat-header">
                        <h4><i class="fas fa-comments"></i> Sohbet</h4>
                        <button id="game-chat-rules-btn" class="chat-rules-btn" title="Sohbet kurallarƒ±"><i class="fas fa-info-circle"></i></button>
                    </div>
                    <div class="chat-consent-notice" id="game-chat-consent-notice">
                        <p>Bu sohbetteki mesajlar KVKK/GDPR kapsamƒ±nda korunmaktadƒ±r. Mesajlar s√ºresiz olarak saklanabilir. Ki≈üisel bilgilerinizi payla≈ümayƒ±nƒ±z.</p>
                        <button id="game-accept-chat-terms" class="accept-btn">Kabul Ediyorum</button>
                        <a href="#" id="game-chat-policy-link">Gizlilik Politikasƒ±</a>
                    </div>
                    <div id="game-chat-messages" class="chat-messages">
                        <!-- Mesajlar buraya eklenecek -->
                        <div class="system-message">Oyun ba≈üladƒ±. ƒ∞yi ≈üanslar!</div>
                    </div>
                    <div class="chat-controls">
                        <div class="chat-input-container">
                            <input type="text" id="game-chat-input" placeholder="Bir mesaj yazƒ±n..." maxlength="100" disabled>
                            <button id="game-send-message-btn" disabled><i class="fas fa-paper-plane"></i></button>
                        </div>
                        <div class="chat-actions">
                            <button id="game-report-message-btn" class="action-btn" title="Mesajƒ± bildir"><i class="fas fa-flag"></i></button>
                            <button id="game-block-user-btn" class="action-btn" title="Kullanƒ±cƒ±yƒ± engelle"><i class="fas fa-ban"></i></button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Kazanan ekranƒ± -->
        <div id="winner-screen" style="display: none;" class="winner-container">
            <div class="winner-content">
                <h2><i class="fas fa-trophy"></i> <span data-i18n="winner">Kazanan</span></h2>
                <div class="winner-info">
                    <div id="winner-name" class="winner-name">Oyuncu Adƒ±</div>
                    <div id="winner-score" class="winner-score">Skor: 0/10</div>
                </div>
                <div class="winner-medal">üèÜ</div>
                <div id="all-player-results" class="all-player-results">
                    <!-- Diƒüer oyuncularƒ±n sonu√ßlarƒ± burada listelenecek -->
                </div>
                <div class="winner-actions">
                    <button id="play-again-btn" class="btn-primary"><i class="fas fa-redo"></i> <span data-i18n="play_again">Tekrar Oyna</span></button>
                    <button id="back-to-menu-btn" class="btn-secondary"><i class="fas fa-home"></i> <span data-i18n="main_menu">Ana Men√º</span></button>
                </div>
            </div>
        </div>

        <!-- Lider tablosu -->
        <div id="global-leaderboard" style="display: none;">
            <h2><i class="fas fa-trophy"></i> <span data-i18n="leaderboard_title">K√ºresel Lider Tablosu</span></h2>
            
            <div class="leaderboard-filters">
                <select id="leaderboard-category">
                    <option value="all" data-i18n="leaderboard_all">T√ºm Kategoriler</option>
                    <option value="Genel K√ºlt√ºr" data-i18n="categoryGeneral">Genel K√ºlt√ºr</option>
                    <option value="Bilim" data-i18n="categoryScience">Bilim</option>
                    <option value="Teknoloji" data-i18n="categoryTechnology">Teknoloji</option>
                    <option value="Spor" data-i18n="categorySports">Spor</option>
                    <option value="M√ºzik" data-i18n="categoryMusic">M√ºzik</option>
                    <option value="Edebiyat" data-i18n="categoryLiterature">Edebiyat</option>
                    <option value="Tarih" data-i18n="categoryHistory">Tarih</option>
                </select>
                <select id="leaderboard-time">
                    <option value="weekly" data-i18n="leaderboard_weekly">Haftalƒ±k</option>
                    <option value="monthly" data-i18n="leaderboard_monthly">Aylƒ±k</option>
                    <option value="alltime" data-i18n="leaderboard_alltime">T√ºm Zamanlar</option>
                </select>
                <button id="refresh-leaderboard" class="refresh-btn"><i class="fas fa-sync-alt"></i> <span data-i18n="leaderboard_refresh">Yenile</span></button>
            </div>
            
            <div id="leaderboard-list" class="leaderboard-list">
                <!-- Lider tablosu burada g√∂sterilecek -->
            </div>
            
            <div class="leaderboard-info">
                <p><i class="fas fa-info-circle"></i> <span data-i18n="leaderboard_info">Y√ºksek skorlar, her kategorideki doƒüru cevap oranƒ±na g√∂re sƒ±ralanƒ±r.</span></p>
                <p><span data-i18n="leaderboard_filter_info">Filtreleri kullanarak farklƒ± kategorilerdeki ve zaman dilimlerindeki skorlarƒ± g√∂rebilirsiniz.</span></p>
            </div>
            
            <button id="back-from-leaderboard" class="back-btn"><i class="fas fa-arrow-left"></i> <span data-i18n="back_to_menu">Ana Men√ºye D√∂n</span></button>
        </div>

        <!-- Profil Sayfasƒ± -->
        <div id="profile-page" style="display: none;">
            <h2><i class="fas fa-user"></i> Profil Sayfasƒ±</h2>
            
            <div class="profile-container">
                <div class="profile-card">
                    <div class="profile-avatar">
                        <i class="fas fa-user-circle fa-4x"></i>
                    </div>
                    <div class="profile-details">
                        <h2 id="profile-name">Kullanƒ±cƒ± Adƒ±</h2>
                        <p id="profile-email">kullanici@email.com</p>
                        <p class="profile-since">√úyelik: <span id="profile-join-date">01.01.2025</span></p>
                    </div>
                    <div class="profile-actions-secondary">
                        <button class="btn-secondary" id="edit-profile-btn"><i class="fas fa-edit"></i> Profili D√ºzenle</button>
                    </div>
                </div>
                
                <div class="stats-card">
                    <h3><i class="fas fa-chart-line"></i> ƒ∞statistikler</h3>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <span class="stat-value" id="stats-total-games">0</span>
                            <span class="stat-label">Toplam Oyun</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-value" id="stats-total-questions">0</span>
                            <span class="stat-label">Toplam Soru</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-value" id="stats-correct-answers">0</span>
                            <span class="stat-label">Doƒüru Cevap</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-value" id="stats-accuracy">%0</span>
                            <span class="stat-label">Doƒüruluk Oranƒ±</span>
                        </div>
                    </div>
                </div>
                
                <div class="badges-showcase">
                    <h3><i class="fas fa-award"></i> Rozetler</h3>
                    <div class="badges-grid" id="profile-badges-container">
                        <!-- Rozetler burada g√∂sterilecek -->
                        <div class="badge-placeholder">Hen√ºz rozet kazanƒ±lmadƒ±</div>
                    </div>
                </div>
                
                <div class="high-scores-card">
                    <h3><i class="fas fa-trophy"></i> En Y√ºksek Skorlar</h3>
                    <table class="high-scores-table">
                        <thead>
                            <tr>
                                <th>Kategori</th>
                                <th>Skor</th>
                                <th>Tarih</th>
                            </tr>
                        </thead>
                        <tbody id="profile-high-scores">
                            <!-- Y√ºksek skorlar burada g√∂sterilecek -->
                            <tr><td colspan="3" class="no-data">Hen√ºz kaydedilen skor yok</td></tr>
                        </tbody>
                    </table>
                </div>
                
                <div class="recent-activities">
                    <h3><i class="fas fa-history"></i> Son Aktiviteler</h3>
                    <div class="activity-list" id="recent-activities-list">
                        <!-- Aktiviteler burada g√∂sterilecek -->
                        <div class="activity-item">
                            <div class="activity-icon"><i class="fas fa-gamepad"></i></div>
                            <div class="activity-details">
                                <div class="activity-title">Genel K√ºlt√ºr kategorisinde bir oyun oynandƒ±</div>
                                <div class="activity-time">4 saat √∂nce</div>
                            </div>
                            <div class="activity-score">Skor: 75</div>
                        </div>
                        <div class="activity-item">
                            <div class="activity-icon"><i class="fas fa-award"></i></div>
                            <div class="activity-details">
                                <div class="activity-title">"Bilgi Ustasƒ±" rozeti kazanƒ±ldƒ±</div>
                                <div class="activity-time">2 g√ºn √∂nce</div>
                            </div>
                        </div>
                        <div class="activity-item">
                            <div class="activity-icon"><i class="fas fa-tasks"></i></div>
                            <div class="activity-details">
                                <div class="activity-title">3 g√ºnl√ºk g√∂rev tamamlandƒ±</div>
                                <div class="activity-time">3 g√ºn √∂nce</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="profile-actions">
                    <button class="btn-primary" id="back-from-profile"><i class="fas fa-arrow-left"></i> Ana Men√ºye D√∂n</button>
                    <button class="btn-danger" id="logout-from-profile"><i class="fas fa-sign-out-alt"></i> √áƒ±kƒ±≈ü Yap</button>
                </div>
            </div>
        </div>

        <div id="result" style="display: none;">
            <h2><i class="fas fa-trophy"></i> <span data-i18n="result">Sonu√ß</span></h2>
            <div id="confetti-container"></div> <!-- Konfeti i√ßin container -->
            <p id="score"></p>
            
            <!-- Ba≈üarƒ± rozetleri -->
            <div id="badges" class="badges-container">
                <!-- Rozetler JavaScript ile eklenecek -->
            </div>
            
            <!-- ƒ∞statistikler -->
            <div id="stats" class="stats-container">
                <h3><i class="fas fa-chart-bar"></i> <span data-i18n="statistics">ƒ∞statistikler</span></h3>
                <div class="stats-grid">
                    <div class="stat-item">
                        <span class="stat-value" id="total-questions">0</span>
                        <span class="stat-label" data-i18n="total_questions">Toplam Soru</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value" id="correct-answers">0</span>
                        <span class="stat-label" data-i18n="correct_answers">Doƒüru Cevap</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value" id="average-time">0s</span>
                        <span class="stat-label" data-i18n="average_time">Ort. S√ºre</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-value" id="best-category">-</span>
                        <span class="stat-label" data-i18n="best_category">En ƒ∞yi Kategori</span>
                    </div>
                </div>
            </div>
            
            <button id="restart"><i class="fas fa-redo"></i> <span data-i18n="back_to_categories">Kategori Se√ßimine D√∂n</span></button>
            <button id="share-score"><i class="fas fa-share-alt"></i> <span data-i18n="share_score">Skoru Payla≈ü</span></button>
            <button id="report-question" class="report-question" style="display: none;"><i class="fas fa-flag"></i> <span data-i18n="report_question">Soruyu Bildir</span></button>
            
            <!-- Yeni sekme sistemi -->
            <div class="result-tabs">
                <div class="tab-nav">
                    <button class="tab-button active" data-tab="high-scores"><i class="fas fa-trophy"></i> Y√ºksek Skorlar</button>
                    <button class="tab-button" data-tab="daily-tasks"><i class="fas fa-tasks"></i> G√ºnl√ºk G√∂revler</button>
                    <button class="tab-button" data-tab="achievements"><i class="fas fa-award"></i> Ba≈üarƒ±mlar</button>
                    <button class="tab-button" data-tab="progress" id="progress-tab"><i class="fas fa-chart-line"></i> ƒ∞lerleme</button>
                    <button class="tab-button" data-tab="feedbacks"><i class="fas fa-comment-alt"></i> Bildirimler</button>
                </div>
                
                <div class="tab-content">
                    <!-- Y√ºksek Skorlar Sekmesi -->
                    <div class="tab-pane active" id="high-scores-tab">
                        <div id="high-scores">
                            <h3><i class="fas fa-medal"></i> <span data-i18n="high_scores">En Y√ºksek Skorlar</span></h3>
                            <ul id="high-scores-list">
                                <!-- Skorlar buraya eklenecek -->
                            </ul>
                        </div>
                    </div>
                    
                    <!-- G√ºnl√ºk G√∂revler Sekmesi -->
                    <div class="tab-pane" id="daily-tasks-tab">
                        <div id="daily-tasks-container">
                            <!-- G√ºnl√ºk g√∂revler buraya JavaScript ile eklenecek -->
                        </div>
                    </div>
                    
                    <!-- Ba≈üarƒ±mlar Sekmesi -->
                    <div class="tab-pane" id="achievements-tab">
                        <div id="achievements-container">
                            <!-- Ba≈üarƒ±mlar buraya JavaScript ile eklenecek -->
                        </div>
                    </div>
                    
                    <!-- ƒ∞lerleme Sekmesi -->
                    <div class="tab-pane" id="progress-tab">
                        <div class="charts-container">
                            <div class="chart-section">
                                <h3><i class="fas fa-chart-bar"></i> Kategori Ba≈üarƒ±sƒ±</h3>
                                <div class="chart-wrapper">
                                    <canvas id="category-chart"></canvas>
                                </div>
                            </div>
                            
                            <div class="chart-section">
                                <h3><i class="fas fa-chart-line"></i> Zaman ƒ∞√ßindeki Performans</h3>
                                <div class="chart-wrapper">
                                    <canvas id="time-chart"></canvas>
                                </div>
                            </div>
                            
                            <button id="update-charts" class="update-btn"><i class="fas fa-sync"></i> Grafikleri G√ºncelle</button>
                        </div>
                    </div>
                    
                    <!-- Bildirimler Sekmesi -->
                    <div class="tab-pane" id="feedbacks-tab">
                        <div class="feedbacks-container">
                            <h3><i class="fas fa-comment-alt"></i> Soru Bildirimleri</h3>
                            <div id="feedback-list">
                                <!-- Bildirimler buraya JavaScript ile eklenecek -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Soru Ekleme Formu -->
        <div id="add-question-form" class="modal" style="display: none;">
            <div class="modal-content">
                <span class="close">&times;</span>
                <h2>Yeni Soru Ekle</h2>
                
                <div class="approval-notice">
                    <div class="notice-icon">
                        <i class="fas fa-info-circle"></i>
                    </div>
                    <div class="notice-content">
                        <h4>üìã Onay S√ºreci</h4>
                        <p>Eklediƒüiniz sorular √∂nce y√∂netici onayƒ±ndan ge√ßecek ve ardƒ±ndan soru bankasƒ±na eklenecektir. Bu s√ºre√ß genellikle 24-48 saat i√ßinde tamamlanƒ±r.</p>
                    </div>
                </div>
                
                <form id="question-form">
                    <div class="form-group">
                        <label for="question-category">Kategori:</label>
                        <select id="question-category" required>
                            <option value="">Kategori se√ßin...</option>
                            <option value="Genel K√ºlt√ºr">üìö Genel K√ºlt√ºr</option>
                            <option value="Bilim">üî¨ Bilim</option>
                            <option value="Teknoloji">üíª Teknoloji</option>
                            <option value="Spor">‚öΩ Spor</option>
                            <option value="Sanat">üé® Sanat</option>
                            <option value="Tarih">üèõÔ∏è Tarih</option>
                            <option value="Coƒürafya">üåç Coƒürafya</option>
                            <option value="Edebiyat">üìñ Edebiyat</option>
                            <option value="Matematik">üî¢ Matematik</option>
                            <option value="M√ºzik">üéµ M√ºzik</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="question-text">Soru:</label>
                        <textarea id="question-text" required placeholder="Sorunuzu buraya yazƒ±n..."></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label>≈ûƒ±klar:</label>
                        <input type="text" id="option-a" placeholder="üÖ∞Ô∏è A ≈ûƒ±kkƒ±" required>
                        <input type="text" id="option-b" placeholder="üÖ±Ô∏è B ≈ûƒ±kkƒ±" required>
                        <input type="text" id="option-c" placeholder="üÖæÔ∏è C ≈ûƒ±kkƒ±" required>
                        <input type="text" id="option-d" placeholder="üî¥ D ≈ûƒ±kkƒ±" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="correct-answer">Doƒüru Cevap:</label>
                        <select id="correct-answer" required>
                            <option value="">Doƒüru cevabƒ± se√ßin...</option>
                            <option value="0">üÖ∞Ô∏è A ≈ûƒ±kkƒ±</option>
                            <option value="1">üÖ±Ô∏è B ≈ûƒ±kkƒ±</option>
                            <option value="2">üÖæÔ∏è C ≈ûƒ±kkƒ±</option>
                            <option value="3">üî¥ D ≈ûƒ±kkƒ±</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="question-difficulty">Zorluk Seviyesi:</label>
                        <select id="question-difficulty" required>
                            <option value="">Zorluk seviyesi se√ßin...</option>
                            <option value="1">üü¢ Kolay</option>
                            <option value="2">üü° Orta</option>
                            <option value="3">üî¥ Zor</option>
                        </select>
                    </div>
                    
                    <button type="submit" class="submit-button btn-primary">Soruyu Ekle</button>
                </form>
            </div>
        </div>

        <footer>
            <div class="company-info">
                <div class="logo">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" width="32" height="32">
                        <!-- Yaprak ≈üekli -->
                        <path d="M25,2 C22,5 12,12 8,18 C4,24 5,36 12,40 C19,44 28,45 35,40 C42,35 43,28 42,22 C41,16 35,10 30,6 C27,4 25,2 25,2 Z" fill="#4CAF50"/>
                        
                        <!-- Devre yollarƒ± olarak yaprak damarlarƒ± -->
                        <path d="M25,2 C25,15 25,28 25,40" stroke="white" stroke-width="1.2" fill="none"/>
                        <circle cx="25" cy="2" r="1" fill="white"/>
                        <circle cx="25" cy="15" r="1" fill="white"/>
                        <circle cx="25" cy="28" r="1" fill="white"/>
                        <circle cx="25" cy="40" r="1" fill="white"/>
                        
                        <path d="M10,18 C20,20 30,18 40,20" stroke="white" stroke-width="1.2" fill="none"/>
                        <circle cx="10" cy="18" r="1" fill="white"/>
                        <circle cx="20" cy="20" r="1" fill="white"/>
                        <circle cx="30" cy="18" r="1" fill="white"/>
                        <circle cx="40" cy="20" r="1" fill="white"/>
                        
                        <path d="M12,32 C20,34 30,32 38,30" stroke="white" stroke-width="1.2" fill="none"/>
                        <circle cx="12" cy="32" r="1" fill="white"/>
                        <circle cx="20" cy="34" r="1" fill="white"/>
                        <circle cx="30" cy="32" r="1" fill="white"/>
                        <circle cx="38" cy="30" r="1" fill="white"/>
                        
                        <!-- Diƒüer devre yollarƒ± -->
                        <path d="M15,10 L35,10 L35,20 L30,20 L30,25 L35,25 L35,30 L25,30 L25,35 L15,35 L15,25 L20,25 L20,20 L15,20 Z" 
                              stroke="white" stroke-width="1.2" fill="none"/>
                        <circle cx="15" cy="10" r="1" fill="white"/>
                        <circle cx="35" cy="10" r="1" fill="white"/>
                        <circle cx="35" cy="20" r="1" fill="white"/>
                        <circle cx="30" cy="20" r="1" fill="white"/>
                        <circle cx="30" cy="25" r="1" fill="white"/>
                        <circle cx="35" cy="25" r="1" fill="white"/>
                        <circle cx="35" cy="30" r="1" fill="white"/>
                        <circle cx="25" cy="30" r="1" fill="white"/>
                        <circle cx="25" cy="35" r="1" fill="white"/>
                        <circle cx="15" cy="35" r="1" fill="white"/>
                        <circle cx="15" cy="25" r="1" fill="white"/>
                        <circle cx="20" cy="25" r="1" fill="white"/>
                        <circle cx="20" cy="20" r="1" fill="white"/>
                        <circle cx="15" cy="20" r="1" fill="white"/>
                    </svg>
                </div>
                <p>&copy; 2025 TEKNOVA Bƒ∞Lƒ∞≈ûƒ∞M</p>
            </div>
        </footer>
    </div>

    <!-- Konfeti library -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <!-- Chart.js i√ßin CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Firebase SDK - Yerel Dosyalar (Edge Tracking Prevention √á√∂z√ºm√º) -->
    <script src="firebase-sdk/firebase-app.js"></script>
    <script src="firebase-sdk/firebase-auth.js"></script>
    <script src="firebase-sdk/firebase-firestore.js"></script>
    <script src="firebase-config.js"></script>
    <!-- Diƒüer JS dosyalarƒ± -->
    <!-- Dil dosyasƒ± -->
    <script src="languages.js"></script>
    <script src="script.js"></script>
    <script src="online-game.js"></script>
    <script src="friends.js"></script>
    <script src="daily-tasks.js"></script>
    <script src="achievements.js"></script>
    <script src="progress-chart.js"></script>
    <script src="feedback.js"></script>
    <script src="admin-pending-questions.js"></script>
    <script src="monetization.js"></script>
    
    <!-- Cookie Consent Banner -->
    <div id="cookie-consent" class="cookie-consent" style="display: none;">
        <div class="cookie-content">
            <div class="cookie-text">
                <h3>üç™ √áerez Bildirimi</h3>
                <p>Web sitemiz, size daha iyi hizmet verebilmek ve reklamlarƒ± ki≈üiselle≈ütirmek i√ßin √ßerezler kullanƒ±r. 
                Detaylƒ± bilgi i√ßin <a href="privacy-policy.html" target="_blank">Gizlilik Politikamƒ±zƒ±</a> inceleyebilirsiniz.</p>
            </div>
            <div class="cookie-buttons">
                <button id="accept-essential" class="cookie-btn cookie-btn-secondary">Sadece Gerekli</button>
                <button id="accept-all" class="cookie-btn cookie-btn-primary">T√ºm√ºn√º Kabul Et</button>
                <button id="cookie-settings" class="cookie-btn cookie-btn-link">Ayarlar</button>
            </div>
        </div>
    </div>

    <!-- Cookie Settings Modal -->
    <div id="cookie-settings-modal" class="cookie-modal" style="display: none;">
        <div class="cookie-modal-content">
            <div class="cookie-modal-header">
                <h3>√áerez Ayarlarƒ±</h3>
                <button id="close-cookie-modal" class="cookie-close">&times;</button>
            </div>
            <div class="cookie-modal-body">
                <div class="cookie-category">
                    <label class="cookie-toggle">
                        <input type="checkbox" id="essential-cookies" checked disabled>
                        <span class="cookie-slider"></span>
                        <div class="cookie-info">
                            <h4>Zorunlu √áerezler</h4>
                            <p>Sitenin √ßalƒ±≈ümasƒ± i√ßin gerekli √ßerezler</p>
                        </div>
                    </label>
                </div>
                <div class="cookie-category">
                    <label class="cookie-toggle">
                        <input type="checkbox" id="analytics-cookies">
                        <span class="cookie-slider"></span>
                        <div class="cookie-info">
                            <h4>Analitik √áerezler</h4>
                            <p>Site kullanƒ±mƒ±nƒ± analiz etmek i√ßin kullanƒ±lƒ±r</p>
                        </div>
                    </label>
                </div>
                <div class="cookie-category">
                    <label class="cookie-toggle">
                        <input type="checkbox" id="advertising-cookies">
                        <span class="cookie-slider"></span>
                        <div class="cookie-info">
                            <h4>Reklam √áerezleri</h4>
                            <p>Ki≈üiselle≈ütirilmi≈ü reklamlar g√∂stermek i√ßin kullanƒ±lƒ±r</p>
                        </div>
                    </label>
                </div>
            </div>
            <div class="cookie-modal-footer">
                <button id="save-cookie-preferences" class="cookie-btn cookie-btn-primary">Kaydet</button>
            </div>
        </div>
    </div>

    <!-- Service Worker kaydƒ± -->
    <script>
        // Service Worker kaydƒ±
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./service-worker.js')
                    .then(registration => {
                        console.log('Service Worker ba≈üarƒ±yla kaydedildi:', registration);
                        
                        // √ñnbelleƒüi temizleme i≈ülemi
                        if (navigator.serviceWorker.controller) {
                            console.log('√ñnbellek temizleme isteƒüi g√∂nderiliyor...');
                            navigator.serviceWorker.controller.postMessage({
                                action: 'clearCache'
                            });
                        } else {
                            console.log('Service Worker hen√ºz aktif deƒüil, √∂nbellek temizlenemiyor');
                            // Service Worker'ƒ±n aktifle≈ümesini bekleyelim
                            navigator.serviceWorker.addEventListener('controllerchange', () => {
                                console.log('Service Worker aktifle≈üti, √∂nbellek temizleniyor...');
                                navigator.serviceWorker.controller.postMessage({
                                    action: 'clearCache'
                                });
                            });
                        }
                    })
                    .catch(error => {
                        console.log('Service Worker kaydƒ± ba≈üarƒ±sƒ±z:', error);
                    });
            });
        }
    </script>

    <script>
        // Hamburger men√º i≈ülevleri
        document.addEventListener('DOMContentLoaded', function() {
            const hamburgerToggle = document.getElementById('hamburger-toggle');
            const hamburgerMenu = document.getElementById('hamburger-menu');
            const menuOverlay = document.getElementById('menu-overlay');
            
            // Men√ºy√º a√ß/kapat
            hamburgerToggle.addEventListener('click', function() {
                hamburgerMenu.classList.toggle('active');
                
                // Debug: Admin panel durumunu kontrol et
                const adminPanelMenuItem = document.getElementById('menu-admin-panel');
                console.log('=== Hamburger men√º a√ßƒ±ldƒ± - Admin panel debug ===');
                console.log('Admin panel element var mƒ±?', adminPanelMenuItem ? 'Evet' : 'Hayƒ±r');
                if (adminPanelMenuItem) {
                    console.log('Admin panel display deƒüeri:', adminPanelMenuItem.style.display);
                    console.log('Admin panel computed style:', window.getComputedStyle(adminPanelMenuItem).display);
                }
                console.log('Aktif kullanƒ±cƒ±:', firebase.auth && firebase.auth().currentUser ? firebase.auth().currentUser.uid : 'Giri≈ü yapƒ±lmamƒ±≈ü');
                console.log('================================================');
                
                // Icon deƒüi≈ütirme
                const icon = hamburgerToggle.querySelector('i');
                if (hamburgerMenu.classList.contains('active')) {
                    icon.classList.remove('fa-bars');
                    icon.classList.add('fa-times');
                } else {
                    icon.classList.remove('fa-times');
                    icon.classList.add('fa-bars');
                }
            });
            
            // Overlay'e tƒ±klayƒ±nca men√ºy√º kapat
            menuOverlay.addEventListener('click', function() {
                hamburgerMenu.classList.remove('active');
                menuOverlay.classList.remove('active');
                
                // ƒ∞konu bars'a geri √ßevir
                const icon = hamburgerToggle.querySelector('i');
                icon.classList.remove('fa-times');
                icon.classList.add('fa-bars');
            });
            
            // Men√º √∂ƒüelerine olay dinleyiciler ekle
            const menuHomeElement = document.getElementById('menu-home');
            if (menuHomeElement) {
                console.log('menu-home elementi bulundu, event listener ekleniyor...');
                menuHomeElement.addEventListener('click', function() {
                console.log('=== Ana Sayfa butonuna tƒ±klandƒ± ===');
                
                hamburgerMenu.classList.remove('active');
                menuOverlay.classList.remove('active');
                
                // OYUN CLEANUP ƒ∞≈ûLEMLERƒ∞
                if (typeof quizApp !== 'undefined') {
                    console.log('quizApp bulundu, cleanup ba≈ülƒ±yor...');
                    
                    // Timer'ƒ± durdur
                    if (quizApp.stopTimer) {
                        quizApp.stopTimer();
                        console.log('Timer durduruldu (hamburger menu)');
                    }
                    
                    // Body class'larƒ±nƒ± temizle
                    document.body.classList.remove('quiz-active', 'category-selection');
                    
                    // Oyun durumunu sƒ±fƒ±rla
                    if (quizApp.resetGameState) {
                        try {
                            quizApp.resetGameState();
                            console.log('resetGameState ba≈üarƒ±yla √ßalƒ±≈ütƒ±');
                        } catch (error) {
                            console.error('resetGameState hatasƒ±:', error);
                        }
                    }
                    
                    console.log('Oyun durumu temizlendi (hamburger menu)');
                } else {
                    console.log('quizApp bulunamadƒ±!');
                }
                
                // T√ºm sayfalarƒ± gizle
                const elementsToHide = [
                    'category-selection',
                    'quiz',
                    'result',
                    'profile-page',
                    'online-game-options',
                    'global-leaderboard',
                    'friends-page',
                    'admin-panel'
                ];
                
                elementsToHide.forEach(id => {
                    const element = document.getElementById(id);
                    if (element) element.style.display = 'none';
                });
                
                // Ana men√ºy√º g√∂ster
                const mainMenu = document.getElementById('main-menu');
                if (mainMenu) {
                    mainMenu.style.display = 'block';
                }
                
                // Hamburger men√º ikonunu bars'a geri √ßevir
                const icon = hamburgerToggle.querySelector('i');
                if (icon) {
                    icon.classList.remove('fa-times');
                    icon.classList.add('fa-bars');
                }
                });
            } else {
                console.error('menu-home elementi bulunamadƒ±!');
            }
            
            document.getElementById('menu-profile').addEventListener('click', function() {
                hamburgerMenu.classList.remove('active');
                menuOverlay.classList.remove('active');
                
                // Profil sayfasƒ±nƒ± g√∂ster
                if (typeof quizApp !== 'undefined' && typeof quizApp.showProfilePage === 'function') {
                    quizApp.showProfilePage();
                } else {
                    // quizApp veya fonksiyon yoksa uyarƒ± g√∂ster
                    alert('Profil sayfasƒ± ≈üu anda kullanƒ±lamƒ±yor.');
                }
                
                // Hamburger men√º ikonunu bars'a geri √ßevir
                const icon = hamburgerToggle.querySelector('i');
                if (icon) {
                    icon.classList.remove('fa-times');
                    icon.classList.add('fa-bars');
                }
            });
            
            document.getElementById('menu-friends').addEventListener('click', function() {
                hamburgerMenu.classList.remove('active');
                menuOverlay.classList.remove('active');
                
                // Arkada≈ülar sayfasƒ±nƒ± g√∂ster
                if (window.friendsModule && window.friendsModule.showFriendsPage) {
                    window.friendsModule.showFriendsPage();
                }
                
                // Hamburger men√º ikonunu bars'a geri √ßevir
                const icon = hamburgerToggle.querySelector('i');
                if (icon) {
                    icon.classList.remove('fa-times');
                    icon.classList.add('fa-bars');
                }
            });
            
            document.getElementById('menu-leaderboard').addEventListener('click', function() {
                hamburgerMenu.classList.remove('active');
                menuOverlay.classList.remove('active');
                
                // Lider tablosunu g√∂ster
                if (typeof quizApp !== 'undefined' && typeof quizApp.showGlobalLeaderboard === 'function') {
                    quizApp.showGlobalLeaderboard();
                } else {
                    // quizApp veya fonksiyon yoksa
                    const globalLeaderboard = document.getElementById('global-leaderboard');
                    if (globalLeaderboard) {
                        // T√ºm sayfalarƒ± gizle
                        const elementsToHide = [
                            'main-menu',
                            'quiz',
                            'category-selection',
                            'result',
                            'profile-page',
                            'online-game-options',
                            'friends-page',
                            'admin-panel'
                        ];
                        
                        elementsToHide.forEach(id => {
                            const element = document.getElementById(id);
                            if (element) element.style.display = 'none';
                        });
                        
                        // Lider tablosunu g√∂ster
                        globalLeaderboard.style.display = 'block';
                    } else {
                        alert('Lider tablosu ≈üu anda kullanƒ±lamƒ±yor.');
                    }
                }
                
                // Hamburger men√º ikonunu bars'a geri √ßevir
                const icon = hamburgerToggle.querySelector('i');
                if (icon) {
                    icon.classList.remove('fa-times');
                    icon.classList.add('fa-bars');
                }
            });
            
            document.getElementById('menu-logout').addEventListener('click', function() {
                hamburgerMenu.classList.remove('active');
                menuOverlay.classList.remove('active');
                
                // √áƒ±kƒ±≈ü yap
                if (firebase.auth) {
                    firebase.auth().signOut().then(() => {
                        window.location.href = 'login.html';
                    });
                }
                
                // Hamburger men√º ikonunu bars'a geri √ßevir
                const icon = hamburgerToggle.querySelector('i');
                if (icon) {
                    icon.classList.remove('fa-times');
                    icon.classList.add('fa-bars');
                }
            });
            
            // Y√∂netici Paneli men√º √∂ƒüesi (sadece adminler i√ßin g√∂r√ºn√ºr)
            document.getElementById('menu-admin-panel').addEventListener('click', function() {
                hamburgerMenu.classList.remove('active');
                menuOverlay.classList.remove('active');
                
                // Y√∂netici panelini g√∂ster
                if (window.adminModule && window.adminModule.showAdminPanel) {
                    window.adminModule.showAdminPanel();
                } else {
                    // adminModule yoksa basit g√∂sterim
                    const adminPanel = document.getElementById('admin-panel');
                    if (adminPanel) {
                        // T√ºm sayfalarƒ± gizle
                        const elementsToHide = [
                            'main-menu',
                            'quiz',
                            'category-selection',
                            'result',
                            'profile-page',
                            'online-game-options',
                            'global-leaderboard',
                            'friends-page'
                        ];
                        
                        elementsToHide.forEach(id => {
                            const element = document.getElementById(id);
                            if (element) element.style.display = 'none';
                        });
                        
                        // Y√∂netici panelini g√∂ster
                        adminPanel.style.display = 'block';
                    } else {
                        alert('Y√∂netici paneli ≈üu anda kullanƒ±lamƒ±yor.');
                    }
                }
                
                // Hamburger men√º ikonunu bars'a geri √ßevir
                const icon = hamburgerToggle.querySelector('i');
                if (icon) {
                    icon.classList.remove('fa-times');
                    icon.classList.add('fa-bars');
                }
            });
            
            // Hamburger men√ºdeki tema toggle i≈ülevi
            const themeToggle = document.getElementById('checkbox');
            if (themeToggle) {
                themeToggle.addEventListener('change', function() {
                    const theme = this.checked ? 'dark' : 'light';
                    document.documentElement.setAttribute('data-theme', theme);
                    localStorage.setItem('theme', theme);
                    console.log('Tema deƒüi≈ütirildi:', theme);
                });
                
                // Sayfa y√ºklendiƒüinde kayƒ±tlƒ± temayƒ± uygula
                const savedTheme = localStorage.getItem('theme') || 'light';
                document.documentElement.setAttribute('data-theme', savedTheme);
                themeToggle.checked = savedTheme === 'dark';
            }
            
            // Hamburger men√ºdeki ses toggle i≈ülevi
            const soundToggle = document.getElementById('sound-toggle');
            if (soundToggle) {
                soundToggle.addEventListener('change', function() {
                    const soundEnabled = this.checked;
                    
                    // Hem localStorage'a hem de quizApp'e ses ayarƒ±nƒ± bildir
                    localStorage.setItem('soundEnabled', soundEnabled);
                    console.log('Ses ayarƒ± deƒüi≈ütirildi:', soundEnabled);
                    
                    // quizApp'e doƒürudan ses ayarƒ±nƒ± bildir
                    if (window.quizApp) {
                        window.quizApp.soundEnabled = soundEnabled;
                        
                        // Ayrƒ±ca kullanƒ±cƒ± ayarlarƒ±nƒ± da g√ºncelle
                        if (window.quizApp.userSettings) {
                            window.quizApp.userSettings.soundEnabled = soundEnabled;
                        }
                        
                        // Ayarlarƒ± kaydet
                        if (typeof window.quizApp.saveUserSettings === 'function') {
                            window.quizApp.saveUserSettings();
                        }
                        
                        console.log('quizApp ses ayarƒ± g√ºncellendi:', soundEnabled);
                    }
                });
                
                // Sayfa y√ºklendiƒüinde kayƒ±tlƒ± ses ayarƒ±nƒ± uygula
                // √ñnce quizApp'in ses ayarƒ±nƒ± kontrol et
                let savedSound = null;
                if (window.quizApp && typeof window.quizApp.soundEnabled !== 'undefined') {
                    savedSound = window.quizApp.soundEnabled;
                } else {
                    // quizApp hen√ºz y√ºklenmediyse localStorage'dan kontrol et
                    const localStorageSound = localStorage.getItem('soundEnabled');
                    if (localStorageSound !== null) {
                        savedSound = localStorageSound === 'true';
                    }
                }
                
                if (savedSound !== null) {
                    soundToggle.checked = savedSound;
                }
            }
            
            // Zorluk seviyesi deƒüi≈üimi
            const difficultySelect = document.getElementById('difficulty-level');
            if (difficultySelect) {
                difficultySelect.addEventListener('change', function() {
                    const difficulty = this.value;
                    localStorage.setItem('difficulty', difficulty);
                    console.log('Zorluk seviyesi deƒüi≈ütirildi:', difficulty);
                    
                    // quizApp'e zorluk ayarƒ±nƒ± bildir
                    if (window.quizApp) {
                        // userSettings objesini olu≈ütur eƒüer yoksa
                        if (!window.quizApp.userSettings) {
                            window.quizApp.userSettings = {};
                        }
                        window.quizApp.userSettings.difficulty = difficulty;
                        window.quizApp.currentDifficulty = difficulty;
                        
                        // Ayarlarƒ± kaydet
                        if (typeof window.quizApp.saveUserSettings === 'function') {
                            window.quizApp.saveUserSettings();
                        }
                        
                        console.log('quizApp zorluk ayarƒ± g√ºncellendi:', difficulty);
                    }
                    
                    // Kullanƒ±cƒ±ya bilgi ver
                    const difficultyText = {
                        'easy': 'Kolay',
                        'medium': 'Orta', 
                        'hard': 'Zor'
                    };
                    
                    // Kƒ±sa s√ºre g√∂ster
                    const notification = document.createElement('div');
                    notification.style.cssText = `
                        position: fixed;
                        top: 20px;
                        right: 20px;
                        background: #4CAF50;
                        color: white;
                        padding: 15px 20px;
                        border-radius: 8px;
                        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
                        z-index: 10000;
                        font-size: 14px;
                        font-weight: bold;
                    `;
                    notification.textContent = `Zorluk seviyesi: ${difficultyText[difficulty]}`;
                    document.body.appendChild(notification);
                    
                    setTimeout(() => {
                        if (notification.parentNode) {
                            notification.parentNode.removeChild(notification);
                        }
                    }, 2000);
                });
                
                // Sayfa y√ºklendiƒüinde kayƒ±tlƒ± zorluk seviyesini uygula
                const savedDifficulty = localStorage.getItem('difficulty') || 'medium';
                difficultySelect.value = savedDifficulty;
                console.log('Ba≈ülangƒ±√ß zorluk seviyesi:', savedDifficulty);
            }
            
            // Firebase auth state change dinleyicisi
            if (firebase.auth) {
                firebase.auth().onAuthStateChanged(function(user) {
                    const userProfileSection = document.getElementById('user-profile-section');
                    const adminPanelMenuItem = document.getElementById('menu-admin-panel');
                    
                    if (user && !user.isAnonymous) {
                        // Kullanƒ±cƒ± bilgilerini men√ºde g√∂ster
                        userProfileSection.style.display = 'flex';
                        document.getElementById('menu-user-name').textContent = user.displayName || 'Kullanƒ±cƒ±';
                        document.getElementById('menu-user-email').textContent = user.email || '';
                        
                        // quizApp'e kullanƒ±cƒ± bilgilerini aktar
                        if (window.quizApp) {
                            window.quizApp.isLoggedIn = true;
                            window.quizApp.currentUser = user;
                            console.log('QuizApp kullanƒ±cƒ± bilgileri g√ºncellendi');
                            
                            // Kullanƒ±cƒ± verilerini Firebase'den y√ºkle
                            window.quizApp.loadUserData(user.uid);
                        }
                        
                        // Kullanƒ±cƒ±yƒ± Firestore'a kaydet (varsa g√ºncelle)
                        if (firebase.firestore) {
                            firebase.firestore().collection('users').doc(user.uid).set({
                                displayName: user.displayName || '',
                                email: user.email || '',
                                createdAt: user.metadata && user.metadata.creationTime ? new Date(user.metadata.creationTime) : new Date(),
                                disabled: false,
                                displayNameLower: (user.displayName || '').toLowerCase()
                            }, { merge: true });
                        }
                        
                        // √áƒ±kƒ±≈ü √∂ƒüesini g√∂ster
                        document.getElementById('menu-logout').style.display = 'flex';
                        document.getElementById('menu-profile').style.display = 'flex';
                        
                        // Y√∂netici kontrol√º yap
                        console.log('Y√∂netici kontrol√º ba≈ülatƒ±lƒ±yor...');
                        console.log('Firebase firestore var mƒ±?', firebase.firestore ? 'Evet' : 'Hayƒ±r');
                        console.log('Kullanƒ±cƒ± ID:', user.uid);
                        console.log('Kullanƒ±cƒ± Email:', user.email);
                        
                        if (firebase.firestore) {
                            // Wet_oner@hotmail.com i√ßin √∂zel kontrol
                            if (user.email === 'wet_oner@hotmail.com') {
                                console.log('Wet_oner@hotmail.com tespit edildi - Admin paneli direkt g√∂steriliyor');
                                adminPanelMenuItem.style.display = 'flex';
                                return;
                            }
                            
                            // Birden fazla ID formatƒ±nƒ± kontrol et
                            const possibleAdminIds = [
                                user.uid, // Ger√ßek kullanƒ±cƒ± ID'si
                                user.email?.toLowerCase().replace(/[.@]/g, '_'), // E-posta temizlenmi≈ü
                                user.email?.replace(/[@.]/g, '_'), // Alternatif temizleme
                                'wet_oner_hotmail_com' // Sabit ID
                            ].filter(Boolean);
                            
                            console.log('Kontrol edilecek admin ID\'leri:', possibleAdminIds);
                            
                            // T√ºm olasƒ± ID'leri kontrol et
                            const adminChecks = possibleAdminIds.map(adminId => 
                                firebase.firestore().collection('admins').doc(adminId).get()
                            );
                            
                            Promise.all(adminChecks)
                                .then((docs) => {
                                    let isAdmin = false;
                                    
                                    docs.forEach((doc, index) => {
                                        console.log(`Admin kontrol√º [${possibleAdminIds[index]}]:`, doc.exists);
                                        if (doc.exists) {
                                            isAdmin = true;
                                            console.log('Admin dokuman verisi:', doc.data());
                                        }
                                    });
                                    
                                    if (isAdmin) {
                                        // Kullanƒ±cƒ± y√∂netici - y√∂netici paneli men√º √∂ƒüesini g√∂ster
                                        adminPanelMenuItem.style.display = 'flex';
                                        console.log('Y√∂netici kullanƒ±cƒ± tespit edildi - Admin paneli g√∂steriliyor');
                                    } else {
                                        // Normal kullanƒ±cƒ± - y√∂netici paneli men√º √∂ƒüesini gizle
                                        adminPanelMenuItem.style.display = 'none';
                                        console.log('Normal kullanƒ±cƒ± - Admin paneli gizleniyor');
                                        
                                        // Wet_oner@hotmail.com ise admin olarak ekle
                                        if (user.email === 'wet_oner@hotmail.com') {
                                            console.log('Wet_oner@hotmail.com admin olarak ekleniyor...');
                                            
                                            const adminId = user.email.toLowerCase().replace(/[.@]/g, '_');
                                            firebase.firestore().collection('admins').doc(adminId).set({
                                                email: user.email,
                                                role: 'admin',
                                                uid: user.uid,
                                                addedAt: firebase.firestore.FieldValue.serverTimestamp(),
                                                addedBy: 'auto_auth_check'
                                            }).then(() => {
                                                console.log('Admin ba≈üarƒ±yla eklendi, panel g√∂steriliyor');
                                                adminPanelMenuItem.style.display = 'flex';
                                            }).catch(err => {
                                                console.error('Admin ekleme hatasƒ±:', err);
                                            });
                                        }
                                    }
                                })
                                .catch((error) => {
                                    console.log('Y√∂netici kontrol√º yapƒ±lamadƒ±:', error);
                                    console.error('Firestore hatasƒ±:', error.code, error.message);
                                    
                                    // Hata durumunda wet_oner@hotmail.com ise paneli g√∂ster
                                    if (user.email === 'wet_oner@hotmail.com') {
                                        console.log('Hata durumunda wet_oner@hotmail.com i√ßin panel g√∂steriliyor');
                                        adminPanelMenuItem.style.display = 'flex';
                                    } else {
                                        adminPanelMenuItem.style.display = 'none';
                                    }
                                });
                        } else {
                            console.log('Firebase Firestore mevcut deƒüil!');
                            
                            // Firestore yoksa wet_oner@hotmail.com i√ßin paneli g√∂ster
                            if (user.email === 'wet_oner@hotmail.com') {
                                console.log('Firestore yok ama wet_oner@hotmail.com i√ßin panel g√∂steriliyor');
                                adminPanelMenuItem.style.display = 'flex';
                            } else {
                                adminPanelMenuItem.style.display = 'none';
                            }
                        }
                    } else {
                        // Kullanƒ±cƒ± bilgilerini gizle
                        userProfileSection.style.display = 'none';
                        
                        // quizApp'i misafir moduna ge√ßir
                        if (window.quizApp) {
                            window.quizApp.isLoggedIn = false;
                            window.quizApp.currentUser = null;
                            console.log('QuizApp misafir moduna ge√ßirildi');
                            
                            // localStorage'dan skor verilerini y√ºkle
                            window.quizApp.loadScoreFromLocalStorage();
                        }
                        
                        // √áƒ±kƒ±≈ü √∂ƒüesini gizle (giri≈ü yapmamƒ±≈ü kullanƒ±cƒ± i√ßin)
                        document.getElementById('menu-logout').style.display = 'none';
                        document.getElementById('menu-profile').style.display = 'none';
                        adminPanelMenuItem.style.display = 'none';
                    }
                });
            }
            
            // Ana men√ºye d√∂n butonu i√ßin olay dinleyici
            const backFromProfileBtn = document.getElementById('back-from-profile');
            if (backFromProfileBtn) {
                backFromProfileBtn.addEventListener('click', function() {
                    // Profil sayfasƒ±nƒ± gizle
                    const profilePage = document.getElementById('profile-page');
                    if (profilePage) profilePage.style.display = 'none';
                    
                    // Ana men√ºy√º g√∂ster
                    const mainMenu = document.getElementById('main-menu');
                    if (mainMenu) mainMenu.style.display = 'block';
                });
            }
            
            // Lider tablosundan ana men√ºye d√∂n butonu i√ßin olay dinleyici
            const backFromLeaderboardBtn = document.getElementById('back-from-leaderboard');
            if (backFromLeaderboardBtn) {
                backFromLeaderboardBtn.addEventListener('click', function() {
                    // Lider tablosunu gizle
                    const leaderboard = document.getElementById('global-leaderboard');
                    if (leaderboard) leaderboard.style.display = 'none';
                    
                    // Ana men√ºy√º g√∂ster
                    const mainMenu = document.getElementById('main-menu');
                    if (mainMenu) mainMenu.style.display = 'block';
                });
            }
            
            // Profilden √ßƒ±kƒ±≈ü yapma butonu i√ßin olay dinleyici
            const logoutFromProfileBtn = document.getElementById('logout-from-profile');
            if (logoutFromProfileBtn) {
                logoutFromProfileBtn.addEventListener('click', function() {
                    // Firebase ile √ßƒ±kƒ±≈ü yap
                    if (firebase.auth) {
                        firebase.auth().signOut().then(() => {
                            window.location.href = 'login.html';
                        }).catch(error => {
                            console.error("√áƒ±kƒ±≈ü yapƒ±lƒ±rken hata olu≈ütu:", error);
                            alert("√áƒ±kƒ±≈ü yapƒ±lƒ±rken bir hata olu≈ütu");
                        });
                    }
                });
            }
            
            // √áƒ±kƒ±≈ü butonu kaldƒ±rƒ±ldƒ±
            
            // Profil d√ºzenleme butonu i√ßin olay dinleyici
            const editProfileBtn = document.getElementById('edit-profile-btn');
            if (editProfileBtn) {
                editProfileBtn.addEventListener('click', function() {
                    alert("Profil d√ºzenleme √∂zelliƒüi yakƒ±nda eklenecek!");
                });
            }
        });
    </script>

    <script>
        // Sayfa y√ºklendiƒüinde, localStorage'da kayƒ±tlƒ± dili kontrol et ve ayarla
        document.addEventListener('DOMContentLoaded', function() {
            // Dil se√ßimi i≈üleminin quizApp y√ºklendikten sonra yapƒ±lmasƒ±nƒ± saƒüla
            setTimeout(function() {
                if (window.quizApp && window.quizApp.currentLanguage) {
                    
                    // HTML lang √∂zelliƒüini g√ºncelle
                    document.documentElement.setAttribute('lang', window.quizApp.currentLanguage);
                    document.documentElement.setAttribute('data-language', window.quizApp.currentLanguage);
                    
                    // UI'ƒ± g√ºncelle
                    if (typeof window.quizApp.updateUITexts === 'function') {
                        window.quizApp.updateUITexts();
                    }
                    
                    // Ses toggle'ƒ± quizApp'in ses durumuna g√∂re g√ºncelle
                    const soundToggle = document.getElementById('sound-toggle');
                    if (soundToggle && typeof window.quizApp.soundEnabled !== 'undefined') {
                        soundToggle.checked = window.quizApp.soundEnabled;
                        console.log('Ses toggle quizApp durumuna g√∂re g√ºncellendi:', window.quizApp.soundEnabled);
                    }
                }
            }, 500); // quizApp'in y√ºklenmesi i√ßin biraz bekle
        });
    </script>

    <!-- Joker Maƒüazasƒ± Modal -->
    <div id="joker-store-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-store"></i> Joker Maƒüazasƒ±</h2>
                <span class="close-modal">&times;</span>
            </div>
            <div class="modal-body">
                <div class="joker-store-points">
                    <i class="fas fa-coins"></i> Puanƒ±nƒ±z: <span id="joker-store-points-display">0</span>
                </div>
                <div class="joker-store-items">
                    <div class="joker-store-item" data-joker="fifty" data-price="10">
                        <div class="joker-icon"><i class="fas fa-star-half-alt"></i></div>
                        <div class="joker-info">
                            <h3>50:50 Joker</h3>
                            <p>ƒ∞ki yanlƒ±≈ü ≈üƒ±kkƒ± eleme</p>
                            <div class="joker-price">10 <i class="fas fa-coins"></i></div>
                        </div>
                        <div class="joker-count">Sahip olduƒüunuz: <span class="joker-owned-count">0</span></div>
                        <button class="joker-buy-btn">Satƒ±n Al</button>
                    </div>
                    <div class="joker-store-item" data-joker="hint" data-price="15">
                        <div class="joker-icon"><i class="fas fa-lightbulb"></i></div>
                        <div class="joker-info">
                            <h3>ƒ∞pucu Joker</h3>
                            <p>Doƒüru cevap hakkƒ±nda ipucu al</p>
                            <div class="joker-price">15 <i class="fas fa-coins"></i></div>
                        </div>
                        <div class="joker-count">Sahip olduƒüunuz: <span class="joker-owned-count">0</span></div>
                        <button class="joker-buy-btn">Satƒ±n Al</button>
                    </div>
                    <div class="joker-store-item" data-joker="time" data-price="20">
                        <div class="joker-icon"><i class="fas fa-clock"></i></div>
                        <div class="joker-info">
                            <h3>S√ºre Joker</h3>
                            <p>Bu soru i√ßin 15 saniye ekle</p>
                            <div class="joker-price">20 <i class="fas fa-coins"></i></div>
                        </div>
                        <div class="joker-count">Sahip olduƒüunuz: <span class="joker-owned-count">0</span></div>
                        <button class="joker-buy-btn">Satƒ±n Al</button>
                    </div>
                    <div class="joker-store-item" data-joker="skip" data-price="25">
                        <div class="joker-icon"><i class="fas fa-forward"></i></div>
                        <div class="joker-info">
                            <h3>Pas Joker</h3>
                            <p>Bu soruyu pas ge√ß ve can kaybetme</p>
                            <div class="joker-price">25 <i class="fas fa-coins"></i></div>
                        </div>
                        <div class="joker-count">Sahip olduƒüunuz: <span class="joker-owned-count">0</span></div>
                        <button class="joker-buy-btn">Satƒ±n Al</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Chat Kurallarƒ± Modal -->
    <div id="chat-rules-modal" class="chat-rules-modal">
        <div class="chat-rules-content">
            <div class="chat-rules-header">
                <h3><i class="fas fa-comments"></i> Sohbet Kurallarƒ± ve Gizlilik Bildirimi</h3>
                <button id="close-chat-rules" class="chat-rules-close">&times;</button>
            </div>
            <div class="chat-rules-body">
                <h4>Ki≈üisel Veri ve KVKK/GDPR Bildirimi</h4>
                <p>Bu uygulamada g√∂nderdiƒüiniz mesajlar, 6698 sayƒ±lƒ± Ki≈üisel Verilerin Korunmasƒ± Kanunu (KVKK) ve AB Genel Veri Koruma Y√∂netmeliƒüi (GDPR) kapsamƒ±nda ki≈üisel veri olarak deƒüerlendirilmektedir.</p>
                
                <h4>Veri Saklama Politikasƒ±</h4>
                <ul>
                    <li>Mesajlarƒ±nƒ±z, oyun tamamlandƒ±ktan sonra en fazla 30 g√ºn s√ºreyle saklanabilir.</li>
                    <li>Mesajlarƒ±nƒ±z, g√ºvenli sunucularda ≈üifrelenmi≈ü olarak saklanmaktadƒ±r.</li>
                    <li>Mesajlarƒ±n i√ßeriƒüi, yalnƒ±zca yasal zorunluluklar olmasƒ± halinde yetkili mercilerle payla≈üƒ±labilir.</li>
                </ul>
                
                <h4>Uyulmasƒ± Gereken Kurallar</h4>
                <ul>
                    <li>Ki≈üisel bilgilerinizi (isim, adres, telefon, e-posta vb.) sohbet kƒ±smƒ±nda payla≈ümayƒ±nƒ±z.</li>
                    <li>Hakaret, k√ºf√ºr ve uygunsuz i√ßerikler payla≈üƒ±lmasƒ± yasaktƒ±r.</li>
                    <li>Irk√ßƒ±, cinsiyet√ßi, ayrƒ±mcƒ± ve nefret s√∂ylemi i√ßeren mesajlar g√∂ndermek yasaktƒ±r.</li>
                    <li>Diƒüer oyuncularƒ± rahatsƒ±z edici davranƒ±≈ülarda bulunmak yasaktƒ±r.</li>
                    <li>Yasadƒ±≈üƒ± faaliyetleri te≈üvik eden mesajlar g√∂ndermek yasaktƒ±r.</li>
                </ul>
                
                <h4>Kural ƒ∞hlalleri ve Sonu√ßlarƒ±</h4>
                <p>Kurallara uymayan mesajlar, diƒüer kullanƒ±cƒ±lar tarafƒ±ndan bildirilebilir ve gerekli durumda ≈üu i≈ülemler uygulanabilir:</p>
                <ul>
                    <li>Mesajƒ±n kaldƒ±rƒ±lmasƒ±</li>
                    <li>Ge√ßici olarak sohbet √∂zelliƒüinin engellenmesi</li>
                    <li>Hesabƒ±n kalƒ±cƒ± olarak engellenmesi</li>
                    <li>Gerekli durumlarda yasal yollara ba≈üvurulmasƒ±</li>
                </ul>
                
                <h4>Haklarƒ±nƒ±z</h4>
                <p>KVKK ve GDPR kapsamƒ±nda, ki≈üisel verilerinize ili≈ükin ≈üu haklara sahipsiniz:</p>
                <ul>
                    <li>Ki≈üisel verilerinizin i≈ülenip i≈ülenmediƒüini √∂ƒürenme</li>
                    <li>Ki≈üisel verileriniz i≈ülenmi≈üse buna ili≈ükin bilgi talep etme</li>
                    <li>Ki≈üisel verilerinizin silinmesini veya yok edilmesini isteme</li>
                </ul>
                <p>Bu haklarƒ±nƒ±zƒ± kullanmak i√ßin <a href="mailto:contact@example.com">contact@example.com</a> adresine e-posta g√∂nderebilirsiniz.</p>
            </div>
            <div class="chat-rules-footer">
                <button id="accept-rules-btn">Anladƒ±m ve Kabul Ediyorum</button>
            </div>
        </div>
    </div>

    <!-- Y√∂netici Paneli -->
    <div id="admin-panel" class="admin-panel" style="display: none;">
        <div class="admin-panel-header">
            <h2><i class="fas fa-shield-alt"></i> Y√∂netici Paneli</h2>
            <button id="close-admin-panel" class="close-btn"><i class="fas fa-times"></i></button>
        </div>
        
        <div class="admin-tabs">
            <button class="admin-tab-btn active" data-tab="dashboard">Dashboard</button>
            <button class="admin-tab-btn" data-tab="users">Kullanƒ±cƒ±lar</button>
            <button class="admin-tab-btn" data-tab="questions">Sorular</button>
            <button class="admin-tab-btn" data-tab="pending-questions">Bekleyen Sorular</button>
            <button class="admin-tab-btn" data-tab="reports">≈ûikayetler</button>
            <button class="admin-tab-btn" data-tab="settings">Ayarlar</button>
        </div>
        
        <div class="admin-content">
            <!-- Kontrol Paneli -->
            <div id="admin-dashboard" class="admin-tab-content active">
                <div class="admin-stats-cards">
                    <div class="admin-stat-card">
                        <div class="stat-icon"><i class="fas fa-users"></i></div>
                        <div class="stat-value" id="admin-total-users">0</div>
                        <div class="stat-label">Toplam Kullanƒ±cƒ±</div>
                    </div>
                    <div class="admin-stat-card">
                        <div class="stat-icon"><i class="fas fa-question-circle"></i></div>
                        <div class="stat-value" id="admin-total-questions">0</div>
                        <div class="stat-label">Toplam Soru</div>
                    </div>
                    <div class="admin-stat-card">
                        <div class="stat-icon"><i class="fas fa-gamepad"></i></div>
                        <div class="stat-value" id="admin-total-games">0</div>
                        <div class="stat-label">Toplam Oyun</div>
                    </div>
                    <div class="admin-stat-card">
                        <div class="stat-icon"><i class="fas fa-exclamation-triangle"></i></div>
                        <div class="stat-value" id="admin-pending-reports">0</div>
                        <div class="stat-label">Bekleyen ≈ûikayet</div>
                    </div>
                </div>
                
                <div class="admin-recent-activity">
                    <h3>Son Aktiviteler</h3>
                    <div class="admin-activity-list" id="admin-activity-list">
                        <!-- Aktiviteler buraya y√ºklenecek -->
                    </div>
                </div>
            </div>
            
            <!-- Kullanƒ±cƒ±lar -->
            <div id="admin-users" class="admin-tab-content">
                <div class="admin-search-box">
                    <input type="text" id="admin-user-search" placeholder="Kullanƒ±cƒ± ara...">
                    <button id="admin-user-search-btn" class="admin-btn-secondary"><i class="fas fa-search"></i></button>
                </div>
                
                <table class="admin-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Kullanƒ±cƒ± Adƒ±</th>
                            <th>E-posta</th>
                            <th>Kayƒ±t Tarihi</th>
                            <th>Durum</th>
                            <th>ƒ∞≈ülemler</th>
                        </tr>
                    </thead>
                    <tbody id="admin-users-list">
                        <!-- Kullanƒ±cƒ±lar burada listelenecek -->
                    </tbody>
                </table>
                
                <div class="admin-pagination">
                    <button id="admin-prev-page" class="admin-btn-secondary"><i class="fas fa-chevron-left"></i></button>
                    <span id="admin-current-page">Sayfa 1</span>
                    <button id="admin-next-page" class="admin-btn-secondary"><i class="fas fa-chevron-right"></i></button>
                </div>
            </div>
            
            <!-- Sorular -->
            <div id="admin-questions" class="admin-tab-content">
                <div class="admin-actions">
                    <button id="admin-add-question" class="admin-action-btn"><i class="fas fa-plus"></i> Yeni Soru Ekle</button>
                    <button id="admin-import-questions" class="admin-action-btn"><i class="fas fa-file-import"></i> ƒ∞√ße Aktar</button>
                    <button id="admin-export-questions" class="admin-action-btn"><i class="fas fa-file-export"></i> Dƒ±≈üa Aktar</button>
                </div>
                
                <div class="admin-search-box">
                    <select id="admin-question-category">
                        <option value="all">T√ºm Kategoriler</option>
                    </select>
                    <input type="text" id="admin-question-search" placeholder="Soru ara...">
                    <button id="admin-question-search-btn" class="admin-btn-secondary"><i class="fas fa-search"></i></button>
                </div>
                
                <table class="admin-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Soru</th>
                            <th>Kategori</th>
                            <th>Zorluk</th>
                            <th>Ekleyen</th>
                            <th>ƒ∞≈ülemler</th>
                        </tr>
                    </thead>
                    <tbody id="admin-questions-list">
                        <!-- Sorular buraya y√ºklenecek -->
                    </tbody>
                </table>
                
                <div class="admin-pagination">
                    <button id="admin-prev-question-page" class="admin-btn-secondary"><i class="fas fa-chevron-left"></i></button>
                    <span id="admin-current-question-page">Sayfa 1</span>
                    <button id="admin-next-question-page" class="admin-btn-secondary"><i class="fas fa-chevron-right"></i></button>
                </div>
            </div>
            
            <!-- Bekleyen Sorular -->
            <div id="admin-pending-questions" class="admin-tab-content">
                <div class="admin-tab-header">
                    <h3>Bekleyen Sorular</h3>
                    <div class="admin-filter">
                        <button id="admin-refresh-pending" class="admin-btn-secondary">
                            <i class="fas fa-sync-alt"></i> Yenile
                        </button>
                    </div>
                </div>
                
                <div id="admin-pending-questions-list" class="admin-pending-questions-list">
                    <!-- Bekleyen sorular burada listelenecek -->
                </div>
            </div>
            
            <!-- ≈ûikayetler -->
            <div id="admin-reports" class="admin-tab-content">
                <div class="admin-tab-header">
                    <h3>≈ûikayet Y√∂netimi</h3>
                    <div class="admin-filter">
                        <label for="admin-report-filter">Filtrele:</label>
                        <select id="admin-report-filter">
                            <option value="all">T√ºm√º</option>
                            <option value="pending">Bekleyen</option>
                            <option value="resolved">√á√∂z√ºlm√º≈ü</option>
                            <option value="rejected">Reddedilmi≈ü</option>
                        </select>
                    </div>
                </div>
                
                <div id="admin-reports-list" class="admin-reports-list">
                    <!-- ≈ûikayetler burada listelenecek -->
                </div>
            </div>
            
            <!-- Ayarlar -->
            <div id="admin-settings" class="admin-tab-content">
                <div class="admin-settings-section">
                    <h3>Genel Ayarlar</h3>
                    <div class="admin-setting-item">
                        <label for="admin-maintenance-mode">Bakƒ±m Modu:</label>
                        <label class="admin-toggle">
                            <input type="checkbox" id="admin-maintenance-mode">
                            <span class="admin-toggle-slider"></span>
                        </label>
                    </div>
                    
                    <div class="admin-setting-item">
                        <label for="admin-allow-registrations">Yeni Kayƒ±tlara ƒ∞zin Ver:</label>
                        <label class="admin-toggle">
                            <input type="checkbox" id="admin-allow-registrations" checked>
                            <span class="admin-toggle-slider"></span>
                        </label>
                    </div>
                    
                    <div class="admin-setting-item">
                        <label for="admin-question-approval">Soru Onayƒ± Gerekli:</label>
                        <label class="admin-toggle">
                            <input type="checkbox" id="admin-question-approval" checked>
                            <span class="admin-toggle-slider"></span>
                        </label>
                    </div>
                    
                    <div class="admin-setting-item">
                        <label for="admin-max-failed-login">Maksimum Ba≈üarƒ±sƒ±z Giri≈ü:</label>
                        <input type="number" id="admin-max-failed-login" value="5" min="1" max="10">
                    </div>
                </div>
                
                <div class="admin-settings-section">
                    <h3>E-posta Bildirimleri</h3>
                    <div class="admin-setting-item">
                        <label for="admin-email-new-user">Yeni Kullanƒ±cƒ± Kaydƒ±:</label>
                        <label class="admin-toggle">
                            <input type="checkbox" id="admin-email-new-user" checked>
                            <span class="admin-toggle-slider"></span>
                        </label>
                    </div>
                    
                    <div class="admin-setting-item">
                        <label for="admin-email-new-report">Yeni ≈ûikayet:</label>
                        <label class="admin-toggle">
                            <input type="checkbox" id="admin-email-new-report" checked>
                            <span class="admin-toggle-slider"></span>
                        </label>
                    </div>
                </div>
                
                <div class="admin-settings-actions">
                    <button id="admin-save-settings" class="admin-btn-primary">Ayarlarƒ± Kaydet</button>
                    <button id="admin-reset-settings" class="admin-btn-secondary">Varsayƒ±lana Sƒ±fƒ±rla</button>
                    <button id="admin-export-settings" class="admin-btn-secondary" onclick="exportSettings()" style="background: #17a2b8;">
                        <i class="fas fa-download"></i> Dƒ±≈üa Aktar
                    </button>
                    <button id="admin-import-settings" class="admin-btn-secondary" onclick="importSettings()" style="background: #6f42c1;">
                        <i class="fas fa-upload"></i> ƒ∞√ße Aktar
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-XXXXXXXXXXXXXXXX"
     crossorigin="anonymous"></script>
    
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=GA_MEASUREMENT_ID"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'GA_MEASUREMENT_ID');
    </script>
    
    <!-- Meta Pixel -->
    <script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};
    if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
    n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];
    s.parentNode.insertBefore(t,s)}(window, document,'script',
    'https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', 'YOUR_PIXEL_ID');
    fbq('track', 'PageView');
    </script>
    <noscript><img height="1" width="1" style="display:none"
    src="https://www.facebook.com/tr?id=YOUR_PIXEL_ID&ev=PageView&noscript=1"
    /></noscript>

    <script>
        // Manuel admin panel g√∂sterme fonksiyonu (debugging i√ßin)
        window.showAdminPanelManual = function() {
            const adminPanelMenuItem = document.getElementById('menu-admin-panel');
            if (adminPanelMenuItem) {
                adminPanelMenuItem.style.display = 'flex';
                console.log('Admin panel manuel olarak g√∂sterildi');
            } else {
                console.error('Admin panel men√º √∂ƒüesi bulunamadƒ±!');
            }
        };
        
        // Admin koleksiyonuna kullanƒ±cƒ± ekleme fonksiyonu (debugging i√ßin)
        window.addUserToAdmins = function(userId) {
            if (!userId && firebase.auth && firebase.auth().currentUser) {
                userId = firebase.auth().currentUser.uid;
            }
            
            if (!userId) {
                console.error('Kullanƒ±cƒ± ID belirtilmedi ve aktif kullanƒ±cƒ± bulunamadƒ±');
                return;
            }
            
            if (firebase.firestore) {
                firebase.firestore().collection('admins').doc(userId).set({
                    email: firebase.auth().currentUser ? firebase.auth().currentUser.email : 'test@admin.com',
                    role: 'admin',
                    addedAt: firebase.firestore.FieldValue.serverTimestamp()
                }).then(() => {
                    console.log('Kullanƒ±cƒ± admin koleksiyonuna eklendi:', userId);
                    alert('Admin yetkisi verildi! Sayfayƒ± yenileyin.');
                }).catch((error) => {
                    console.error('Admin ekleme hatasƒ±:', error);
                    alert('Admin ekleme ba≈üarƒ±sƒ±z: ' + error.message);
                });
            } else {
                console.error('Firestore mevcut deƒüil!');
            }
        };
        
        // E-posta adresiyle kullanƒ±cƒ±yƒ± admin yapma fonksiyonu
        window.addUserToAdminsByEmail = function(email) {
            if (!email) {
                console.error('E-posta adresi belirtilmedi');
                return;
            }
            
            if (!firebase.firestore) {
                console.error('Firestore mevcut deƒüil!');
                return;
            }
            
            console.log('E-posta adresiyle kullanƒ±cƒ± aranƒ±yor:', email);
            
            // Kullanƒ±cƒ±larƒ± e-posta adresine g√∂re ara
            firebase.firestore().collection('users').where('email', '==', email).get()
                .then((querySnapshot) => {
                    if (querySnapshot.empty) {
                        console.log('Bu e-posta adresiyle kullanƒ±cƒ± bulunamadƒ±:', email);
                        
                        // Alternatif olarak direkt e-posta ile admin koleksiyonuna ekle
                        const adminId = email.replace(/[.@]/g, '_'); // E-posta adresini ID'ye √ßevir
                        
                        return firebase.firestore().collection('admins').doc(adminId).set({
                            email: email,
                            role: 'admin',
                            addedAt: firebase.firestore.FieldValue.serverTimestamp(),
                            addedBy: 'manual',
                            note: 'E-posta adresi ile manuel olarak eklendi'
                        });
                    } else {
                        // Kullanƒ±cƒ± bulundu, admin koleksiyonuna ekle
                        const userDoc = querySnapshot.docs[0];
                        const userData = userDoc.data();
                        const userId = userDoc.id;
                        
                        console.log('Kullanƒ±cƒ± bulundu:', userData);
                        
                        return firebase.firestore().collection('admins').doc(userId).set({
                            email: email,
                            role: 'admin',
                            displayName: userData.displayName || userData.name || 'Admin',
                            addedAt: firebase.firestore.FieldValue.serverTimestamp(),
                            addedBy: 'manual'
                        });
                    }
                })
                .then(() => {
                    console.log('Kullanƒ±cƒ± admin koleksiyonuna eklendi:', email);
                    alert('Admin yetkisi verildi: ' + email + '\nSayfayƒ± yenileyin.');
                })
                .catch((error) => {
                    console.error('Admin ekleme hatasƒ±:', error);
                    
                    // Hata durumunda alternatif y√∂ntem - direkt UID ile ekle
                    console.log('Alternatif y√∂ntem deneniyor...');
                    
                    // E-posta adresini temizle ve UID benzeri string olu≈ütur
                    const cleanEmail = email.toLowerCase().replace(/[.@]/g, '_');
                    
                    firebase.firestore().collection('admins').doc(cleanEmail).set({
                        email: email,
                        role: 'admin',
                        addedAt: firebase.firestore.FieldValue.serverTimestamp(),
                        addedBy: 'manual_fallback',
                        note: 'E-posta adresi ile fallback y√∂ntemiyle eklendi'
                    }).then(() => {
                        console.log('Kullanƒ±cƒ± fallback y√∂ntemiyle admin yapƒ±ldƒ±:', email);
                        alert('Admin yetkisi verildi (alternatif y√∂ntem): ' + email);
                    }).catch((fallbackError) => {
                        console.error('Fallback admin ekleme hatasƒ±:', fallbackError);
                        alert('Admin ekleme ba≈üarƒ±sƒ±z: ' + fallbackError.message);
                    });
                });
        };
        
        // Wet_oner@hotmail.com adresini admin yap
        window.makeWetOnerAdmin = function() {
            addUserToAdminsByEmail('wet_oner@hotmail.com');
        };
        
        // Sayfa y√ºklendiƒüinde otomatik admin kontrol√º ve ekleme
        document.addEventListener('DOMContentLoaded', function() {
            // Firebase y√ºklendikten sonra admin kontrol√º yap
            setTimeout(function() {
                if (firebase.firestore) {
                    console.log('Otomatik admin kontrol√º ba≈ülatƒ±lƒ±yor...');
                    
                    // √ñnce wet_oner@hotmail.com'un admin olup olmadƒ±ƒüƒ±nƒ± kontrol et
                    const adminEmails = ['wet_oner@hotmail.com'];
                    
                    adminEmails.forEach(email => {
                        const cleanEmail = email.toLowerCase().replace(/[.@]/g, '_');
                        
                        firebase.firestore().collection('admins').doc(cleanEmail).get()
                            .then((doc) => {
                                if (!doc.exists) {
                                    console.log('Admin kaydƒ± bulunamadƒ±, ekleniyor:', email);
                                    
                                    // Admin olarak ekle
                                    return firebase.firestore().collection('admins').doc(cleanEmail).set({
                                        email: email,
                                        role: 'admin',
                                        addedAt: firebase.firestore.FieldValue.serverTimestamp(),
                                        addedBy: 'auto_setup',
                                        displayName: 'Admin',
                                        note: 'Otomatik olarak eklendi'
                                    });
                                } else {
                                    console.log('Admin kaydƒ± zaten mevcut:', email);
                                    return Promise.resolve();
                                }
                            })
                            .then(() => {
                                console.log('Admin kontrol√º tamamlandƒ±:', email);
                                
                                // Eƒüer mevcut kullanƒ±cƒ± bu e-posta adresiyse, admin panelini hemen g√∂ster
                                if (firebase.auth().currentUser && 
                                    firebase.auth().currentUser.email === email) {
                                    
                                    setTimeout(() => {
                                        const adminPanelMenuItem = document.getElementById('menu-admin-panel');
                                        if (adminPanelMenuItem) {
                                            adminPanelMenuItem.style.display = 'flex';
                                            console.log('Admin paneli otomatik olarak g√∂sterildi');
                                        }
                                    }, 1000);
                                }
                            })
                            .catch((error) => {
                                console.error('Otomatik admin ekleme hatasƒ±:', error);
                                
                                // Alternatif ID ile dene
                                const altId = email.replace(/[@.]/g, '_');
                                firebase.firestore().collection('admins').doc(altId).set({
                                    email: email,
                                    role: 'admin',
                                    addedAt: firebase.firestore.FieldValue.serverTimestamp(),
                                    addedBy: 'auto_setup_fallback'
                                }).then(() => {
                                    console.log('Admin fallback y√∂ntemiyle eklendi:', email);
                                }).catch(err => {
                                    console.error('Fallback admin ekleme hatasƒ±:', err);
                                });
                            });
                    });
                } else {
                    console.log('Firebase Firestore hen√ºz hazƒ±r deƒüil, tekrar denenecek...');
                    
                    // Firebase hazƒ±r deƒüilse 2 saniye sonra tekrar dene
                    setTimeout(arguments.callee, 2000);
                }
            }, 2000); // Sayfa y√ºklendikten 2 saniye sonra kontrol et
        });
        
        // Wet_oner@hotmail.com i√ßin zorla admin paneli g√∂ster
        window.forceShowAdminPanel = function() {
            const adminPanelMenuItem = document.getElementById('menu-admin-panel');
            if (adminPanelMenuItem) {
                adminPanelMenuItem.style.display = 'flex';
                adminPanelMenuItem.style.visibility = 'visible';
                adminPanelMenuItem.style.opacity = '1';
                console.log('Admin panel zorla g√∂sterildi');
                
                // Ayrƒ±ca element'i DOM'da en √ºste ta≈üƒ±
                const menuSection = adminPanelMenuItem.parentElement;
                if (menuSection) {
                    menuSection.appendChild(adminPanelMenuItem);
                }
                
                alert('Admin panel zorla g√∂sterildi! Hamburger men√ºs√ºn√º kontrol edin.');
            } else {
                console.error('Admin panel men√º √∂ƒüesi bulunamadƒ±!');
                alert('Admin panel elementi bulunamadƒ±!');
            }
        };
        
        // Sayfa y√ºklendiƒüinde wet_oner@hotmail.com kontrol√º
        window.checkCurrentUserForAdmin = function() {
            if (firebase.auth && firebase.auth().currentUser) {
                const user = firebase.auth().currentUser;
                console.log('Mevcut kullanƒ±cƒ± kontrol√º:', user.email);
                
                if (user.email === 'wet_oner@hotmail.com') {
                    console.log('Wet_oner@hotmail.com tespit edildi, admin panel g√∂steriliyor');
                    const adminPanelMenuItem = document.getElementById('menu-admin-panel');
                    if (adminPanelMenuItem) {
                        adminPanelMenuItem.style.display = 'flex';
                        console.log('Admin panel ba≈üarƒ±yla g√∂sterildi');
                    }
                }
            } else {
                console.log('Hen√ºz giri≈ü yapƒ±lmamƒ±≈ü');
            }
        };
        
        // Admin Panel ƒ∞≈ülevleri
        document.addEventListener('DOMContentLoaded', function() {
            // Admin panel initialization
            initializeAdminPanel();
            
            // Admin panel kapatma
            const closeAdminPanel = document.getElementById('close-admin-panel');
            if (closeAdminPanel) {
                closeAdminPanel.addEventListener('click', function() {
                    const adminPanel = document.getElementById('admin-panel');
                    if (adminPanel) {
                        adminPanel.style.display = 'none';
                    }
                    
                    // Ana men√ºy√º g√∂ster
                    const mainMenu = document.getElementById('main-menu');
                    if (mainMenu) {
                        mainMenu.style.display = 'block';
                    }
                });
            }

            // Admin tab switching
            const adminTabBtns = document.querySelectorAll('.admin-tab-btn');
            const adminTabContents = document.querySelectorAll('.admin-tab-content');

            adminTabBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const tabName = this.getAttribute('data-tab');
                    
                    // Remove active class from all tabs and contents
                    adminTabBtns.forEach(b => b.classList.remove('active'));
                    adminTabContents.forEach(c => c.classList.remove('active'));
                    
                    // Add active class to clicked tab and corresponding content
                    this.classList.add('active');
                    const targetContent = document.getElementById(`admin-${tabName}`);
                    if (targetContent) {
                        targetContent.classList.add('active');
                    }
                    
                    // Load content based on tab
                    loadAdminTabContent(tabName);
                });
            });

            // Soru ekle butonlarƒ±
            const showStatsBtn = document.getElementById('show-stats');
            const addQuestionBtn = document.getElementById('add-question-button');
            const addQuestionModal = document.getElementById('add-question-form');
            const closeModalBtn = addQuestionModal?.querySelector('.close');

            // ƒ∞statistikler butonu
            if (showStatsBtn) {
                showStatsBtn.addEventListener('click', function() {
                    showStatistics();
                });
            }

            // Soru ekle butonu
            if (addQuestionBtn) {
                addQuestionBtn.addEventListener('click', function() {
                    if (addQuestionModal) {
                        addQuestionModal.style.display = 'block';
                    }
                });
            }

            // Modal kapatma
            if (closeModalBtn) {
                closeModalBtn.addEventListener('click', function() {
                    addQuestionModal.style.display = 'none';
                });
            }

            // Modal dƒ±≈üƒ±na tƒ±klayƒ±nca kapat
            if (addQuestionModal) {
                addQuestionModal.addEventListener('click', function(e) {
                    if (e.target === addQuestionModal) {
                        addQuestionModal.style.display = 'none';
                    }
                });
            }

            // Soru ekleme formu
            const questionForm = document.getElementById('question-form');
            if (questionForm) {
                questionForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    submitNewQuestion();
                });
            }

            // Yenile butonu i√ßin olay dinleyici
            const refreshPendingBtn = document.getElementById('admin-refresh-pending');
            if (refreshPendingBtn) {
                refreshPendingBtn.addEventListener('click', function() {
                    console.log('Bekleyen sorular yenileniyor...');
                    loadPendingQuestionsData();
                });
            }

            // Kullanƒ±cƒ± arama butonlarƒ± i√ßin olay dinleyici
            const userSearchBtn = document.getElementById('admin-user-search-btn');
            const userSearchInput = document.getElementById('admin-user-search');
            if (userSearchBtn && userSearchInput) {
                userSearchBtn.addEventListener('click', function() {
                    searchUsers();
                });
                
                userSearchInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        searchUsers();
                    }
                });
            }

            // ≈ûikayet filtresi i√ßin olay dinleyici
            const reportFilter = document.getElementById('admin-report-filter');
            if (reportFilter) {
                reportFilter.addEventListener('change', function() {
                    loadReportsData(); // Filtre deƒüi≈ütiƒüinde verileri yeniden y√ºkle
                });
            }

            // Ayarlar butonlarƒ± i√ßin olay dinleyiciler
            const saveSettingsBtn = document.getElementById('admin-save-settings');
            const resetSettingsBtn = document.getElementById('admin-reset-settings');
            
            if (saveSettingsBtn) {
                saveSettingsBtn.addEventListener('click', function() {
                    saveAdminSettings();
                });
            }
            
            if (resetSettingsBtn) {
                resetSettingsBtn.addEventListener('click', function() {
                    resetAdminSettings();
                });
            }

            // Ayar deƒüi≈üikliklerini takip etmek i√ßin
            setupSettingsChangeTracking();

            // SORULAR Y√ñNETƒ∞Mƒ∞ EVENT Lƒ∞STENER'LARI
            // Yeni soru ekle butonu
            const adminAddQuestionBtn = document.getElementById('admin-add-question');
            if (adminAddQuestionBtn) {
                adminAddQuestionBtn.addEventListener('click', function() {
                    showAddQuestionModal();
                });
            }

            // Sorularƒ± i√ße aktar butonu
            const adminImportQuestionsBtn = document.getElementById('admin-import-questions');
            if (adminImportQuestionsBtn) {
                adminImportQuestionsBtn.addEventListener('click', function() {
                    importQuestions();
                });
            }

            // Sorularƒ± dƒ±≈üa aktar butonu
            const adminExportQuestionsBtn = document.getElementById('admin-export-questions');
            if (adminExportQuestionsBtn) {
                adminExportQuestionsBtn.addEventListener('click', function() {
                    exportQuestions();
                });
            }

            // Soru arama butonu ve enter tu≈üu
            const adminQuestionSearchBtn = document.getElementById('admin-question-search-btn');
            const adminQuestionSearchInput = document.getElementById('admin-question-search');
            const adminQuestionCategorySelect = document.getElementById('admin-question-category');
            
            if (adminQuestionSearchBtn) {
                adminQuestionSearchBtn.addEventListener('click', function() {
                    searchQuestions();
                });
            }
            
            if (adminQuestionSearchInput) {
                adminQuestionSearchInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        searchQuestions();
                    }
                });
            }

            if (adminQuestionCategorySelect) {
                adminQuestionCategorySelect.addEventListener('change', function() {
                    searchQuestions();
                });
            }

            // Sorular sayfalama butonlarƒ±
            const adminPrevQuestionPageBtn = document.getElementById('admin-prev-question-page');
            const adminNextQuestionPageBtn = document.getElementById('admin-next-question-page');
            
            if (adminPrevQuestionPageBtn) {
                adminPrevQuestionPageBtn.addEventListener('click', function() {
                    if (currentQuestionsPage > 1) {
                        currentQuestionsPage--;
                        displayQuestions();
                    }
                });
            }
            
            if (adminNextQuestionPageBtn) {
                adminNextQuestionPageBtn.addEventListener('click', function() {
                    const totalPages = Math.ceil(filteredQuestions.length / questionsPerPage);
                    if (currentQuestionsPage < totalPages) {
                        currentQuestionsPage++;
                        displayQuestions();
                    }
                });
            }
        });

        // Admin panel ba≈ülatma fonksiyonu
        function initializeAdminPanel() {
            // Admin panel deƒüi≈ükenlerini ba≈ülat
            currentUserPage = 1;
            currentQuestionPage = 1;
            allUsers = [];
            allQuestions = [];
            filteredUsers = [];
            filteredQuestions = [];
            
            console.log('Admin panel ba≈ülatƒ±ldƒ±');
        }

        // Admin tab i√ßerik y√ºkleme fonksiyonu
        function loadAdminTabContent(tabName) {
            console.log('Loading admin tab content:', tabName);
            
            switch(tabName) {
                case 'dashboard':
                    loadDashboardData();
                    break;
                case 'users':
                    loadUsersData();
                    break;
                case 'questions':
                    loadQuestionsData();
                    break;
                case 'pending-questions':
                    loadPendingQuestionsData();
                    break;
                case 'reports':
                    loadReportsData();
                    break;
                case 'settings':
                    loadSettingsData();
                    break;
            }
        }

        // Dashboard verilerini y√ºkle
        function loadDashboardData() {
            console.log('Dashboard verileri y√ºkleniyor...');
            
            if (firebase.firestore) {
                // Firebase'den ger√ßek verileri al
                Promise.all([
                    firebase.firestore().collection('users').get(),
                    firebase.firestore().collection('questions').get(),
                    firebase.firestore().collection('adminQuestions').get(),
                    firebase.firestore().collection('pending-questions').where('status', '==', 'pending').get(),
                    firebase.firestore().collection('reports').where('status', '==', 'pending').get(),
                    firebase.firestore().collection('game-sessions').get()
                ]).then(([usersSnapshot, questionsSnapshot, adminQuestionsSnapshot, pendingSnapshot, reportsSnapshot, gamesSnapshot]) => {
                    
                    // ƒ∞statistikleri g√ºncelle
                    const totalQuestions = questionsSnapshot.size + adminQuestionsSnapshot.size;
                    
                    document.getElementById('admin-total-users').textContent = usersSnapshot.size.toLocaleString('tr-TR');
                    document.getElementById('admin-total-questions').textContent = totalQuestions.toLocaleString('tr-TR');
                    document.getElementById('admin-total-games').textContent = gamesSnapshot.size.toLocaleString('tr-TR');
                    document.getElementById('admin-pending-reports').textContent = reportsSnapshot.size.toLocaleString('tr-TR');
                    
                    // Son aktiviteleri g√ºncelle
                    updateFirebaseActivities(usersSnapshot, questionsSnapshot, adminQuestionsSnapshot, pendingSnapshot, reportsSnapshot);
                    
                    console.log('Firebase dashboard verileri y√ºklendi');
                    
                }).catch(error => {
                    console.error('Dashboard verileri y√ºklenemedi:', error);
                    loadLocalDashboardData();
                });
            } else {
                loadLocalDashboardData();
            }
        }

        // Local dashboard verilerini y√ºkle
        function loadLocalDashboardData() {
            console.log('Local dashboard verileri y√ºkleniyor...');
            
            const localUsers = JSON.parse(localStorage.getItem('localUsers') || '[]');
            const localQuestions = JSON.parse(localStorage.getItem('adminQuestions') || '[]');
            const localPendingQuestions = JSON.parse(localStorage.getItem('localPendingQuestions') || '[]');
            const localReports = JSON.parse(localStorage.getItem('localReports') || '[]');
            const gamesPlayed = parseInt(localStorage.getItem('gamesPlayed') || '0');
            
            // Eƒüer veriler yoksa √∂rnek veri olu≈ütur
            if (localUsers.length === 0) {
                generateSampleDashboardData();
                return;
            }
            
            const pendingQuestionsCount = localPendingQuestions.filter(q => q.status === 'pending').length;
            const pendingReportsCount = localReports.filter(r => r.status === 'pending').length;
            
            // ƒ∞statistikleri g√ºncelle
            document.getElementById('admin-total-users').textContent = localUsers.length.toLocaleString('tr-TR');
            document.getElementById('admin-total-questions').textContent = localQuestions.length.toLocaleString('tr-TR');
            document.getElementById('admin-total-games').textContent = gamesPlayed.toLocaleString('tr-TR');
            document.getElementById('admin-pending-reports').textContent = pendingReportsCount.toLocaleString('tr-TR');
            
            // Local aktiviteleri g√∂ster
            updateLocalActivities(localUsers, localQuestions, localPendingQuestions, localReports);
            
            console.log('Local dashboard verileri y√ºklendi');
        }

        // √ñrnek dashboard verisi olu≈ütur
        function generateSampleDashboardData() {
            console.log('√ñrnek dashboard verileri olu≈üturuluyor...');
            
            const sampleUsers = [
                {
                    id: 'admin_user',
                    displayName: 'Admin Kullanƒ±cƒ±',
                    email: 'admin@bilgoo.com',
                    createdAt: new Date(Date.now() - 86400000 * 30).toISOString(),
                    disabled: false,
                    role: 'admin'
                },
                {
                    id: 'demo_user_1',
                    displayName: 'Ahmet Yƒ±lmaz',
                    email: 'ahmet@example.com',
                    createdAt: new Date(Date.now() - 86400000 * 7).toISOString(),
                    disabled: false,
                    role: 'user'
                },
                {
                    id: 'demo_user_2',
                    displayName: 'Ay≈üe Kaya',
                    email: 'ayse@example.com',
                    createdAt: new Date(Date.now() - 86400000 * 3).toISOString(),
                    disabled: false,
                    role: 'user'
                },
                {
                    id: 'demo_user_3',
                    displayName: 'Mehmet Demir',
                    email: 'mehmet@example.com',
                    createdAt: new Date(Date.now() - 86400000 * 1).toISOString(),
                    disabled: false,
                    role: 'user'
                },
                {
                    id: 'demo_user_4',
                    displayName: 'Fatma √ñzkan',
                    email: 'fatma@example.com',
                    createdAt: new Date().toISOString(),
                    disabled: false,
                    role: 'user'
                }
            ];

            const sampleReports = [
                {
                    id: 'report_1',
                    type: 'inappropriate_content',
                    reportedBy: 'demo_user_1',
                    reporterName: 'Ahmet Yƒ±lmaz',
                    description: 'Uygunsuz i√ßerik tespit edildi',
                    details: 'Kullanƒ±cƒ± profil fotoƒürafƒ±nda uygunsuz i√ßerik mevcut',
                    status: 'pending',
                    createdAt: new Date(Date.now() - 86400000 * 2).toISOString()
                },
                {
                    id: 'report_2',
                    type: 'spam',
                    reportedBy: 'demo_user_2',
                    reporterName: 'Ay≈üe Kaya',
                    description: 'Spam davranƒ±≈ü bildirimi',
                    details: 'Kullanƒ±cƒ± s√ºrekli aynƒ± mesajlarƒ± g√∂nderiyor',
                    status: 'pending',
                    createdAt: new Date(Date.now() - 86400000 * 1).toISOString()
                },
                {
                    id: 'report_3',
                    type: 'harassment',
                    reportedBy: 'demo_user_3',
                    reporterName: 'Mehmet Demir',
                    description: 'Taciz bildirimi',
                    details: 'Kullanƒ±cƒ± rahatsƒ±z edici mesajlar g√∂nderiyor',
                    status: 'pending',
                    createdAt: new Date(Date.now() - 86400000 * 0.5).toISOString()
                }
            ];

            const samplePendingQuestions = [
                {
                    id: 'pending_1',
                    question: 'React.js nedir ve ne i≈üe yarar?',
                    category: 'Teknoloji',
                    difficulty: 'Orta',
                    options: ['UI K√ºt√ºphanesi', 'Veritabanƒ±', 'Web Sunucusu', 'ƒ∞≈ületim Sistemi'],
                    correctAnswer: 0,
                    status: 'pending',
                    submittedBy: 'demo_user_1',
                    submittedByName: 'Ahmet Yƒ±lmaz',
                    submittedAt: new Date(Date.now() - 86400000 * 1).toISOString()
                },
                {
                    id: 'pending_2',
                    question: 'T√ºrkiye\'nin en y√ºksek daƒüƒ± hangisidir?',
                    category: 'Genel K√ºlt√ºr',
                    difficulty: 'Kolay',
                    options: ['Erciyes', 'Aƒürƒ± Daƒüƒ±', 'Ka√ßkar', 'Uludaƒü'],
                    correctAnswer: 1,
                    status: 'pending',
                    submittedBy: 'demo_user_2',
                    submittedByName: 'Ay≈üe Kaya',
                    submittedAt: new Date(Date.now() - 86400000 * 0.5).toISOString()
                }
            ];

            // Local storage'a kaydet
            localStorage.setItem('localUsers', JSON.stringify(sampleUsers));
            localStorage.setItem('localReports', JSON.stringify(sampleReports));
            localStorage.setItem('localPendingQuestions', JSON.stringify(samplePendingQuestions));
            localStorage.setItem('gamesPlayed', '347');
            localStorage.setItem('totalQuizzes', '2147');

            console.log('√ñrnek dashboard verileri olu≈üturuldu');

            // Dashboard'ƒ± tekrar y√ºkle
            loadLocalDashboardData();
        }

        // Firebase aktiviteleri g√ºncelle
        function updateFirebaseActivities(usersSnapshot, questionsSnapshot, adminQuestionsSnapshot, pendingSnapshot, reportsSnapshot) {
            const activityList = document.getElementById('admin-activity-list');
            if (!activityList) return;

            let activities = [];

            // Yeni kullanƒ±cƒ± kayƒ±tlarƒ±
            usersSnapshot.forEach(doc => {
                const data = doc.data();
                if (data.createdAt) {
                    const createdAt = data.createdAt.toDate ? data.createdAt.toDate() : new Date(data.createdAt);
                    activities.push({
                        type: 'user_registered',
                        data: data,
                        timestamp: createdAt,
                        icon: 'fas fa-user-plus',
                        color: '#28a745'
                    });
                }
            });

            // Admin sorular
            adminQuestionsSnapshot.forEach(doc => {
                const data = doc.data();
                if (data.addedAt) {
                    activities.push({
                        type: 'question_added',
                        data: data,
                        timestamp: new Date(data.addedAt),
                        icon: 'fas fa-plus-circle',
                        color: '#17a2b8'
                    });
                }
            });

            // Bekleyen sorular
            pendingSnapshot.forEach(doc => {
                const data = doc.data();
                if (data.submittedAt) {
                    activities.push({
                        type: 'question_pending',
                        data: data,
                        timestamp: new Date(data.submittedAt),
                        icon: 'fas fa-clock',
                        color: '#ffc107'
                    });
                }
            });

            // Yeni raporlar
            reportsSnapshot.forEach(doc => {
                const data = doc.data();
                if (data.createdAt) {
                    activities.push({
                        type: 'report_submitted',
                        data: data,
                        timestamp: new Date(data.createdAt),
                        icon: 'fas fa-exclamation-triangle',
                        color: '#dc3545'
                    });
                }
            });

            // Son 10 aktiviteyi sƒ±rala ve g√∂ster
            activities = activities
                .sort((a, b) => b.timestamp - a.timestamp)
                .slice(0, 10);

            displayActivities(activities, activityList);
        }

        // Local aktiviteleri g√ºncelle
        function updateLocalActivities(users, questions, pendingQuestions, reports) {
            const activityList = document.getElementById('admin-activity-list');
            if (!activityList) return;

            let activities = [];

            // Local kullanƒ±cƒ±lardan aktivite
            users.forEach(user => {
                if (user.createdAt) {
                    activities.push({
                        type: 'user_registered',
                        data: user,
                        timestamp: new Date(user.createdAt),
                        icon: 'fas fa-user-plus',
                        color: '#28a745'
                    });
                }
            });

            // Local sorulardan aktivite
            questions.forEach(question => {
                if (question.addedAt) {
                    activities.push({
                        type: 'question_added',
                        data: question,
                        timestamp: new Date(question.addedAt),
                        icon: 'fas fa-plus-circle',
                        color: '#17a2b8'
                    });
                }
            });

            // Bekleyen sorular
            pendingQuestions.forEach(question => {
                if (question.submittedAt) {
                    activities.push({
                        type: 'question_pending',
                        data: question,
                        timestamp: new Date(question.submittedAt),
                        icon: 'fas fa-clock',
                        color: '#ffc107'
                    });
                }
            });

            // Local raporlar
            reports.forEach(report => {
                if (report.createdAt) {
                    activities.push({
                        type: 'report_submitted',
                        data: report,
                        timestamp: new Date(report.createdAt),
                        icon: 'fas fa-exclamation-triangle',
                        color: '#dc3545'
                    });
                }
            });

            // Son aktiviteleri sƒ±rala ve g√∂r√ºnt√ºle
            activities = activities
                .sort((a, b) => b.timestamp - a.timestamp)
                .slice(0, 8);

            displayActivities(activities, activityList);
        }

        // Aktiviteleri g√∂r√ºnt√ºle
        function displayActivities(activities, container) {
            if (activities.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: #666;">
                        <i class="fas fa-calendar-times" style="font-size: 48px; margin-bottom: 15px; opacity: 0.5;"></i>
                        <p>Hen√ºz aktivite bulunmuyor.</p>
                        <p style="font-size: 14px;">Kullanƒ±cƒ± etkile≈üimleri burada g√∂r√ºnecektir.</p>
                    </div>
                `;
                return;
            }

            let html = '';
            activities.forEach(activity => {
                const timeAgo = getTimeAgo(activity.timestamp);
                let message = '';

                switch (activity.type) {
                    case 'user_registered':
                        message = `<strong>Yeni kullanƒ±cƒ±:</strong> ${activity.data.displayName || activity.data.name || 'Anonim'} kayƒ±t oldu`;
                        break;
                    case 'question_approved':
                        message = `<strong>Soru onaylandƒ±:</strong> "${activity.data.question.substring(0, 50)}..."`;
                        break;
                    case 'question_added':
                        message = `<strong>Yeni soru eklendi:</strong> "${activity.data.question.substring(0, 50)}..."`;
                        break;
                    case 'question_pending':
                        message = `<strong>Soru bekliyor:</strong> "${activity.data.question.substring(0, 50)}..." onay bekliyor`;
                        break;
                    case 'report_submitted':
                        message = `<strong>Yeni ≈üikayet:</strong> ${activity.data.type || 'Genel'} kategorisinde ≈üikayet`;
                        break;
                }

                html += `
                    <div class="activity-item" style="padding: 12px 0; border-bottom: 1px solid #eee; display: flex; align-items: center;">
                        <div style="margin-right: 12px;">
                            <i class="${activity.icon}" style="color: ${activity.color}; font-size: 16px;"></i>
                        </div>
                        <div style="flex: 1;">
                            <div style="margin-bottom: 4px;">${message}</div>
                            <small style="color: #666; font-size: 12px;">
                                <i class="fas fa-clock" style="margin-right: 4px;"></i>${timeAgo}
                            </small>
                        </div>
                    </div>
                `;
            });

            container.innerHTML = html;
        }

        // Zaman farkƒ±nƒ± hesaplama fonksiyonu
        function getTimeAgo(date) {
            const now = new Date();
            const diff = now - date;
            
            const minutes = Math.floor(diff / (1000 * 60));
            const hours = Math.floor(diff / (1000 * 60 * 60));
            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            
            if (minutes < 1) return '≈ûimdi';
            if (minutes < 60) return `${minutes} dakika √∂nce`;
            if (hours < 24) return `${hours} saat √∂nce`;
            return `${days} g√ºn √∂nce`;
        }

        // Kullanƒ±cƒ± verilerini y√ºkle
        function loadUsersData() {
            const usersList = document.getElementById('admin-users-list');
            if (!usersList) return;

            // Loading indicator g√∂ster
            usersList.innerHTML = '<tr><td colspan="6" style="text-align: center; padding: 20px;"><i class="fas fa-spinner fa-spin"></i> Kullanƒ±cƒ±lar y√ºkleniyor...</td></tr>';

            if (firebase.firestore) {
                // Firebase'den ger√ßek kullanƒ±cƒ± verilerini √ßek
                firebase.firestore().collection('users')
                    .orderBy('createdAt', 'desc')
                    .get()
                    .then((querySnapshot) => {
                        if (querySnapshot.empty) {
                            usersList.innerHTML = '<tr><td colspan="6" style="text-align: center; padding: 20px; color: #666;">Hen√ºz kayƒ±tlƒ± kullanƒ±cƒ± yok.</td></tr>';
                return;
            }
            
                        let html = '';
                        let userIndex = 1;
                        
                        allUsers = [];
                        querySnapshot.forEach((doc) => {
                            const userData = doc.data();
                            const userId = doc.id;
                            
                            // Kullanƒ±cƒ±yƒ± allUsers array'ine ekle
                            allUsers.push({
                                id: userId,
                                ...userData
                            });
                            
                            // Tarih formatla
                            let registrationDate = 'Bilinmiyor';
                            if (userData.createdAt) {
                                if (userData.createdAt.toDate) {
                                    registrationDate = userData.createdAt.toDate().toLocaleDateString('tr-TR');
                                } else if (typeof userData.createdAt === 'string') {
                                    registrationDate = new Date(userData.createdAt).toLocaleDateString('tr-TR');
                                }
                            }
                            
                            // Kullanƒ±cƒ± durumu
                            const status = userData.disabled ? 
                                '<span style="color: #dc3545; font-weight: bold;">Engelli</span>' : 
                                '<span style="color: #28a745; font-weight: bold;">Aktif</span>';
                            
                            // Kullanƒ±cƒ± adƒ± ve e-posta g√ºvenli g√∂sterimi
                            const displayName = userData.displayName || userData.name || 'Anonim Kullanƒ±cƒ±';
                            const email = userData.email || 'E-posta yok';
                            
                            html += `
                                <tr>
                                    <td>U${String(userIndex).padStart(3, '0')}</td>
                                    <td>${displayName}</td>
                                    <td>${email}</td>
                                    <td>${registrationDate}</td>
                                    <td>${status}</td>
                                    <td>
                                        <button class="admin-btn-secondary edit-user-btn" data-user-id="${userId}" style="margin-right: 5px; background: #6c757d;">
                                            <i class="fas fa-edit"></i> D√ºzenle
                                        </button>
                                        <button class="admin-btn-secondary ${userData.disabled ? 'unblock' : 'block'}-user-btn" data-user-id="${userId}" data-disabled="${userData.disabled || false}" style="background: ${userData.disabled ? '#28a745' : '#dc3545'};">
                                            <i class="fas fa-${userData.disabled ? 'unlock' : 'ban'}"></i> ${userData.disabled ? 'Engeli Kaldƒ±r' : 'Engelle'}
                                        </button>
                                    </td>
                                </tr>
                            `;
                            userIndex++;
                        });

                        filteredUsers = allUsers;
                        renderUsersPage();
                    })
                    .catch((error) => {
                        console.error('Kullanƒ±cƒ±lar y√ºklenemedi:', error);
                        usersList.innerHTML = '<tr><td colspan="6" style="text-align: center; padding: 20px; color: #dc3545;">Kullanƒ±cƒ±lar y√ºklenirken hata olu≈ütu.</td></tr>';
                    });
            } else {
                // Local storage'dan veya varsayƒ±lan verilerden kullanƒ±cƒ± listesi
                const localUsers = JSON.parse(localStorage.getItem('localUsers') || '[]');
                
                // Eƒüer local storage'da kullanƒ±cƒ± yoksa, √∂rnek veri olu≈ütur
                if (localUsers.length === 0) {
                    const currentUser = firebase.auth && firebase.auth().currentUser;
                    if (currentUser) {
                        localUsers.push({
                            id: currentUser.uid,
                            displayName: currentUser.displayName || 'Mevcut Kullanƒ±cƒ±',
                            email: currentUser.email,
                            createdAt: new Date().toISOString(),
                            disabled: false
                        });
                        localStorage.setItem('localUsers', JSON.stringify(localUsers));
                    } else {
                        // √ñrnek kullanƒ±cƒ±lar
                        localUsers.push(
                            {
                                id: 'user1',
                                displayName: 'Test Kullanƒ±cƒ± 1',
                                email: 'test1@example.com',
                                createdAt: new Date(Date.now() - 86400000).toISOString(), // 1 g√ºn √∂nce
                                disabled: false
                            },
                            {
                                id: 'user2',
                                displayName: 'Test Kullanƒ±cƒ± 2',
                                email: 'test2@example.com',
                                createdAt: new Date(Date.now() - 172800000).toISOString(), // 2 g√ºn √∂nce
                                disabled: false
                            }
                        );
                        localStorage.setItem('localUsers', JSON.stringify(localUsers));
                    }
                }
                
                allUsers = localUsers;
                filteredUsers = allUsers;
                renderUsersPage();
            }
        }

        // Kullanƒ±cƒ± aksiyonlarƒ± i√ßin olay dinleyiciler
        function attachUserActionEvents() {
            // D√ºzenle butonlarƒ±
            document.querySelectorAll('.edit-user-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const userId = this.getAttribute('data-user-id');
                    editUser(userId);
                });
            });

            // Engelle/Engeli Kaldƒ±r butonlarƒ±
            document.querySelectorAll('.block-user-btn, .unblock-user-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const userId = this.getAttribute('data-user-id');
                    const isDisabled = this.getAttribute('data-disabled') === 'true';
                    toggleUserStatus(userId, !isDisabled);
                });
            });
        }

        // Kullanƒ±cƒ± d√ºzenleme fonksiyonu
        function editUser(userId) {
            if (firebase.firestore) {
                firebase.firestore().collection('users').doc(userId).get()
                    .then((doc) => {
                        if (!doc.exists) {
                            alert('Kullanƒ±cƒ± bulunamadƒ±!');
                            return;
                        }
                        const userData = doc.data();
                        openEditUserModal(userId, userData);
                    })
                    .catch((error) => {
                        console.error('Kullanƒ±cƒ± verisi alƒ±namadƒ±:', error);
                        alert('Kullanƒ±cƒ± verisi alƒ±nƒ±rken hata olu≈ütu.');
                    });
            } else {
                const localUsers = JSON.parse(localStorage.getItem('localUsers') || '[]');
                const user = localUsers.find(u => u.id === userId);
                if (user) {
                    openEditUserModal(userId, user);
                } else {
                    alert('Kullanƒ±cƒ± bulunamadƒ±!');
                }
            }
        }

        // Kullanƒ±cƒ± durumu deƒüi≈ütirme fonksiyonu
        function toggleUserStatus(userId, disable) {
            const action = disable ? 'engelleme' : 'engeli kaldƒ±rma';
            if (!confirm(`Bu kullanƒ±cƒ±yƒ± ${action} i≈ülemini yapmak istediƒüinizden emin misiniz?`)) {
                return;
            }

            if (firebase.firestore) {
                firebase.firestore().collection('users').doc(userId).update({
                    disabled: disable,
                    lastModified: firebase.firestore.FieldValue.serverTimestamp(),
                    modifiedBy: firebase.auth()?.currentUser?.email || 'admin'
                })
                .then(() => {
                    showAdminActionSuccess(`Kullanƒ±cƒ± ${disable ? 'engellendi' : 'engeli kaldƒ±rƒ±ldƒ±'}.`);
                    loadUsersData(); // Listeyi yenile
                })
                .catch((error) => {
                    console.error('Kullanƒ±cƒ± durumu g√ºncellenemedi:', error);
                    alert('Kullanƒ±cƒ± durumu g√ºncellenirken hata olu≈ütu.');
                });
            } else {
                const localUsers = JSON.parse(localStorage.getItem('localUsers') || '[]');
                const userIndex = localUsers.findIndex(u => u.id === userId);
                
                if (userIndex !== -1) {
                    localUsers[userIndex].disabled = disable;
                    localStorage.setItem('localUsers', JSON.stringify(localUsers));
                    
                    showAdminActionSuccess(`Kullanƒ±cƒ± ${disable ? 'engellendi' : 'engeli kaldƒ±rƒ±ldƒ±'}. (Local Storage)`);
                    loadUsersData(); // Listeyi yenile
                } else {
                    alert('Kullanƒ±cƒ± bulunamadƒ±!');
                }
            }
        }

        // Kullanƒ±cƒ± d√ºzenleme modalƒ±
        function openEditUserModal(userId, userData) {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.5);
                z-index: 10002;
                display: flex;
                align-items: center;
                justify-content: center;
            `;
            
            modal.innerHTML = `
                <div style="background: white; padding: 30px; border-radius: 10px; max-width: 500px; width: 90%;">
                    <h3 style="margin-top: 0;">Kullanƒ±cƒ± D√ºzenle</h3>
                    
                    <div style="margin-bottom: 15px;">
                        <label style="display: block; margin-bottom: 5px; font-weight: bold;">Kullanƒ±cƒ± Adƒ±:</label>
                        <input type="text" id="edit-user-name" value="${userData.displayName || userData.name || ''}" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                    </div>
                    
                    <div style="margin-bottom: 15px;">
                        <label style="display: block; margin-bottom: 5px; font-weight: bold;">E-posta:</label>
                        <input type="email" id="edit-user-email" value="${userData.email || ''}" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                    </div>
                    
                    <div style="margin-bottom: 20px;">
                        <label style="display: flex; align-items: center;">
                            <input type="checkbox" id="edit-user-disabled" ${userData.disabled ? 'checked' : ''} style="margin-right: 8px;">
                            Kullanƒ±cƒ±yƒ± engelle
                        </label>
                    </div>
                    
                    <div style="display: flex; gap: 10px; justify-content: flex-end;">
                        <button id="save-user-btn" style="background: #4CAF50; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer;">
                            <i class="fas fa-save"></i> Kaydet
                        </button>
                        <button id="cancel-user-edit-btn" style="background: #6c757d; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer;">
                            <i class="fas fa-times"></i> ƒ∞ptal
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // Kaydet butonu
            document.getElementById('save-user-btn').addEventListener('click', function() {
                saveEditedUser(userId, modal);
            });
            
            // ƒ∞ptal butonu
            document.getElementById('cancel-user-edit-btn').addEventListener('click', function() {
                document.body.removeChild(modal);
            });
            
            // Modal dƒ±≈üƒ±na tƒ±klayƒ±nca kapat
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    document.body.removeChild(modal);
                }
            });
        }

        // D√ºzenlenmi≈ü kullanƒ±cƒ±yƒ± kaydet
        function saveEditedUser(userId, modal) {
            const updatedData = {
                displayName: document.getElementById('edit-user-name').value,
                email: document.getElementById('edit-user-email').value,
                disabled: document.getElementById('edit-user-disabled').checked,
                lastModified: new Date().toISOString(),
                modifiedBy: firebase.auth()?.currentUser?.email || 'admin'
            };

            if (firebase.firestore) {
                firebase.firestore().collection('users').doc(userId).update(updatedData)
                    .then(() => {
                        showAdminActionSuccess('Kullanƒ±cƒ± ba≈üarƒ±yla g√ºncellendi!');
                        loadUsersData();
                        document.body.removeChild(modal);
                    })
                    .catch((error) => {
                        console.error('Kullanƒ±cƒ± g√ºncellenirken hata olu≈ütu:', error);
                        alert('Kullanƒ±cƒ± g√ºncellenirken bir hata olu≈ütu.');
                    });
            } else {
                const localUsers = JSON.parse(localStorage.getItem('localUsers') || '[]');
                const userIndex = localUsers.findIndex(u => u.id === userId);
                
                if (userIndex !== -1) {
                    Object.assign(localUsers[userIndex], updatedData);
                    localStorage.setItem('localUsers', JSON.stringify(localUsers));
                    
                    showAdminActionSuccess('Kullanƒ±cƒ± ba≈üarƒ±yla g√ºncellendi! (Local Storage)');
                    loadUsersData();
                    document.body.removeChild(modal);
                } else {
                    alert('Kullanƒ±cƒ± bulunamadƒ±!');
                }
            }
        }

        // Admin aksiyonu ba≈üarƒ± mesajƒ±
        function showAdminActionSuccess(message, type = 'success') {
            const bgColor = type === 'success' ? '#4CAF50' : type === 'warning' ? '#ff9800' : '#f44336';
            
            const successMsg = document.createElement('div');
            successMsg.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${bgColor};
                color: white;
                padding: 15px 20px;
                border-radius: 5px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.3);
                z-index: 10003;
                font-family: Arial, sans-serif;
                max-width: 300px;
            `;
            successMsg.innerHTML = `
                <div style="display: flex; align-items: center;">
                    <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'warning' ? 'exclamation-triangle' : 'times-circle'}" style="margin-right: 10px;"></i>
                    ${message}
                </div>
            `;
            
            document.body.appendChild(successMsg);
            
            setTimeout(() => {
                successMsg.style.opacity = '0';
                successMsg.style.transition = 'opacity 0.5s';
                setTimeout(() => document.body.removeChild(successMsg), 500);
            }, 3000);
        }

        // Bekleyen sorular verilerini y√ºkle
        function loadPendingQuestionsData() {
            const pendingList = document.getElementById('admin-pending-questions-list');
            if (!pendingList) return;

            // Loading indicator g√∂ster
            pendingList.innerHTML = '<div style="text-align: center; padding: 20px;"><i class="fas fa-spinner fa-spin"></i> Bekleyen sorular y√ºkleniyor...</div>';

            if (firebase.firestore) {
                // Firebase'den bekleyen sorularƒ± √ßek
                firebase.firestore().collection('pending-questions')
                    .where('status', '==', 'pending')
                    .orderBy('submittedTimestamp', 'desc')
                    .get()
                    .then((querySnapshot) => {
                        if (querySnapshot.empty) {
                            pendingList.innerHTML = '<div style="text-align: center; padding: 20px; color: #666;">Bekleyen soru bulunmuyor.</div>';
                            return;
                        }

                        let html = '';
                        querySnapshot.forEach((doc) => {
                            const question = doc.data();
                            const questionId = doc.id;
                            const submittedDate = question.submittedAt ? new Date(question.submittedAt).toLocaleString('tr-TR') : 'Bilinmiyor';
                            
                            html += `
                                <div class="pending-question-item" data-question-id="${questionId}" style="background: #f8f9fa; padding: 20px; border-radius: 8px; border-left: 4px solid #ffc107; margin-bottom: 15px;">
                                    <div class="question-header" style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 15px;">
                                        <div>
                                            <h4 style="margin: 0 0 5px 0; color: #333;">${question.question}</h4>
                                            <div style="font-size: 14px; color: #666;">
                                                <strong>Kategori:</strong> ${question.category} | 
                                                <strong>Zorluk:</strong> ${getDifficultyText(question.difficulty)} |
                                                <strong>G√∂nderen:</strong> ${question.submittedBy}
                                            </div>
                                            <div style="font-size: 12px; color: #888; margin-top: 5px;">
                                                <strong>G√∂nderilme Tarihi:</strong> ${submittedDate}
                                            </div>
                                        </div>
                                        <div style="font-size: 12px; color: #666;">
                                            ID: ${questionId.substring(0, 8)}...
                                        </div>
                                    </div>
                                    
                                    <div class="question-options" style="margin-bottom: 15px;">
                                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                                            <div><strong>A)</strong> ${question.options[0]}</div>
                                            <div><strong>B)</strong> ${question.options[1]}</div>
                                            <div><strong>C)</strong> ${question.options[2]}</div>
                                            <div><strong>D)</strong> ${question.options[3]}</div>
                                        </div>
                                        <div style="margin-top: 10px; padding: 8px; background: #e8f5e8; border-radius: 4px; font-size: 14px;">
                                            <strong>Doƒüru Cevap:</strong> ${String.fromCharCode(65 + question.correctAnswer)}) ${question.options[question.correctAnswer]}
                                        </div>
                                    </div>
                                    
                                    <div class="question-actions" style="display: flex; gap: 10px; justify-content: flex-end;">
                                        <button class="admin-btn-primary approve-question-btn" data-question-id="${questionId}" style="margin-right: 10px;">
                                            <i class="fas fa-check"></i> Onayla
                                        </button>
                                        <button class="admin-btn-secondary reject-question-btn" data-question-id="${questionId}" style="background: #dc3545;">
                                            <i class="fas fa-times"></i> Reddet
                                        </button>
                                        <button class="admin-btn-secondary edit-question-btn" data-question-id="${questionId}" style="background: #6c757d;">
                                            <i class="fas fa-edit"></i> D√ºzenle
                                        </button>
                                    </div>
                                </div>
                            `;
                        });

                        pendingList.innerHTML = html;
                        attachPendingQuestionEvents();
                    })
                    .catch((error) => {
                        console.error('Bekleyen sorular y√ºklenemedi:', error);
                        pendingList.innerHTML = '<div style="text-align: center; padding: 20px; color: #dc3545;">Bekleyen sorular y√ºklenirken hata olu≈ütu.</div>';
                    });
            } else {
                // Local storage'dan bekleyen sorularƒ± √ßek
                const localPendingQuestions = JSON.parse(localStorage.getItem('localPendingQuestions') || '[]');
                const pendingQuestions = localPendingQuestions.filter(q => q.status === 'pending');
                
                if (pendingQuestions.length === 0) {
                    pendingList.innerHTML = '<div style="text-align: center; padding: 20px; color: #666;">Bekleyen soru bulunmuyor.</div>';
                    return;
                }

                let html = '';
                pendingQuestions.forEach((question) => {
                    const submittedDate = new Date(question.submittedAt).toLocaleString('tr-TR');
                    
                    html += `
                        <div class="pending-question-item" data-question-id="${question.id}" style="background: #f8f9fa; padding: 20px; border-radius: 8px; border-left: 4px solid #ffc107; margin-bottom: 15px;">
                            <div class="question-header" style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 15px;">
                                <div>
                                    <h4 style="margin: 0 0 5px 0; color: #333;">${question.question}</h4>
                                    <div style="font-size: 14px; color: #666;">
                                        <strong>Kategori:</strong> ${question.category} | 
                                        <strong>Zorluk:</strong> ${getDifficultyText(question.difficulty)} |
                                        <strong>G√∂nderen:</strong> ${question.submittedBy}
                                    </div>
                                    <div style="font-size: 12px; color: #888; margin-top: 5px;">
                                        <strong>G√∂nderilme Tarihi:</strong> ${submittedDate}
                                    </div>
                                </div>
                                <div style="font-size: 12px; color: #666;">
                                    ID: ${question.id}
                                </div>
                            </div>
                            
                            <div class="question-options" style="margin-bottom: 15px;">
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                                    <div><strong>A)</strong> ${question.options[0]}</div>
                                    <div><strong>B)</strong> ${question.options[1]}</div>
                                    <div><strong>C)</strong> ${question.options[2]}</div>
                                    <div><strong>D)</strong> ${question.options[3]}</div>
                                </div>
                                <div style="margin-top: 10px; padding: 8px; background: #e8f5e8; border-radius: 4px; font-size: 14px;">
                                    <strong>Doƒüru Cevap:</strong> ${String.fromCharCode(65 + question.correctAnswer)}) ${question.options[question.correctAnswer]}
                                </div>
                            </div>
                            
                            <div class="question-actions" style="display: flex; gap: 10px; justify-content: flex-end;">
                                <button class="admin-btn-primary approve-question-btn" data-question-id="${question.id}" style="margin-right: 10px;">
                                    <i class="fas fa-check"></i> Onayla
                                </button>
                                <button class="admin-btn-secondary reject-question-btn" data-question-id="${question.id}" style="background: #dc3545;">
                                    <i class="fas fa-times"></i> Reddet
                                </button>
                            </div>
                        </div>
                    `;
                });

                pendingList.innerHTML = html;
                attachPendingQuestionEvents();
            }
        }

        // Zorluk seviyesi metni d√∂nd√ºr
        function getDifficultyText(difficulty) {
            const difficultyMap = {
                1: 'Kolay',
                2: 'Orta', 
                3: 'Zor'
            };
            return difficultyMap[difficulty] || 'Bilinmiyor';
        }

        // Bekleyen soru butonlarƒ±na olay dinleyiciler ekle
        function attachPendingQuestionEvents() {
            // Onay butonlarƒ±
            document.querySelectorAll('.approve-question-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const questionId = this.getAttribute('data-question-id');
                    approveQuestion(questionId);
                });
            });

            // Red butonlarƒ±
            document.querySelectorAll('.reject-question-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const questionId = this.getAttribute('data-question-id');
                    rejectQuestion(questionId);
                });
            });

            // D√ºzenle butonlarƒ±
            document.querySelectorAll('.edit-question-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const questionId = this.getAttribute('data-question-id');
                    editPendingQuestion(questionId);
                });
            });
        }

        // Admin panel deƒüi≈ükenleri
        let currentUserPage = 1;
        let currentQuestionPage = 1;
        let usersPerPage = 10;
        let questionsPerPage = 10;
        let allUsers = [];
        let allQuestions = [];
        let filteredUsers = [];
        let filteredQuestions = [];

        // Sorular verilerini y√ºkle
        function loadQuestionsData() {
            const questionsList = document.getElementById('admin-questions-list');
            if (!questionsList) return;

            // Loading indicator g√∂ster
            questionsList.innerHTML = '<tr><td colspan="6" style="text-align: center; padding: 20px;"><i class="fas fa-spinner fa-spin"></i> Sorular y√ºkleniyor...</td></tr>';

            // Kategori se√ßeneklerini y√ºkle
            populateQuestionCategorySelect();

            if (firebase.firestore) {
                // Firebase'den ger√ßek soru verilerini √ßek
                Promise.all([
                    firebase.firestore().collection('questions').get(),
                    firebase.firestore().collection('adminQuestions').get()
                ]).then(([questionsSnapshot, adminQuestionsSnapshot]) => {
                    allQuestions = [];
                    
                    // Normal sorularƒ± ekle
                    questionsSnapshot.forEach((doc) => {
                        const questionData = doc.data();
                        allQuestions.push({
                            id: doc.id,
                            ...questionData,
                            source: 'questions'
                        });
                    });
                    
                    // Admin sorularƒ±nƒ± ekle
                    adminQuestionsSnapshot.forEach((doc) => {
                        const questionData = doc.data();
                        allQuestions.push({
                            id: doc.id,
                            ...questionData,
                            source: 'adminQuestions'
                        });
                    });
                    
                    filteredQuestions = allQuestions;
                    currentQuestionPage = 1;
                    renderQuestionsPage();
                    
                }).catch((error) => {
                    console.error('Sorular y√ºklenemedi:', error);
                    loadLocalQuestionsData();
                });
            } else {
                loadLocalQuestionsData();
            }
        }

        // Local sorular verilerini y√ºkle
        function loadLocalQuestionsData() {
            const localQuestions = JSON.parse(localStorage.getItem('adminQuestions') || '[]');
            
            // Eƒüer local storage'da soru yoksa, √∂rnek sorular olu≈ütur
            if (localQuestions.length === 0) {
                const sampleQuestions = [
                    {
                        id: 'local_q1',
                        question: 'JavaScript hangi ama√ßla kullanƒ±lƒ±r?',
                        category: 'Teknoloji',
                        difficulty: 'medium',
                        options: ['Web geli≈ütirme', 'Fotoƒüraf d√ºzenleme', 'Video oynatma', 'M√ºzik dinleme'],
                        correctAnswer: 0,
                        addedBy: 'admin',
                        addedAt: new Date().toISOString()
                    },
                    {
                        id: 'local_q2',
                        question: 'T√ºrkiye\'nin ba≈ükenti neresidir?',
                        category: 'Genel K√ºlt√ºr',
                        difficulty: 'easy',
                        options: ['ƒ∞stanbul', 'Ankara', 'ƒ∞zmir', 'Bursa'],
                        correctAnswer: 1,
                        addedBy: 'admin',
                        addedAt: new Date().toISOString()
                    },
                    {
                        id: 'local_q3',
                        question: 'En b√ºy√ºk okyanusun adƒ± nedir?',
                        category: 'Coƒürafya',
                        difficulty: 'easy',
                        options: ['Atlantik Okyanusu', 'Pasifik Okyanusu', 'Hint Okyanusu', 'Kuzey Buz Denizi'],
                        correctAnswer: 1,
                        addedBy: 'sistem',
                        addedAt: new Date().toISOString()
                    }
                ];
                localStorage.setItem('adminQuestions', JSON.stringify(sampleQuestions));
                allQuestions = sampleQuestions;
            } else {
                allQuestions = localQuestions;
            }
            
            filteredQuestions = allQuestions;
            currentQuestionPage = 1;
            renderQuestionsPage();
        }

        // Kategori se√ßeneklerini doldur
        function populateQuestionCategorySelect() {
            const categorySelect = document.getElementById('admin-question-category');
            if (!categorySelect) return;
            
            const categories = ['Genel K√ºlt√ºr', 'Tarih', 'Coƒürafya', 'Fen Bilgisi', 'Teknoloji', 'Spor', 'Sanat', 'M√ºzik', 'Edebiyat', 'Matematik'];
            
            categorySelect.innerHTML = '<option value="all">T√ºm Kategoriler</option>';
            categories.forEach(category => {
                categorySelect.innerHTML += `<option value="${category}">${category}</option>`;
            });
        }

        // Kullanƒ±cƒ± arama fonksiyonu
        function searchUsers() {
            const searchInput = document.getElementById('admin-user-search');
            const searchTerm = searchInput ? searchInput.value.toLowerCase().trim() : '';
            
            if (!searchTerm) {
                filteredUsers = allUsers;
            } else {
                filteredUsers = allUsers.filter(user => 
                    (user.displayName && user.displayName.toLowerCase().includes(searchTerm)) ||
                    (user.email && user.email.toLowerCase().includes(searchTerm)) ||
                    (user.name && user.name.toLowerCase().includes(searchTerm))
                );
            }
            
            currentUserPage = 1;
            renderUsersPage();
        }
        
        // Soru arama fonksiyonu
        function searchQuestions() {
            const searchInput = document.getElementById('admin-question-search');
            const categorySelect = document.getElementById('admin-question-category');
            
            const searchTerm = searchInput ? searchInput.value.toLowerCase().trim() : '';
            const category = categorySelect ? categorySelect.value : 'all';
            
            let filtered = allQuestions;
            
            // Kategori filtresi
            if (category && category !== 'all') {
                filtered = filtered.filter(q => q.category === category);
            }
            
            // Arama terimi filtresi
            if (searchTerm) {
                filtered = filtered.filter(q => 
                    (q.question && q.question.toLowerCase().includes(searchTerm)) ||
                    (q.category && q.category.toLowerCase().includes(searchTerm)) ||
                    (q.addedBy && q.addedBy.toLowerCase().includes(searchTerm))
                );
            }
            
            filteredQuestions = filtered;
            currentQuestionPage = 1;
            renderQuestionsPage();
        }

        // Kullanƒ±cƒ±larƒ± sayfa sayfa g√∂ster
        function renderUsersPage() {
            const usersList = document.getElementById('admin-users-list');
            if (!usersList) return;
            
            const startIndex = (currentUserPage - 1) * usersPerPage;
            const endIndex = startIndex + usersPerPage;
            const usersToShow = filteredUsers.slice(startIndex, endIndex);
            
            if (usersToShow.length === 0) {
                usersList.innerHTML = '<tr><td colspan="6" style="text-align: center; padding: 20px; color: #666;">Kullanƒ±cƒ± bulunamadƒ±.</td></tr>';
                return;
            }
            
            let html = '';
            usersToShow.forEach((user, index) => {
                const actualIndex = startIndex + index + 1;
                const registrationDate = user.createdAt ? 
                    (user.createdAt.toDate ? user.createdAt.toDate().toLocaleDateString('tr-TR') : new Date(user.createdAt).toLocaleDateString('tr-TR')) : 
                    'Bilinmiyor';
                
                const status = user.disabled ? 
                    '<span style="color: #dc3545; font-weight: bold;">Engelli</span>' : 
                    '<span style="color: #28a745; font-weight: bold;">Aktif</span>';
                
                const displayName = user.displayName || user.name || 'Anonim';
                const email = user.email || 'E-posta yok';
                
                html += `
                    <tr>
                        <td>U${String(actualIndex).padStart(3, '0')}</td>
                        <td>${displayName}</td>
                        <td>${email}</td>
                        <td>${registrationDate}</td>
                        <td>${status}</td>
                        <td>
                            <button class="admin-btn-secondary edit-user-btn" data-user-id="${user.id}" style="margin-right: 5px; background: #6c757d;">
                                <i class="fas fa-edit"></i> D√ºzenle
                            </button>
                            <button class="admin-btn-secondary ${user.disabled ? 'unblock' : 'block'}-user-btn" data-user-id="${user.id}" data-disabled="${user.disabled || false}" style="background: ${user.disabled ? '#28a745' : '#dc3545'};">
                                <i class="fas fa-${user.disabled ? 'unlock' : 'ban'}"></i> ${user.disabled ? 'Engeli Kaldƒ±r' : 'Engelle'}
                            </button>
                        </td>
                    </tr>
                `;
            });
            
            usersList.innerHTML = html;
            attachUserActionEvents();
            updateUserPagination();
        }
        
        // Kullanƒ±cƒ± sayfalama g√ºncelle
        function updateUserPagination() {
            const totalPages = Math.ceil(filteredUsers.length / usersPerPage);
            const currentPageSpan = document.getElementById('admin-current-page');
            const prevBtn = document.getElementById('admin-prev-page');
            const nextBtn = document.getElementById('admin-next-page');
            
            if (currentPageSpan) {
                currentPageSpan.textContent = `Sayfa ${currentUserPage} / ${totalPages} (${filteredUsers.length} kullanƒ±cƒ±)`;
            }
            
            if (prevBtn) {
                prevBtn.disabled = currentUserPage === 1;
                prevBtn.style.opacity = currentUserPage === 1 ? '0.5' : '1';
            }
            
            if (nextBtn) {
                nextBtn.disabled = currentUserPage >= totalPages;
                nextBtn.style.opacity = currentUserPage >= totalPages ? '0.5' : '1';
            }
        }

        // Sorularƒ± sayfa sayfa g√∂ster
        function renderQuestionsPage() {
            const questionsList = document.getElementById('admin-questions-list');
            if (!questionsList) return;
            
            const startIndex = (currentQuestionPage - 1) * questionsPerPage;
            const endIndex = startIndex + questionsPerPage;
            const questionsToShow = filteredQuestions.slice(startIndex, endIndex);
            
            if (questionsToShow.length === 0) {
                questionsList.innerHTML = '<tr><td colspan="6" style="text-align: center; padding: 20px; color: #666;">Soru bulunamadƒ±.</td></tr>';
                return;
            }
            
            let html = '';
            questionsToShow.forEach((question, index) => {
                const actualIndex = startIndex + index + 1;
                const difficulty = getDifficultyText(question.difficulty);
                const addedBy = question.addedBy || question.createdBy || 'Sistem';
                
                html += `
                    <tr>
                        <td>Q${String(actualIndex).padStart(3, '0')}</td>
                        <td style="max-width: 300px; overflow: hidden; text-overflow: ellipsis;">${question.question}</td>
                        <td>${question.category}</td>
                        <td>${difficulty}</td>
                        <td>${addedBy}</td>
                        <td>
                            <button class="admin-btn-secondary edit-question-btn" data-question-id="${question.id}" style="margin-right: 5px; background: #6c757d;">
                                <i class="fas fa-edit"></i> D√ºzenle
                            </button>
                            <button class="admin-btn-secondary delete-question-btn" data-question-id="${question.id}" style="background: #dc3545;">
                                <i class="fas fa-trash"></i> Sil
                            </button>
                        </td>
                    </tr>
                `;
            });
            
            questionsList.innerHTML = html;
            attachQuestionActionEvents();
            updateQuestionPagination();
        }
        
        // Soru sayfalama g√ºncelle
        function updateQuestionPagination() {
            const totalPages = Math.ceil(filteredQuestions.length / questionsPerPage);
            const currentPageSpan = document.getElementById('admin-current-question-page');
            const prevBtn = document.getElementById('admin-prev-question-page');
            const nextBtn = document.getElementById('admin-next-question-page');
            
            if (currentPageSpan) {
                currentPageSpan.textContent = `Sayfa ${currentQuestionPage} / ${totalPages} (${filteredQuestions.length} soru)`;
            }
            
            if (prevBtn) {
                prevBtn.disabled = currentQuestionPage === 1;
                prevBtn.style.opacity = currentQuestionPage === 1 ? '0.5' : '1';
            }
            
            if (nextBtn) {
                nextBtn.disabled = currentQuestionPage >= totalPages;
                nextBtn.style.opacity = currentQuestionPage >= totalPages ? '0.5' : '1';
            }
        }

        // Soru aksiyon event listeners
        function attachQuestionActionEvents() {
            // D√ºzenle butonlarƒ±
            document.querySelectorAll('.edit-question-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const questionId = this.getAttribute('data-question-id');
                    editQuestion(questionId);
                });
            });

            // Sil butonlarƒ±
            document.querySelectorAll('.delete-question-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const questionId = this.getAttribute('data-question-id');
                    deleteQuestion(questionId);
                });
            });
        }

        // Soru d√ºzenleme
        function editQuestion(questionId) {
            const question = filteredQuestions.find(q => q.id === questionId);
            if (!question) {
                alert('Soru bulunamadƒ±!');
                return;
            }
            
            openEditQuestionModal(question);
        }

        // Soru silme
        function deleteQuestion(questionId) {
            if (!confirm('Bu soruyu silmek istediƒüinizden emin misiniz?')) {
                return;
            }
            
            if (firebase.firestore) {
                // Firebase'den sil
                const collections = ['questions', 'adminQuestions'];
                Promise.all(collections.map(collection => 
                    firebase.firestore().collection(collection).doc(questionId).delete()
                )).then(() => {
                    showAdminActionSuccess('Soru ba≈üarƒ±yla silindi!');
                    loadQuestionsData();
                }).catch(error => {
                    console.error('Soru silinirken hata:', error);
                    showAdminActionSuccess('Soru silinirken hata olu≈ütu!', 'error');
                });
            } else {
                // Local storage'dan sil
                const localQuestions = JSON.parse(localStorage.getItem('adminQuestions') || '[]');
                const questionIndex = localQuestions.findIndex(q => q.id === questionId);
                
                if (questionIndex !== -1) {
                    localQuestions.splice(questionIndex, 1);
                    localStorage.setItem('adminQuestions', JSON.stringify(localQuestions));
                    showAdminActionSuccess('Soru ba≈üarƒ±yla silindi! (Local Storage)');
                    loadQuestionsData();
                } else {
                    alert('Soru bulunamadƒ±!');
                }
            }
        }

        // Zorluk seviyesi metni
        function getDifficultyText(difficulty) {
            switch(difficulty) {
                case 'easy': return 'Kolay';
                case 'medium': return 'Orta';
                case 'hard': return 'Zor';
                default: return difficulty || 'Belirsiz';
            }
        }

        // Soru ekleme modalƒ±
        function showAddQuestionModal() {
            const modal = document.createElement('div');
            modal.className = 'admin-modal';
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0,0,0,0.7);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 10000;
            `;
            
            modal.innerHTML = `
                <div class="admin-modal-content" style="background: white; padding: 30px; border-radius: 10px; width: 90%; max-width: 600px; max-height: 90vh; overflow-y: auto;">
                    <div class="admin-modal-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; border-bottom: 1px solid #ddd; padding-bottom: 15px;">
                        <h3 style="margin: 0;">Yeni Soru Ekle</h3>
                        <button class="close-modal" style="background: none; border: none; font-size: 24px; cursor: pointer; color: #666;">&times;</button>
                    </div>
                    
                    <form id="add-question-form" style="display: flex; flex-direction: column; gap: 15px;">
                        <div>
                            <label style="display: block; margin-bottom: 5px; font-weight: bold;">Soru:</label>
                            <textarea name="question" required style="width: 100%; min-height: 80px; padding: 10px; border: 1px solid #ddd; border-radius: 5px;" placeholder="Sorunuzu buraya yazƒ±n..."></textarea>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <div>
                                <label style="display: block; margin-bottom: 5px; font-weight: bold;">Kategori:</label>
                                <select name="category" required style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                                    <option value="">Kategori Se√ßin</option>
                                    <option value="Genel K√ºlt√ºr">Genel K√ºlt√ºr</option>
                                    <option value="Tarih">Tarih</option>
                                    <option value="Coƒürafya">Coƒürafya</option>
                                    <option value="Fen Bilgisi">Fen Bilgisi</option>
                                    <option value="Teknoloji">Teknoloji</option>
                                    <option value="Spor">Spor</option>
                                    <option value="Sanat">Sanat</option>
                                    <option value="M√ºzik">M√ºzik</option>
                                    <option value="Edebiyat">Edebiyat</option>
                                    <option value="Matematik">Matematik</option>
                                </select>
                            </div>
                            
                            <div>
                                <label style="display: block; margin-bottom: 5px; font-weight: bold;">Zorluk:</label>
                                <select name="difficulty" required style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                                    <option value="">Zorluk Se√ßin</option>
                                    <option value="easy">Kolay</option>
                                    <option value="medium">Orta</option>
                                    <option value="hard">Zor</option>
                                </select>
                            </div>
                        </div>
                        
                        <div>
                            <label style="display: block; margin-bottom: 10px; font-weight: bold;">Se√ßenekler:</label>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                                <input type="text" name="option1" required placeholder="A) Se√ßenek" style="padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                                <input type="text" name="option2" required placeholder="B) Se√ßenek" style="padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                                <input type="text" name="option3" required placeholder="C) Se√ßenek" style="padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                                <input type="text" name="option4" required placeholder="D) Se√ßenek" style="padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                            </div>
                        </div>
                        
                        <div>
                            <label style="display: block; margin-bottom: 5px; font-weight: bold;">Doƒüru Cevap:</label>
                            <select name="correctAnswer" required style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                                <option value="">Doƒüru cevabƒ± se√ßin</option>
                                <option value="0">A</option>
                                <option value="1">B</option>
                                <option value="2">C</option>
                                <option value="3">D</option>
                            </select>
                        </div>
                        
                        <div style="display: flex; gap: 10px; justify-content: flex-end; margin-top: 20px;">
                            <button type="button" class="cancel-modal admin-btn-secondary">ƒ∞ptal</button>
                            <button type="submit" class="admin-btn-primary" style="background: #28a745;">
                                <i class="fas fa-plus"></i> Soru Ekle
                            </button>
                        </div>
                    </form>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // Modal olaylarƒ±
            modal.querySelector('.close-modal').addEventListener('click', () => {
                document.body.removeChild(modal);
            });
            
            modal.querySelector('.cancel-modal').addEventListener('click', () => {
                document.body.removeChild(modal);
            });
            
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    document.body.removeChild(modal);
                }
            });
            
            // Form g√∂nderimi
            modal.querySelector('#add-question-form').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const formData = new FormData(this);
                const questionData = {
                    id: 'admin_' + Date.now(),
                    question: formData.get('question'),
                    category: formData.get('category'),
                    difficulty: formData.get('difficulty'),
                    options: [
                        formData.get('option1'),
                        formData.get('option2'),
                        formData.get('option3'),
                        formData.get('option4')
                    ],
                    correctAnswer: parseInt(formData.get('correctAnswer')),
                    addedBy: firebase.auth()?.currentUser?.email || 'admin',
                    addedAt: new Date().toISOString(),
                    type: 'admin-created'
                };
                
                // Soruyu kaydet
                if (firebase.firestore) {
                    firebase.firestore().collection('adminQuestions').doc(questionData.id).set(questionData)
                        .then(() => {
                            showAdminActionSuccess('Soru ba≈üarƒ±yla eklendi!');
                            loadQuestionsData();
                            document.body.removeChild(modal);
                        })
                        .catch((error) => {
                            console.error('Soru eklenirken hata:', error);
                            showAdminActionSuccess('Soru eklenirken hata olu≈ütu!', 'error');
                        });
                } else {
                    const localQuestions = JSON.parse(localStorage.getItem('adminQuestions') || '[]');
                    localQuestions.push(questionData);
                    localStorage.setItem('adminQuestions', JSON.stringify(localQuestions));
                    showAdminActionSuccess('Soru ba≈üarƒ±yla eklendi! (Local Storage)');
                    loadQuestionsData();
                    document.body.removeChild(modal);
                }
            });
        }

        // Soru d√ºzenleme modalƒ±
        function openEditQuestionModal(question) {
            const modal = document.createElement('div');
            modal.className = 'admin-modal';
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0,0,0,0.7);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 10000;
            `;
            
            modal.innerHTML = `
                <div class="admin-modal-content" style="background: white; padding: 30px; border-radius: 10px; width: 90%; max-width: 600px; max-height: 90vh; overflow-y: auto;">
                    <div class="admin-modal-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; border-bottom: 1px solid #ddd; padding-bottom: 15px;">
                        <h3 style="margin: 0;">Soru D√ºzenle</h3>
                        <button class="close-modal" style="background: none; border: none; font-size: 24px; cursor: pointer; color: #666;">&times;</button>
                    </div>
                    
                    <form id="edit-question-form" style="display: flex; flex-direction: column; gap: 15px;">
                        <div>
                            <label style="display: block; margin-bottom: 5px; font-weight: bold;">Soru:</label>
                            <textarea name="question" required style="width: 100%; min-height: 80px; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">${question.question}</textarea>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <div>
                                <label style="display: block; margin-bottom: 5px; font-weight: bold;">Kategori:</label>
                                <select name="category" required style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                                    <option value="Genel K√ºlt√ºr" ${question.category === 'Genel K√ºlt√ºr' ? 'selected' : ''}>Genel K√ºlt√ºr</option>
                                    <option value="Tarih" ${question.category === 'Tarih' ? 'selected' : ''}>Tarih</option>
                                    <option value="Coƒürafya" ${question.category === 'Coƒürafya' ? 'selected' : ''}>Coƒürafya</option>
                                    <option value="Fen Bilgisi" ${question.category === 'Fen Bilgisi' ? 'selected' : ''}>Fen Bilgisi</option>
                                    <option value="Teknoloji" ${question.category === 'Teknoloji' ? 'selected' : ''}>Teknoloji</option>
                                    <option value="Spor" ${question.category === 'Spor' ? 'selected' : ''}>Spor</option>
                                    <option value="Sanat" ${question.category === 'Sanat' ? 'selected' : ''}>Sanat</option>
                                    <option value="M√ºzik" ${question.category === 'M√ºzik' ? 'selected' : ''}>M√ºzik</option>
                                    <option value="Edebiyat" ${question.category === 'Edebiyat' ? 'selected' : ''}>Edebiyat</option>
                                    <option value="Matematik" ${question.category === 'Matematik' ? 'selected' : ''}>Matematik</option>
                                </select>
                            </div>
                            
                            <div>
                                <label style="display: block; margin-bottom: 5px; font-weight: bold;">Zorluk:</label>
                                <select name="difficulty" required style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                                    <option value="easy" ${question.difficulty === 'easy' ? 'selected' : ''}>Kolay</option>
                                    <option value="medium" ${question.difficulty === 'medium' ? 'selected' : ''}>Orta</option>
                                    <option value="hard" ${question.difficulty === 'hard' ? 'selected' : ''}>Zor</option>
                                </select>
                            </div>
                        </div>
                        
                        <div>
                            <label style="display: block; margin-bottom: 10px; font-weight: bold;">Se√ßenekler:</label>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                                <input type="text" name="option1" required value="${question.options && question.options[0] || ''}" placeholder="A) Se√ßenek" style="padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                                <input type="text" name="option2" required value="${question.options && question.options[1] || ''}" placeholder="B) Se√ßenek" style="padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                                <input type="text" name="option3" required value="${question.options && question.options[2] || ''}" placeholder="C) Se√ßenek" style="padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                                <input type="text" name="option4" required value="${question.options && question.options[3] || ''}" placeholder="D) Se√ßenek" style="padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                            </div>
                        </div>
                        
                        <div>
                            <label style="display: block; margin-bottom: 5px; font-weight: bold;">Doƒüru Cevap:</label>
                            <select name="correctAnswer" required style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                                <option value="0" ${question.correctAnswer === 0 ? 'selected' : ''}>A</option>
                                <option value="1" ${question.correctAnswer === 1 ? 'selected' : ''}>B</option>
                                <option value="2" ${question.correctAnswer === 2 ? 'selected' : ''}>C</option>
                                <option value="3" ${question.correctAnswer === 3 ? 'selected' : ''}>D</option>
                            </select>
                        </div>
                        
                        <div style="display: flex; gap: 10px; justify-content: flex-end; margin-top: 20px;">
                            <button type="button" class="cancel-modal admin-btn-secondary">ƒ∞ptal</button>
                            <button type="submit" class="admin-btn-primary" style="background: #28a745;">
                                <i class="fas fa-save"></i> Kaydet
                            </button>
                        </div>
                    </form>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // Modal olaylarƒ±
            modal.querySelector('.close-modal').addEventListener('click', () => {
                document.body.removeChild(modal);
            });
            
            modal.querySelector('.cancel-modal').addEventListener('click', () => {
                document.body.removeChild(modal);
            });
            
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    document.body.removeChild(modal);
                }
            });
            
            // Form g√∂nderimi
            modal.querySelector('#edit-question-form').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const formData = new FormData(this);
                const updatedQuestion = {
                    ...question,
                    question: formData.get('question'),
                    category: formData.get('category'),
                    difficulty: formData.get('difficulty'),
                    options: [
                        formData.get('option1'),
                        formData.get('option2'),
                        formData.get('option3'),
                        formData.get('option4')
                    ],
                    correctAnswer: parseInt(formData.get('correctAnswer')),
                    lastModified: new Date().toISOString(),
                    modifiedBy: firebase.auth()?.currentUser?.email || 'admin'
                };
                
                // Soruyu g√ºncelle
                if (firebase.firestore) {
                    const collections = ['questions', 'adminQuestions'];
                    Promise.all(collections.map(collection => 
                        firebase.firestore().collection(collection).doc(question.id).set(updatedQuestion, { merge: true })
                    )).then(() => {
                        showAdminActionSuccess('Soru ba≈üarƒ±yla g√ºncellendi!');
                        loadQuestionsData();
                        document.body.removeChild(modal);
                    }).catch((error) => {
                        console.error('Soru g√ºncellenirken hata:', error);
                        showAdminActionSuccess('Soru g√ºncellenirken hata olu≈ütu!', 'error');
                    });
                } else {
                    const localQuestions = JSON.parse(localStorage.getItem('adminQuestions') || '[]');
                    const questionIndex = localQuestions.findIndex(q => q.id === question.id);
                    
                    if (questionIndex !== -1) {
                        localQuestions[questionIndex] = updatedQuestion;
                        localStorage.setItem('adminQuestions', JSON.stringify(localQuestions));
                        showAdminActionSuccess('Soru ba≈üarƒ±yla g√ºncellendi! (Local Storage)');
                        loadQuestionsData();
                        document.body.removeChild(modal);
                    } else {
                        showAdminActionSuccess('Soru bulunamadƒ±!', 'error');
                    }
                }
            });
        }

        // Sorularƒ± i√ße aktar
        function importQuestions() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            input.onchange = function(e) {
                const file = e.target.files[0];
                if (!file) return;
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    try {
                        const questions = JSON.parse(e.target.result);
                        if (!Array.isArray(questions)) {
                            throw new Error('Ge√ßersiz dosya formatƒ±');
                        }
                        
                        // Sorularƒ± ekle
                        if (firebase.firestore) {
                            const batch = firebase.firestore().batch();
                            questions.forEach(question => {
                                const docRef = firebase.firestore().collection('adminQuestions').doc();
                                batch.set(docRef, {
                                    ...question,
                                    id: docRef.id,
                                    importedAt: new Date().toISOString(),
                                    importedBy: firebase.auth()?.currentUser?.email || 'admin'
                                });
                            });
                            
                            batch.commit().then(() => {
                                showAdminActionSuccess(`${questions.length} soru ba≈üarƒ±yla i√ße aktarƒ±ldƒ±!`);
                                loadQuestionsData();
                            }).catch(error => {
                                console.error('ƒ∞√ße aktarma hatasƒ±:', error);
                                showAdminActionSuccess('ƒ∞√ße aktarma sƒ±rasƒ±nda hata olu≈ütu!', 'error');
                            });
                        } else {
                            const localQuestions = JSON.parse(localStorage.getItem('adminQuestions') || '[]');
                            questions.forEach(question => {
                                localQuestions.push({
                                    ...question,
                                    id: 'imported_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9),
                                    importedAt: new Date().toISOString(),
                                    importedBy: 'admin'
                                });
                            });
                            localStorage.setItem('adminQuestions', JSON.stringify(localQuestions));
                            showAdminActionSuccess(`${questions.length} soru ba≈üarƒ±yla i√ße aktarƒ±ldƒ±! (Local Storage)`);
                            loadQuestionsData();
                        }
                    } catch (error) {
                        console.error('Dosya okuma hatasƒ±:', error);
                        alert('Dosya okunamadƒ±. L√ºtfen ge√ßerli bir JSON dosyasƒ± se√ßin.');
                    }
                };
                reader.readAsText(file);
            };
            input.click();
        }

        // Sorularƒ± dƒ±≈üa aktar
        function exportQuestions() {
            if (filteredQuestions.length === 0) {
                alert('Dƒ±≈üa aktarƒ±lacak soru bulunamadƒ±!');
                return;
            }
            
            const dataStr = JSON.stringify(filteredQuestions, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            
            const link = document.createElement('a');
            link.href = URL.createObjectURL(dataBlob);
            link.download = `sorular_${new Date().toISOString().slice(0, 10)}.json`;
            link.click();
            
            showAdminActionSuccess(`${filteredQuestions.length} soru ba≈üarƒ±yla dƒ±≈üa aktarƒ±ldƒ±!`);
        }

        // ≈ûikayetler verilerini y√ºkle
        function loadReportsData() {
            const reportsList = document.getElementById('admin-reports-list');
            if (!reportsList) return;

            // Loading indicator g√∂ster
            reportsList.innerHTML = '<div style="text-align: center; padding: 20px;"><i class="fas fa-spinner fa-spin"></i> ≈ûikayetler y√ºkleniyor...</div>';

            // Filtreleme se√ßenekleri
            const filterValue = document.getElementById('admin-report-filter')?.value || 'all';
            
            if (firebase.firestore) {
                // Firebase'den ≈üikayetleri √ßek
                let query = firebase.firestore().collection('reports');
                
                // Filtre uygula
                if (filterValue !== 'all') {
                    query = query.where('status', '==', filterValue);
                }
                
                query.orderBy('reportedAt', 'desc')
                    .get()
                    .then((querySnapshot) => {
                        if (querySnapshot.empty) {
                            reportsList.innerHTML = '<div style="text-align: center; padding: 20px; color: #666;">≈ûikayet bulunmuyor.</div>';
                            return;
                        }

                        let html = '';
                        querySnapshot.forEach((doc) => {
                            const report = doc.data();
                            const reportId = doc.id;
                            html += generateReportHTML(reportId, report);
                        });

                        reportsList.innerHTML = html;
                        attachReportActionEvents();
                    })
                    .catch((error) => {
                        console.error('≈ûikayetler y√ºklenemedi:', error);
                        reportsList.innerHTML = '<div style="text-align: center; padding: 20px; color: #dc3545;">≈ûikayetler y√ºklenirken hata olu≈ütu.</div>';
                });
            } else {
                // Local storage'dan ≈üikayetleri √ßek
                const localReports = JSON.parse(localStorage.getItem('localReports') || '[]');
                
                // √ñrnek ≈üikayet verisi olu≈ütur (eƒüer yoksa)
                if (localReports.length === 0) {
                    const sampleReports = [
                        {
                            id: 'report_1',
                            type: 'inappropriate_content',
                            reportedBy: 'kullanici456',
                            reportedByEmail: 'user456@example.com',
                            targetType: 'question',
                            targetId: 'Q123',
                            targetContent: 'Bu soru yanlƒ±≈ü bilgi i√ßeriyor',
                            reason: 'Uygunsuz ƒ∞√ßerik',
                            description: 'Bu soru yanlƒ±≈ü bilgi i√ßeriyor ve yanƒ±ltƒ±cƒ±.',
                            status: 'pending',
                            reportedAt: new Date(Date.now() - 86400000).toISOString(), // 1 g√ºn √∂nce
                            reviewedBy: null,
                            reviewedAt: null,
                            adminNotes: ''
                        },
                        {
                            id: 'report_2',
                            type: 'harassment',
                            reportedBy: 'kullanici789',
                            reportedByEmail: 'user789@example.com',
                            targetType: 'user',
                            targetId: 'baduser123',
                            targetContent: 'Kullanƒ±cƒ± sohbette k√ºf√ºr ediyor',
                            reason: 'Taciz/Hakaret',
                            description: 'Bu kullanƒ±cƒ± oyun sohbetinde s√ºrekli k√ºf√ºr ediyor.',
                            status: 'resolved',
                            reportedAt: new Date(Date.now() - 172800000).toISOString(), // 2 g√ºn √∂nce
                            reviewedBy: 'admin@example.com',
                            reviewedAt: new Date(Date.now() - 86400000).toISOString(),
                            adminNotes: 'Kullanƒ±cƒ± 7 g√ºn engellenmi≈ütir.'
                        }
                    ];
                    localStorage.setItem('localReports', JSON.stringify(sampleReports));
                    localReports.push(...sampleReports);
                }
                
                // Filtreleme uygula
                let filteredReports = localReports;
                if (filterValue !== 'all') {
                    filteredReports = localReports.filter(report => report.status === filterValue);
                }
                
                if (filteredReports.length === 0) {
                    reportsList.innerHTML = '<div style="text-align: center; padding: 20px; color: #666;">Bu filtre i√ßin ≈üikayet bulunmuyor.</div>';
                return;
            }

                let html = '';
                filteredReports.forEach((report) => {
                    html += generateReportHTML(report.id, report);
                });

                reportsList.innerHTML = html;
                attachReportActionEvents();
            }
        }

        // ≈ûikayet HTML'i olu≈ütur
        function generateReportHTML(reportId, report) {
            const reportedDate = new Date(report.reportedAt).toLocaleString('tr-TR');
            const reviewedDate = report.reviewedAt ? new Date(report.reviewedAt).toLocaleString('tr-TR') : null;
            
            // Durum rengi
            let statusColor = '#ffc107'; // pending - sarƒ±
            let statusText = 'Bekliyor';
            
            if (report.status === 'resolved') {
                statusColor = '#28a745'; // √ß√∂z√ºlm√º≈ü - ye≈üil
                statusText = '√á√∂z√ºlm√º≈ü';
            } else if (report.status === 'rejected') {
                statusColor = '#dc3545'; // reddedilmi≈ü - kƒ±rmƒ±zƒ±
                statusText = 'Reddedilmi≈ü';
            }
            
            // ≈ûikayet t√ºr√º ikonu
            let typeIcon = 'fas fa-exclamation-triangle';
            if (report.type === 'harassment') typeIcon = 'fas fa-user-slash';
            else if (report.type === 'spam') typeIcon = 'fas fa-ban';
            else if (report.type === 'inappropriate_content') typeIcon = 'fas fa-flag';
            
            return `
                <div class="report-item" data-report-id="${reportId}" style="background: #f8f9fa; padding: 20px; border-radius: 8px; border-left: 4px solid ${statusColor}; margin-bottom: 15px;">
                    <div class="report-header" style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 15px;">
                        <div>
                            <h4 style="margin: 0 0 5px 0; color: #333; display: flex; align-items: center;">
                                <i class="${typeIcon}" style="margin-right: 8px; color: ${statusColor};"></i>
                                ${report.reason}
                            </h4>
                            <div style="font-size: 14px; color: #666;">
                                <strong>≈ûikayet Eden:</strong> ${report.reportedBy} (${report.reportedByEmail || 'E-posta yok'}) |
                                <strong>Hedef:</strong> ${report.targetType === 'question' ? 'Soru' : 'Kullanƒ±cƒ±'} (${report.targetId})
                        </div>
                            <div style="font-size: 12px; color: #888; margin-top: 5px;">
                                <strong>Tarih:</strong> ${reportedDate}
                            </div>
                        </div>
                        <div style="text-align: right;">
                            <span style="background: ${statusColor}; color: white; padding: 4px 8px; border-radius: 4px; font-size: 12px; font-weight: bold;">
                                ${statusText}
                        </span>
                            <div style="font-size: 10px; color: #666; margin-top: 5px;">
                                ID: ${reportId.substring(0, 8)}...
                            </div>
                        </div>
                    </div>
                    
                    <div class="report-content" style="margin-bottom: 15px;">
                        <div style="margin-bottom: 10px;">
                            <strong>ƒ∞√ßerik:</strong> "${report.targetContent}"
                        </div>
                        <div style="margin-bottom: 10px;">
                            <strong>A√ßƒ±klama:</strong> ${report.description}
                        </div>
                        ${report.adminNotes ? `
                            <div style="background: #e8f5e8; padding: 10px; border-radius: 4px; margin-top: 10px;">
                                <strong>Admin Notlarƒ±:</strong> ${report.adminNotes}
                                <br><small><strong>ƒ∞ncelendi:</strong> ${reviewedDate} - ${report.reviewedBy}</small>
                            </div>
                        ` : ''}
                    </div>
                    
                    ${report.status === 'pending' ? `
                        <div class="report-actions" style="display: flex; gap: 10px; justify-content: flex-end;">
                            <button class="admin-btn-primary resolve-report-btn" data-report-id="${reportId}" style="background: #28a745;">
                                <i class="fas fa-check"></i> √á√∂z√ºmlendi
                            </button>
                            <button class="admin-btn-secondary reject-report-btn" data-report-id="${reportId}" style="background: #dc3545;">
                                <i class="fas fa-times"></i> Reddet
                            </button>
                            <button class="admin-btn-secondary view-report-btn" data-report-id="${reportId}" style="background: #17a2b8;">
                                <i class="fas fa-eye"></i> Detay
                            </button>
                        </div>
                    ` : ''}
                </div>
            `;
        }

        // ≈ûikayet aksiyonlarƒ± i√ßin olay dinleyiciler
        function attachReportActionEvents() {
            // √á√∂z√ºmlendi butonlarƒ±
            document.querySelectorAll('.resolve-report-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const reportId = this.getAttribute('data-report-id');
                    resolveReport(reportId);
                });
            });

            // Reddet butonlarƒ±
            document.querySelectorAll('.reject-report-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const reportId = this.getAttribute('data-report-id');
                    rejectReport(reportId);
                });
            });

            // Detay butonlarƒ±
            document.querySelectorAll('.view-report-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const reportId = this.getAttribute('data-report-id');
                    viewReportDetails(reportId);
                });
            });
        }

        // ≈ûikayeti √ß√∂z√ºmle
        function resolveReport(reportId) {
            const adminNote = prompt('√á√∂z√ºm notunuzu girin (opsiyonel):');
            if (adminNote === null) return; // ƒ∞ptal edildi
            
            const resolvedData = {
                status: 'resolved',
                reviewedBy: firebase.auth()?.currentUser?.email || 'admin',
                reviewedAt: new Date().toISOString(),
                adminNotes: adminNote || '≈ûikayet √ß√∂z√ºmlendi.'
            };
            
            if (firebase.firestore) {
                firebase.firestore().collection('reports').doc(reportId).update(resolvedData)
                    .then(() => {
                        showAdminActionSuccess('≈ûikayet ba≈üarƒ±yla √ß√∂z√ºmlendi!');
                        loadReportsData();
                    })
                    .catch((error) => {
                        console.error('≈ûikayet √ß√∂z√ºmlenirken hata:', error);
                        showAdminActionSuccess('≈ûikayet √ß√∂z√ºmlenirken hata olu≈ütu!', 'error');
                    });
            } else {
                const localReports = JSON.parse(localStorage.getItem('localReports') || '[]');
                const reportIndex = localReports.findIndex(r => r.id === reportId);
                
                if (reportIndex !== -1) {
                    Object.assign(localReports[reportIndex], resolvedData);
                    localStorage.setItem('localReports', JSON.stringify(localReports));
                    showAdminActionSuccess('≈ûikayet ba≈üarƒ±yla √ß√∂z√ºmlendi! (Local Storage)');
                    loadReportsData();
                } else {
                    alert('≈ûikayet bulunamadƒ±!');
                }
            }
        }

        // ≈ûikayeti reddet
        function rejectReport(reportId) {
            const rejectReason = prompt('Reddetme nedeninizi girin:');
            if (!rejectReason) return;
            
            const rejectedData = {
                status: 'rejected',
                reviewedBy: firebase.auth()?.currentUser?.email || 'admin',
                reviewedAt: new Date().toISOString(),
                adminNotes: `Reddedildi: ${rejectReason}`
            };
            
            if (firebase.firestore) {
                firebase.firestore().collection('reports').doc(reportId).update(rejectedData)
                    .then(() => {
                        showAdminActionSuccess('≈ûikayet reddedildi!');
                        loadReportsData();
                    })
                    .catch((error) => {
                        console.error('≈ûikayet reddedilirken hata:', error);
                        showAdminActionSuccess('≈ûikayet reddedilirken hata olu≈ütu!', 'error');
                    });
            } else {
                const localReports = JSON.parse(localStorage.getItem('localReports') || '[]');
                const reportIndex = localReports.findIndex(r => r.id === reportId);
                
                if (reportIndex !== -1) {
                    Object.assign(localReports[reportIndex], rejectedData);
                    localStorage.setItem('localReports', JSON.stringify(localReports));
                    showAdminActionSuccess('≈ûikayet reddedildi! (Local Storage)');
                    loadReportsData();
                } else {
                    alert('≈ûikayet bulunamadƒ±!');
                }
            }
        }

        // ≈ûikayet detaylarƒ±nƒ± g√∂r√ºnt√ºle
        function viewReportDetails(reportId) {
            // Report'u bul
            let report = null;
            if (firebase.firestore) {
                firebase.firestore().collection('reports').doc(reportId).get()
                    .then((doc) => {
                        if (doc.exists) {
                            report = doc.data();
                            showReportDetailModal(reportId, report);
                        } else {
                            alert('≈ûikayet bulunamadƒ±!');
                        }
                    })
                    .catch((error) => {
                        console.error('≈ûikayet detaylarƒ± alƒ±namadƒ±:', error);
                        alert('≈ûikayet detaylarƒ± alƒ±nƒ±rken hata olu≈ütu.');
                    });
            } else {
                const localReports = JSON.parse(localStorage.getItem('localReports') || '[]');
                report = localReports.find(r => r.id === reportId);
                if (report) {
                    showReportDetailModal(reportId, report);
                } else {
                    alert('≈ûikayet bulunamadƒ±!');
                }
            }
        }

        // ≈ûikayet detay modalƒ±
        function showReportDetailModal(reportId, report) {
            const modal = document.createElement('div');
            modal.className = 'admin-modal';
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0,0,0,0.7);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 10000;
            `;
            
            const reportedDate = new Date(report.reportedAt).toLocaleString('tr-TR');
            const reviewedDate = report.reviewedAt ? new Date(report.reviewedAt).toLocaleString('tr-TR') : 'Hen√ºz incelenmedi';
            
            modal.innerHTML = `
                <div class="admin-modal-content" style="background: white; padding: 30px; border-radius: 10px; width: 90%; max-width: 600px; max-height: 90vh; overflow-y: auto;">
                    <div class="admin-modal-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; border-bottom: 1px solid #ddd; padding-bottom: 15px;">
                        <h3 style="margin: 0;">≈ûikayet Detaylarƒ±</h3>
                        <button class="close-modal" style="background: none; border: none; font-size: 24px; cursor: pointer; color: #666;">&times;</button>
                    </div>
                    
                    <div style="display: flex; flex-direction: column; gap: 15px;">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <div>
                                <strong>≈ûikayet ID:</strong><br>
                                ${reportId}
                            </div>
                            <div>
                                <strong>Durum:</strong><br>
                                <span style="background: ${report.status === 'pending' ? '#ffc107' : report.status === 'resolved' ? '#28a745' : '#dc3545'}; color: white; padding: 2px 6px; border-radius: 3px; font-size: 12px;">
                                    ${report.status === 'pending' ? 'Bekliyor' : report.status === 'resolved' ? '√á√∂z√ºlm√º≈ü' : 'Reddedilmi≈ü'}
                                </span>
                            </div>
                        </div>
                        
                        <div>
                            <strong>≈ûikayet T√ºr√º:</strong><br>
                            ${report.reason}
                        </div>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <div>
                                <strong>≈ûikayet Eden:</strong><br>
                                ${report.reportedBy}
                            </div>
                            <div>
                                <strong>E-posta:</strong><br>
                                ${report.reportedByEmail || 'Belirtilmemi≈ü'}
                            </div>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <div>
                                <strong>Hedef T√ºr√º:</strong><br>
                                ${report.targetType === 'question' ? 'Soru' : 'Kullanƒ±cƒ±'}
                            </div>
                            <div>
                                <strong>Hedef ID:</strong><br>
                                ${report.targetId}
                            </div>
                        </div>
                        
                        <div>
                            <strong>≈ûikayet Edilen ƒ∞√ßerik:</strong><br>
                            <div style="background: #f8f9fa; padding: 10px; border-radius: 4px; border-left: 3px solid #dc3545;">
                                "${report.targetContent}"
                            </div>
                        </div>
                        
                        <div>
                            <strong>≈ûikayet A√ßƒ±klamasƒ±:</strong><br>
                            <div style="background: #f8f9fa; padding: 10px; border-radius: 4px;">
                                ${report.description}
                            </div>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <div>
                                <strong>≈ûikayet Tarihi:</strong><br>
                                ${reportedDate}
                            </div>
                            <div>
                                <strong>ƒ∞ncelenme Tarihi:</strong><br>
                                ${reviewedDate}
                            </div>
                        </div>
                        
                        ${report.reviewedBy ? `
                            <div>
                                <strong>ƒ∞nceleyen Admin:</strong><br>
                                ${report.reviewedBy}
                            </div>
                        ` : ''}
                        
                        ${report.adminNotes ? `
                            <div>
                                <strong>Admin Notlarƒ±:</strong><br>
                                <div style="background: #e8f5e8; padding: 10px; border-radius: 4px; border-left: 3px solid #28a745;">
                                    ${report.adminNotes}
                                </div>
                            </div>
                        ` : ''}
                        
                        ${report.status === 'pending' ? `
                            <div style="display: flex; gap: 10px; justify-content: flex-end; margin-top: 20px; padding-top: 20px; border-top: 1px solid #ddd;">
                                <button class="admin-btn-primary" onclick="resolveReport('${reportId}'); document.body.removeChild(this.closest('.admin-modal'));" style="background: #28a745;">
                                    <i class="fas fa-check"></i> √á√∂z√ºmlendi
                                </button>
                                <button class="admin-btn-secondary" onclick="rejectReport('${reportId}'); document.body.removeChild(this.closest('.admin-modal'));" style="background: #dc3545;">
                                    <i class="fas fa-times"></i> Reddet
                                </button>
                            </div>
                        ` : ''}
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // Modal olaylarƒ±
            modal.querySelector('.close-modal').addEventListener('click', () => {
                document.body.removeChild(modal);
            });
            
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    document.body.removeChild(modal);
                }
            });
        }

        // Ayar deƒüi≈üikliklerini takip etme
        function setupSettingsChangeTracking() {
            const settingsInputs = document.querySelectorAll('#admin-settings input, #admin-settings select');
            settingsInputs.forEach(input => {
                input.addEventListener('change', function() {
                    markSettingsAsChanged();
                });
            });
        }

        // Ayarlarƒ±n deƒüi≈ütiƒüini i≈üaretle
        function markSettingsAsChanged() {
            const saveBtn = document.getElementById('admin-save-settings');
            if (saveBtn) {
                saveBtn.style.background = '#ff9800';
                saveBtn.innerHTML = '<i class="fas fa-save"></i> Deƒüi≈üiklikleri Kaydet';
            }
        }

        // Ayarlarƒ±n kaydedildiƒüini i≈üaretle
        function markSettingsAsSaved() {
            const saveBtn = document.getElementById('admin-save-settings');
            if (saveBtn) {
                saveBtn.style.background = '#28a745';
                saveBtn.innerHTML = '<i class="fas fa-check"></i> Kaydedildi';
                
                setTimeout(() => {
                    saveBtn.style.background = '#007bff';
                    saveBtn.innerHTML = '<i class="fas fa-save"></i> Ayarlarƒ± Kaydet';
                }, 2000);
            }
        }

        // Ayarlarƒ± dƒ±≈üa aktar
        function exportSettings() {
            const settings = {
                maintenanceMode: document.getElementById('admin-maintenance-mode')?.checked || false,
                allowRegistrations: document.getElementById('admin-allow-registrations')?.checked || false,
                questionApprovalRequired: document.getElementById('admin-question-approval')?.checked || false,
                maxFailedLogins: parseInt(document.getElementById('admin-max-failed-login')?.value) || 5,
                emailNewUser: document.getElementById('admin-email-new-user')?.checked || false,
                emailNewReport: document.getElementById('admin-email-new-report')?.checked || false,
                exportedAt: new Date().toISOString(),
                exportedBy: firebase.auth()?.currentUser?.email || 'admin'
            };
            
            const dataStr = JSON.stringify(settings, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            
            const link = document.createElement('a');
            link.href = URL.createObjectURL(dataBlob);
            link.download = `admin_ayarlari_${new Date().toISOString().slice(0, 10)}.json`;
            link.click();
            
            showAdminActionSuccess('Ayarlar ba≈üarƒ±yla dƒ±≈üa aktarƒ±ldƒ±!');
        }

        // Ayarlarƒ± i√ße aktar
        function importSettings() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            input.onchange = function(e) {
                const file = e.target.files[0];
                if (!file) return;
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    try {
                        const settings = JSON.parse(e.target.result);
                        
                        // Ayarlarƒ± form elementlerine uygula
                        if (settings.maintenanceMode !== undefined) document.getElementById('admin-maintenance-mode').checked = settings.maintenanceMode;
                        if (settings.allowRegistrations !== undefined) document.getElementById('admin-allow-registrations').checked = settings.allowRegistrations;
                        if (settings.questionApprovalRequired !== undefined) document.getElementById('admin-question-approval').checked = settings.questionApprovalRequired;
                        if (settings.maxFailedLogins !== undefined) document.getElementById('admin-max-failed-login').value = settings.maxFailedLogins;
                        if (settings.emailNewUser !== undefined) document.getElementById('admin-email-new-user').checked = settings.emailNewUser;
                        if (settings.emailNewReport !== undefined) document.getElementById('admin-email-new-report').checked = settings.emailNewReport;
                        
                        showAdminActionSuccess('Ayarlar ba≈üarƒ±yla i√ße aktarƒ±ldƒ±!');
                        markSettingsAsChanged();
                        
                    } catch (error) {
                        console.error('Ayarlar dosyasƒ± okuma hatasƒ±:', error);
                        alert('Dosya okunamadƒ±. L√ºtfen ge√ßerli bir ayarlar dosyasƒ± se√ßin.');
                    }
                };
                reader.readAsText(file);
            };
            input.click();
        }

        // ≈ûikayet HTML'i olu≈ütur
        function generateReportHTML(reportId, report) {
            const reportedDate = new Date(report.reportedAt).toLocaleString('tr-TR');
            const reviewedDate = report.reviewedAt ? new Date(report.reviewedAt).toLocaleString('tr-TR') : null;
            
            // Durum rengi
            let statusColor = '#ffc107'; // pending - sarƒ±
            let statusText = 'Bekliyor';
            
            if (report.status === 'resolved') {
                statusColor = '#28a745'; // √ß√∂z√ºlm√º≈ü - ye≈üil
                statusText = '√á√∂z√ºlm√º≈ü';
            } else if (report.status === 'rejected') {
                statusColor = '#dc3545'; // reddedilmi≈ü - kƒ±rmƒ±zƒ±
                statusText = 'Reddedilmi≈ü';
            }
            
            // ≈ûikayet t√ºr√º ikonu
            let typeIcon = 'fas fa-exclamation-triangle';
            if (report.type === 'harassment') typeIcon = 'fas fa-user-slash';
            else if (report.type === 'spam') typeIcon = 'fas fa-ban';
            else if (report.type === 'inappropriate_content') typeIcon = 'fas fa-flag';
            
            return `
                <div class="report-item" data-report-id="${reportId}" style="background: #f8f9fa; padding: 20px; border-radius: 8px; border-left: 4px solid ${statusColor}; margin-bottom: 15px;">
                    <div class="report-header" style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 15px;">
                        <div>
                            <h4 style="margin: 0 0 5px 0; color: #333; display: flex; align-items: center;">
                                <i class="${typeIcon}" style="margin-right: 8px; color: ${statusColor};"></i>
                                ${report.reason}
                            </h4>
                            <div style="font-size: 14px; color: #666;">
                                <strong>≈ûikayet Eden:</strong> ${report.reportedBy} (${report.reportedByEmail || 'E-posta yok'}) |
                                <strong>Hedef:</strong> ${report.targetType === 'question' ? 'Soru' : 'Kullanƒ±cƒ±'} (${report.targetId})
                        </div>
                            <div style="font-size: 12px; color: #888; margin-top: 5px;">
                                <strong>Tarih:</strong> ${reportedDate}
                            </div>
                        </div>
                        <div style="text-align: right;">
                            <span style="background: ${statusColor}; color: white; padding: 4px 8px; border-radius: 4px; font-size: 12px; font-weight: bold;">
                                ${statusText}
                        </span>
                            <div style="font-size: 10px; color: #666; margin-top: 5px;">
                                ID: ${reportId.substring(0, 8)}...
                            </div>
                        </div>
                    </div>
                    
                    <div class="report-content" style="margin-bottom: 15px;">
                        <div style="margin-bottom: 10px;">
                            <strong>ƒ∞√ßerik:</strong> "${report.targetContent}"
                        </div>
                        <div style="margin-bottom: 10px;">
                            <strong>A√ßƒ±klama:</strong> ${report.description}
                        </div>
                        ${report.adminNotes ? `
                            <div style="background: #e8f5e8; padding: 10px; border-radius: 4px; margin-top: 10px;">
                                <strong>Admin Notlarƒ±:</strong> ${report.adminNotes}
                                <br><small><strong>ƒ∞ncelendi:</strong> ${reviewedDate} - ${report.reviewedBy}</small>
                            </div>
                        ` : ''}
                    </div>
                    
                    <div class="report-actions" style="display: flex; gap: 10px; justify-content: flex-end;">
                        ${report.status === 'pending' ? `
                            <button class="admin-btn-primary resolve-report-btn" data-report-id="${reportId}" style="margin-right: 10px;">
                                <i class="fas fa-check"></i> √á√∂z
                            </button>
                            <button class="admin-btn-secondary reject-report-btn" data-report-id="${reportId}" style="background: #dc3545;">
                                <i class="fas fa-times"></i> Reddet
                            </button>
                        ` : ''}
                        <button class="admin-btn-secondary view-report-details-btn" data-report-id="${reportId}" style="background: #6c757d;">
                            <i class="fas fa-eye"></i> Detaylarƒ± G√∂r
                        </button>
                    </div>
                </div>
            `;
        }

        // ≈ûikayet aksiyonlarƒ± i√ßin olay dinleyiciler
        function attachReportActionEvents() {
            // √á√∂z butonlarƒ±
            document.querySelectorAll('.resolve-report-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const reportId = this.getAttribute('data-report-id');
                    resolveReport(reportId);
                });
            });

            // Reddet butonlarƒ±
            document.querySelectorAll('.reject-report-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const reportId = this.getAttribute('data-report-id');
                    rejectReport(reportId);
                });
            });

            // Detaylarƒ± g√∂r butonlarƒ±
            document.querySelectorAll('.view-report-details-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const reportId = this.getAttribute('data-report-id');
                    viewReportDetails(reportId);
                });
            });
        }

        // ≈ûikayeti √ß√∂z
        function resolveReport(reportId) {
            const adminNotes = prompt('√á√∂z√ºm notlarƒ± (opsiyonel):');
            if (adminNotes === null) return; // ƒ∞ptal edildi

            const updateData = {
                status: 'resolved',
                reviewedBy: firebase.auth()?.currentUser?.email || 'admin',
                reviewedAt: new Date().toISOString(),
                adminNotes: adminNotes || '≈ûikayet incelendi ve √ß√∂z√ºld√º.'
            };

            if (firebase.firestore) {
                firebase.firestore().collection('reports').doc(reportId).update(updateData)
                    .then(() => {
                        showAdminActionSuccess('≈ûikayet √ß√∂z√ºld√º olarak i≈üaretlendi!');
                        loadReportsData();
                    })
                    .catch((error) => {
                        console.error('≈ûikayet g√ºncellenirken hata:', error);
                        alert('≈ûikayet g√ºncellenirken hata olu≈ütu.');
                    });
            } else {
                const localReports = JSON.parse(localStorage.getItem('localReports') || '[]');
                const reportIndex = localReports.findIndex(r => r.id === reportId);
                
                if (reportIndex !== -1) {
                    Object.assign(localReports[reportIndex], updateData);
                    localStorage.setItem('localReports', JSON.stringify(localReports));
                    
                    showAdminActionSuccess('≈ûikayet √ß√∂z√ºld√º! (Local Storage)');
                    loadReportsData();
                } else {
                    alert('≈ûikayet bulunamadƒ±!');
                }
            }
        }

        // ≈ûikayeti reddet
        function rejectReport(reportId) {
            const reason = prompt('Ret sebebi:');
            if (!reason) return;

            const updateData = {
                status: 'rejected',
                reviewedBy: firebase.auth()?.currentUser?.email || 'admin',
                reviewedAt: new Date().toISOString(),
                adminNotes: `Reddedildi: ${reason}`
            };

            if (firebase.firestore) {
                firebase.firestore().collection('reports').doc(reportId).update(updateData)
                    .then(() => {
                        showAdminActionSuccess('≈ûikayet reddedildi!');
                        loadReportsData();
                    })
                    .catch((error) => {
                        console.error('≈ûikayet g√ºncellenirken hata:', error);
                        alert('≈ûikayet g√ºncellenirken hata olu≈ütu.');
                    });
            } else {
                const localReports = JSON.parse(localStorage.getItem('localReports') || '[]');
                const reportIndex = localReports.findIndex(r => r.id === reportId);
                
                if (reportIndex !== -1) {
                    Object.assign(localReports[reportIndex], updateData);
                    localStorage.setItem('localReports', JSON.stringify(localReports));
                    
                    showAdminActionSuccess('≈ûikayet reddedildi! (Local Storage)');
                    loadReportsData();
                } else {
                    alert('≈ûikayet bulunamadƒ±!');
                }
            }
        }

        // ≈ûikayet detaylarƒ±nƒ± g√∂r√ºnt√ºle
        function viewReportDetails(reportId) {
            let reportData = null;

            if (firebase.firestore) {
                firebase.firestore().collection('reports').doc(reportId).get()
                    .then((doc) => {
                        if (doc.exists) {
                            reportData = doc.data();
                            showReportDetailsModal(reportId, reportData);
                        } else {
                            alert('≈ûikayet bulunamadƒ±!');
                        }
                    })
                    .catch((error) => {
                        console.error('≈ûikayet detaylarƒ± alƒ±namadƒ±:', error);
                        alert('≈ûikayet detaylarƒ± alƒ±nƒ±rken hata olu≈ütu.');
                    });
            } else {
                const localReports = JSON.parse(localStorage.getItem('localReports') || '[]');
                reportData = localReports.find(r => r.id === reportId);
                
                if (reportData) {
                    showReportDetailsModal(reportId, reportData);
                } else {
                    alert('≈ûikayet bulunamadƒ±!');
                }
            }
        }

        // ≈ûikayet detaylarƒ± modalƒ±
        function showReportDetailsModal(reportId, reportData) {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0,0,0,0.5);
                z-index: 10002;
                display: flex;
                align-items: center;
                justify-content: center;
            `;
            
            const reportedDate = new Date(reportData.reportedAt).toLocaleString('tr-TR');
            const reviewedDate = reportData.reviewedAt ? new Date(reportData.reviewedAt).toLocaleString('tr-TR') : 'Hen√ºz incelenmedi';
            
            modal.innerHTML = `
                <div style="background: white; padding: 30px; border-radius: 10px; max-width: 600px; width: 90%; max-height: 80vh; overflow-y: auto;">
                    <h3 style="margin-top: 0; border-bottom: 2px solid #eee; padding-bottom: 10px;">≈ûikayet Detaylarƒ±</h3>
                    
                    <div style="margin-bottom: 20px;">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                            <div>
                                <strong>≈ûikayet ID:</strong><br>
                                <code style="background: #f8f9fa; padding: 2px 4px; border-radius: 3px;">${reportId}</code>
                            </div>
                            <div>
                                <strong>Durum:</strong><br>
                                <span style="background: ${reportData.status === 'pending' ? '#ffc107' : reportData.status === 'resolved' ? '#28a745' : '#dc3545'}; color: white; padding: 4px 8px; border-radius: 4px; font-size: 12px;">
                                    ${reportData.status === 'pending' ? 'Bekliyor' : reportData.status === 'resolved' ? '√á√∂z√ºlm√º≈ü' : 'Reddedilmi≈ü'}
                                </span>
                            </div>
                        </div>
                    </div>
                    
                    <div style="margin-bottom: 20px;">
                        <strong>≈ûikayet T√ºr√º:</strong><br>
                        ${reportData.reason}
                    </div>
                    
                    <div style="margin-bottom: 20px;">
                        <strong>≈ûikayet Eden:</strong><br>
                        ${reportData.reportedBy} (${reportData.reportedByEmail || 'E-posta yok'})
                    </div>
                    
                    <div style="margin-bottom: 20px;">
                        <strong>Hedef:</strong><br>
                        ${reportData.targetType === 'question' ? 'Soru' : 'Kullanƒ±cƒ±'} - ${reportData.targetId}
                    </div>
                    
                    <div style="margin-bottom: 20px;">
                        <strong>≈ûikayet Edilen ƒ∞√ßerik:</strong><br>
                        <div style="background: #f8f9fa; padding: 10px; border-radius: 4px; border-left: 4px solid #dc3545;">
                            "${reportData.targetContent}"
                        </div>
                    </div>
                    
                    <div style="margin-bottom: 20px;">
                        <strong>A√ßƒ±klama:</strong><br>
                        <div style="background: #f8f9fa; padding: 10px; border-radius: 4px;">
                            ${reportData.description}
                        </div>
                    </div>
                    
                    <div style="margin-bottom: 20px;">
                        <strong>Tarih:</strong><br>
                        ${reportedDate}
                    </div>
                    
                    ${reportData.adminNotes ? `
                        <div style="margin-bottom: 20px;">
                            <strong>Admin Notlarƒ±:</strong><br>
                            <div style="background: #e8f5e8; padding: 10px; border-radius: 4px; border-left: 4px solid #28a745;">
                                ${reportData.adminNotes}
                                <br><small><strong>ƒ∞ncelendi:</strong> ${reviewedDate} - ${reportData.reviewedBy}</small>
                            </div>
                        </div>
                    ` : ''}
                    
                    <div style="display: flex; gap: 10px; justify-content: flex-end; border-top: 1px solid #eee; padding-top: 20px; margin-top: 20px;">
                        <button id="close-report-details" style="background: #6c757d; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer;">
                            <i class="fas fa-times"></i> Kapat
                            </button>
                        </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // Kapat butonu
            document.getElementById('close-report-details').addEventListener('click', function() {
                document.body.removeChild(modal);
            });
            
            // Modal dƒ±≈üƒ±na tƒ±klayƒ±nca kapat
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    document.body.removeChild(modal);
                }
            });
        }

        // Ayarlar verilerini y√ºkle
        function loadSettingsData() {
            console.log('Ayarlar y√ºkleniyor...');
            
            if (firebase.firestore) {
                // Firebase'den ayarlarƒ± y√ºkle
                firebase.firestore().collection('admin-settings').doc('app-settings').get()
                    .then((doc) => {
                        let settings = {};
                        
                        if (doc.exists) {
                            settings = doc.data();
                        } else {
                            // Varsayƒ±lan ayarlar
                            settings = getDefaultSettings();
                            // Firebase'e varsayƒ±lan ayarlarƒ± kaydet
                            firebase.firestore().collection('admin-settings').doc('app-settings').set(settings);
                        }
                        
                        applySettingsToUI(settings);
                    })
                    .catch((error) => {
                        console.error('Ayarlar y√ºklenirken hata:', error);
                        // Hata durumunda varsayƒ±lan ayarlarƒ± kullan
                        const defaultSettings = getDefaultSettings();
                        applySettingsToUI(defaultSettings);
                    });
            } else {
                // Local storage'dan ayarlarƒ± y√ºkle
                const localSettings = JSON.parse(localStorage.getItem('adminSettings') || 'null');
                
                if (localSettings) {
                    applySettingsToUI(localSettings);
                } else {
                    // Varsayƒ±lan ayarlarƒ± olu≈ütur ve kaydet
                    const defaultSettings = getDefaultSettings();
                    localStorage.setItem('adminSettings', JSON.stringify(defaultSettings));
                    applySettingsToUI(defaultSettings);
                }
            }
        }

        // Varsayƒ±lan ayarlarƒ± d√∂nd√ºr
        function getDefaultSettings() {
            return {
                // Genel Ayarlar
                maintenanceMode: false,
                allowRegistrations: true,
                questionApprovalRequired: true,
                maxFailedLogins: 5,
                
                // E-posta Bildirimleri
                emailNewUser: true,
                emailNewReport: true,
                
                // Diƒüer ayarlar
                lastUpdated: new Date().toISOString(),
                updatedBy: firebase.auth()?.currentUser?.email || 'admin'
            };
        }

        // Ayarlarƒ± UI'ya uygula
        function applySettingsToUI(settings) {
            // Genel Ayarlar
            const maintenanceModeToggle = document.getElementById('admin-maintenance-mode');
            const allowRegistrationsToggle = document.getElementById('admin-allow-registrations');
            const questionApprovalToggle = document.getElementById('admin-question-approval');
            const maxFailedLoginsInput = document.getElementById('admin-max-failed-login');
            
            // E-posta Bildirimleri
            const emailNewUserToggle = document.getElementById('admin-email-new-user');
            const emailNewReportToggle = document.getElementById('admin-email-new-report');
            
            // Ayarlarƒ± form elementlerine uygula
            if (maintenanceModeToggle) maintenanceModeToggle.checked = settings.maintenanceMode || false;
            if (allowRegistrationsToggle) allowRegistrationsToggle.checked = settings.allowRegistrations !== false;
            if (questionApprovalToggle) questionApprovalToggle.checked = settings.questionApprovalRequired !== false;
            if (maxFailedLoginsInput) maxFailedLoginsInput.value = settings.maxFailedLogins || 5;
            
            if (emailNewUserToggle) emailNewUserToggle.checked = settings.emailNewUser !== false;
            if (emailNewReportToggle) emailNewReportToggle.checked = settings.emailNewReport !== false;
            
            console.log('Ayarlar UI\'ya uygulandƒ±:', settings);
            
            // Bakƒ±m modu uyarƒ±sƒ± g√∂ster
            if (settings.maintenanceMode) {
                showMaintenanceModeWarning();
            }
        }

        // Ayarlarƒ± kaydet
        function saveAdminSettings() {
            // Form verilerini topla
            const settings = {
                // Genel Ayarlar
                maintenanceMode: document.getElementById('admin-maintenance-mode')?.checked || false,
                allowRegistrations: document.getElementById('admin-allow-registrations')?.checked || false,
                questionApprovalRequired: document.getElementById('admin-question-approval')?.checked || false,
                maxFailedLogins: parseInt(document.getElementById('admin-max-failed-login')?.value) || 5,
                
                // E-posta Bildirimleri
                emailNewUser: document.getElementById('admin-email-new-user')?.checked || false,
                emailNewReport: document.getElementById('admin-email-new-report')?.checked || false,
                
                // Meta bilgiler
                lastUpdated: new Date().toISOString(),
                updatedBy: firebase.auth()?.currentUser?.email || 'admin'
            };

            if (firebase.firestore) {
                // Firebase'e kaydet
                firebase.firestore().collection('admin-settings').doc('app-settings').set(settings)
                    .then(() => {
                        showAdminActionSuccess('Ayarlar ba≈üarƒ±yla kaydedildi!');
                        console.log('Ayarlar Firebase\'e kaydedildi:', settings);
                        markSettingsAsSaved(); // Kaydet butonunu normale d√∂nd√ºr
                        
                        // Bakƒ±m modu uyarƒ±sƒ±
                        if (settings.maintenanceMode) {
                            showMaintenanceModeWarning();
                        }
                    })
                    .catch((error) => {
                        console.error('Ayarlar kaydedilirken hata:', error);
                        showAdminActionSuccess('Ayarlar kaydedilirken hata olu≈ütu!', 'error');
                    });
            } else {
                // Local storage'a kaydet
                localStorage.setItem('adminSettings', JSON.stringify(settings));
                showAdminActionSuccess('Ayarlar ba≈üarƒ±yla kaydedildi! (Local Storage)');
                console.log('Ayarlar Local Storage\'a kaydedildi:', settings);
                markSettingsAsSaved(); // Kaydet butonunu normale d√∂nd√ºr
                
                // Bakƒ±m modu uyarƒ±sƒ±
                if (settings.maintenanceMode) {
                    showMaintenanceModeWarning();
                }
            }
        }

        // Ayarlarƒ± varsayƒ±lana sƒ±fƒ±rla
        function resetAdminSettings() {
            if (!confirm('T√ºm ayarlarƒ± varsayƒ±lan deƒüerlere sƒ±fƒ±rlamak istediƒüinizden emin misiniz?\n\nBu i≈ülem geri alƒ±namaz.')) {
                return;
            }

            const defaultSettings = getDefaultSettings();

            if (firebase.firestore) {
                // Firebase'de sƒ±fƒ±rla
                firebase.firestore().collection('admin-settings').doc('app-settings').set(defaultSettings)
                    .then(() => {
                        showAdminActionSuccess('Ayarlar varsayƒ±lana sƒ±fƒ±rlandƒ±!');
                        applySettingsToUI(defaultSettings);
                        console.log('Ayarlar varsayƒ±lana sƒ±fƒ±rlandƒ±');
                    })
                    .catch((error) => {
                        console.error('Ayarlar sƒ±fƒ±rlanƒ±rken hata:', error);
                        showAdminActionSuccess('Ayarlar sƒ±fƒ±rlanƒ±rken hata olu≈ütu!', 'error');
                    });
            } else {
                // Local storage'da sƒ±fƒ±rla
                localStorage.setItem('adminSettings', JSON.stringify(defaultSettings));
                showAdminActionSuccess('Ayarlar varsayƒ±lana sƒ±fƒ±rlandƒ±! (Local Storage)');
                applySettingsToUI(defaultSettings);
                console.log('Ayarlar varsayƒ±lana sƒ±fƒ±rlandƒ± (Local Storage)');
            }
        }

        // Bakƒ±m modu uyarƒ±sƒ±
        function showMaintenanceModeWarning() {
            const warningMsg = document.createElement('div');
            warningMsg.style.cssText = `
                position: fixed;
                top: 20px;
                left: 50%;
                transform: translateX(-50%);
                background: linear-gradient(135deg, #ff9800, #f57c00);
                color: white;
                padding: 15px 25px;
                border-radius: 8px;
                box-shadow: 0 4px 15px rgba(255, 152, 0, 0.3);
                z-index: 10003;
                font-family: Arial, sans-serif;
                text-align: center;
                max-width: 400px;
                animation: slideDown 0.5s ease;
            `;
            warningMsg.innerHTML = `
                <div style="display: flex; align-items: center; justify-content: center;">
                    <i class="fas fa-exclamation-triangle" style="margin-right: 10px; font-size: 18px;"></i>
                    <div>
                        <strong>Bakƒ±m Modu Aktif!</strong><br>
                        <small>Uygulama kullanƒ±cƒ±lar i√ßin kapalƒ±.</small>
                        </div>
                    </div>
                `;
            
            document.body.appendChild(warningMsg);
            
            setTimeout(() => {
                warningMsg.style.opacity = '0';
                warningMsg.style.transition = 'opacity 0.5s';
                setTimeout(() => {
                    if (warningMsg.parentNode) {
                        document.body.removeChild(warningMsg);
                    }
                }, 500);
            }, 5000);
        }

        // Yeni soru modalƒ± olu≈ütur
        function createAddQuestionModal() {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                background: rgba(0,0,0,0.6); z-index: 10000; display: flex;
                justify-content: center; align-items: center; padding: 20px;
                backdrop-filter: blur(5px); animation: fadeIn 0.3s ease-out;
            `;

            // √áeviri fonksiyonunu kullan
            const getTranslation = window.QuizGame ? window.QuizGame.getTranslation.bind(window.QuizGame) : (key) => key;

            modal.innerHTML = `
                <style>
                    @keyframes fadeIn {
                        from { opacity: 0; }
                        to { opacity: 1; }
                    }
                    
                    @keyframes fadeOut {
                        from { opacity: 1; }
                        to { opacity: 0; }
                    }
                    
                    @keyframes slideIn {
                        from { transform: translateY(-20px) scale(0.95); opacity: 0; }
                        to { transform: translateY(0) scale(1); opacity: 1; }
                    }
                </style>
                <div style="
                    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                    border-radius: 20px; padding: 2px; max-width: 650px; width: 100%; 
                    max-height: 90vh; overflow-y: auto; box-shadow: 0 25px 50px rgba(0,0,0,0.3);
                    animation: slideIn 0.3s ease-out;
                ">
                    <div style="
                        background: white; border-radius: 18px; padding: 30px;
                        box-shadow: inset 0 1px 0 rgba(255,255,255,0.1);
                    ">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;">
                            <h3 style="
                                color: #2d3748; font-size: 24px; font-weight: 700; margin: 0;
                                background: linear-gradient(135deg, #667eea, #764ba2);
                                -webkit-background-clip: text; -webkit-text-fill-color: transparent;
                                background-clip: text;
                            ">
                                <i class="fas fa-plus" style="margin-right: 10px;"></i> ${getTranslation('addQuestionModal')}
                            </h3>
                            <button class="close-modal" style="
                                background: #f7fafc; border: none; width: 40px; height: 40px;
                                border-radius: 50%; cursor: pointer; display: flex; align-items: center;
                                justify-content: center; font-size: 18px; color: #a0aec0;
                                transition: all 0.2s ease; box-shadow: 0 2px 4px rgba(0,0,0,0.1);
                            " onmouseover="this.style.background='#fed7d7'; this.style.color='#e53e3e'; this.style.transform='scale(1.1)'"
                               onmouseout="this.style.background='#f7fafc'; this.style.color='#a0aec0'; this.style.transform='scale(1)'">&times;</button>
                    </div>
                    
                    <form id="add-question-form">
                            <div style="margin-bottom: 20px;">
                                <label style="
                                    display: block; margin-bottom: 8px; font-weight: 600; color: #2d3748;
                                    font-size: 14px; text-transform: uppercase; letter-spacing: 0.5px;
                                ">üìö ${getTranslation('questionCategory')}</label>
                                <select id="new-question-category" required style="
                                    width: 100%; padding: 12px 15px; border: 2px solid #e2e8f0;
                                    border-radius: 12px; font-size: 16px; background: white;
                                    transition: all 0.2s ease; box-shadow: 0 2px 4px rgba(0,0,0,0.05);
                                " onfocus="this.style.borderColor='#667eea'; this.style.boxShadow='0 0 0 3px rgba(102,126,234,0.1)'"
                                   onblur="this.style.borderColor='#e2e8f0'; this.style.boxShadow='0 2px 4px rgba(0,0,0,0.05)'">
                                    <option value="">üéØ ${getTranslation('selectCategory')}</option>
                                    <option value="Genel K√ºlt√ºr">üåç ${getTranslation('categoryGeneral')}</option>
                                    <option value="Teknoloji">üíª ${getTranslation('categoryTechnology')}</option>
                                    <option value="Tarih">üèõÔ∏è ${getTranslation('categoryHistory')}</option>
                                    <option value="Spor">‚öΩ ${getTranslation('categorySports')}</option>
                                    <option value="Bilim">üî¨ ${getTranslation('categoryScience')}</option>
                                    <option value="Sanat">üé® ${getTranslation('categoryArt')}</option>
                                    <option value="Edebiyat">üìñ ${getTranslation('categoryLiterature')}</option>
                                    <option value="Coƒürafya">üó∫Ô∏è ${getTranslation('categoryGeography')}</option>
                                    <option value="Matematik">üî¢ ${getTranslation('categoryMath')}</option>
                                    <option value="M√ºzik">üéµ ${getTranslation('categoryMusic')}</option>
                            </select>
                    </div>
                        
                            <div style="margin-bottom: 20px;">
                                <label style="
                                    display: block; margin-bottom: 8px; font-weight: 600; color: #2d3748;
                                    font-size: 14px; text-transform: uppercase; letter-spacing: 0.5px;
                                ">‚ùì ${getTranslation('questionText')}</label>
                                <textarea id="new-question-text" required style="
                                    width: 100%; padding: 15px; border: 2px solid #e2e8f0;
                                    border-radius: 12px; height: 100px; resize: vertical; font-size: 16px;
                                    font-family: inherit; line-height: 1.5; background: white;
                                    transition: all 0.2s ease; box-shadow: 0 2px 4px rgba(0,0,0,0.05);
                                " placeholder="${getTranslation('questionPlaceholder')}" 
                                   onfocus="this.style.borderColor='#667eea'; this.style.boxShadow='0 0 0 3px rgba(102,126,234,0.1)'"
                                   onblur="this.style.borderColor='#e2e8f0'; this.style.boxShadow='0 2px 4px rgba(0,0,0,0.05)'"></textarea>
                        </div>
                        
                            <div style="margin-bottom: 20px;">
                                <label style="
                                    display: block; margin-bottom: 12px; font-weight: 600; color: #2d3748;
                                    font-size: 14px; text-transform: uppercase; letter-spacing: 0.5px;
                                ">üìù Se√ßenekler</label>
                                <div style="display: grid; gap: 12px;">
                                    <input type="text" id="new-option-a" placeholder="üÖ∞Ô∏è A se√ßeneƒüi" required style="
                                        width: 100%; padding: 12px 15px; border: 2px solid #e2e8f0;
                                        border-radius: 12px; font-size: 16px; background: white;
                                        transition: all 0.2s ease; box-shadow: 0 2px 4px rgba(0,0,0,0.05);
                                    " onfocus="this.style.borderColor='#667eea'; this.style.boxShadow='0 0 0 3px rgba(102,126,234,0.1)'"
                                       onblur="this.style.borderColor='#e2e8f0'; this.style.boxShadow='0 2px 4px rgba(0,0,0,0.05)'">
                                    <input type="text" id="new-option-b" placeholder="üÖ±Ô∏è B se√ßeneƒüi" required style="
                                        width: 100%; padding: 12px 15px; border: 2px solid #e2e8f0;
                                        border-radius: 12px; font-size: 16px; background: white;
                                        transition: all 0.2s ease; box-shadow: 0 2px 4px rgba(0,0,0,0.05);
                                    " onfocus="this.style.borderColor='#667eea'; this.style.boxShadow='0 0 0 3px rgba(102,126,234,0.1)'"
                                       onblur="this.style.borderColor='#e2e8f0'; this.style.boxShadow='0 2px 4px rgba(0,0,0,0.05)'">
                                    <input type="text" id="new-option-c" placeholder="üÖæÔ∏è C se√ßeneƒüi" required style="
                                        width: 100%; padding: 12px 15px; border: 2px solid #e2e8f0;
                                        border-radius: 12px; font-size: 16px; background: white;
                                        transition: all 0.2s ease; box-shadow: 0 2px 4px rgba(0,0,0,0.05);
                                    " onfocus="this.style.borderColor='#667eea'; this.style.boxShadow='0 0 0 3px rgba(102,126,234,0.1)'"
                                       onblur="this.style.borderColor='#e2e8f0'; this.style.boxShadow='0 2px 4px rgba(0,0,0,0.05)'">
                                    <input type="text" id="new-option-d" placeholder="üî¥ D se√ßeneƒüi" required style="
                                        width: 100%; padding: 12px 15px; border: 2px solid #e2e8f0;
                                        border-radius: 12px; font-size: 16px; background: white;
                                        transition: all 0.2s ease; box-shadow: 0 2px 4px rgba(0,0,0,0.05);
                                    " onfocus="this.style.borderColor='#667eea'; this.style.boxShadow='0 0 0 3px rgba(102,126,234,0.1)'"
                                       onblur="this.style.borderColor='#e2e8f0'; this.style.boxShadow='0 2px 4px rgba(0,0,0,0.05)'">
                                </div>
                        </div>
                        
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 25px;">
                                <div>
                                    <label style="
                                        display: block; margin-bottom: 8px; font-weight: 600; color: #2d3748;
                                        font-size: 14px; text-transform: uppercase; letter-spacing: 0.5px;
                                    ">‚úÖ Doƒüru Cevap</label>
                                    <select id="new-correct-answer" required style="
                                        width: 100%; padding: 12px 15px; border: 2px solid #e2e8f0;
                                        border-radius: 12px; font-size: 16px; background: white;
                                        transition: all 0.2s ease; box-shadow: 0 2px 4px rgba(0,0,0,0.05);
                                    " onfocus="this.style.borderColor='#48bb78'; this.style.boxShadow='0 0 0 3px rgba(72,187,120,0.1)'"
                                       onblur="this.style.borderColor='#e2e8f0'; this.style.boxShadow='0 2px 4px rgba(0,0,0,0.05)'">
                                        <option value="">Doƒüru cevap</option>
                                        <option value="0">üÖ∞Ô∏è A Se√ßeneƒüi</option>
                                        <option value="1">üÖ±Ô∏è B Se√ßeneƒüi</option>
                                        <option value="2">üÖæÔ∏è C Se√ßeneƒüi</option>
                                        <option value="3">üî¥ D Se√ßeneƒüi</option>
                            </select>
                        </div>
                        
                                <div>
                                    <label style="
                                        display: block; margin-bottom: 8px; font-weight: 600; color: #2d3748;
                                        font-size: 14px; text-transform: uppercase; letter-spacing: 0.5px;
                                    ">‚ö° Zorluk</label>
                                    <select id="new-question-difficulty" required style="
                                        width: 100%; padding: 12px 15px; border: 2px solid #e2e8f0;
                                        border-radius: 12px; font-size: 16px; background: white;
                                        transition: all 0.2s ease; box-shadow: 0 2px 4px rgba(0,0,0,0.05);
                                    " onfocus="this.style.borderColor='#ed8936'; this.style.boxShadow='0 0 0 3px rgba(237,137,54,0.1)'"
                                       onblur="this.style.borderColor='#e2e8f0'; this.style.boxShadow='0 2px 4px rgba(0,0,0,0.05)'">
                                <option value="">Zorluk se√ßin</option>
                                        <option value="Kolay">üü¢ Kolay</option>
                                        <option value="Orta">üü° Orta</option>
                                        <option value="Zor">üî¥ Zor</option>
                            </select>
                                </div>
                        </div>
                        
                            <div style="display: flex; gap: 15px; justify-content: flex-end; padding-top: 20px; border-top: 1px solid #e2e8f0;">
                                <button type="button" class="close-modal" style="
                                    padding: 12px 24px; background: linear-gradient(135deg, #a0aec0, #718096);
                                    color: white; border: none; border-radius: 12px; cursor: pointer;
                                    font-weight: 600; font-size: 16px; transition: all 0.3s ease;
                                    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                                " onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 20px rgba(0,0,0,0.2)'"
                                   onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 12px rgba(0,0,0,0.15)'">
                                    ‚ùå ƒ∞ptal
                                </button>
                                <button type="submit" style="
                                    padding: 12px 24px; background: linear-gradient(135deg, #48bb78, #38a169);
                                    color: white; border: none; border-radius: 12px; cursor: pointer;
                                    font-weight: 600; font-size: 16px; transition: all 0.3s ease;
                                    box-shadow: 0 4px 12px rgba(72,187,120,0.3);
                                " onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 20px rgba(72,187,120,0.4)'"
                                   onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 12px rgba(72,187,120,0.3)'">
                                    ‚úÖ Soru Ekle
                                </button>
                        </div>
                    </form>
                    </div>
                    </div>
                `;

            // Modalƒ± kapatma
            modal.querySelectorAll('.close-modal').forEach(btn => {
                btn.addEventListener('click', () => modal.remove());
            });

            // Modal dƒ±≈üƒ±na tƒ±klayƒ±nca kapat
            modal.addEventListener('click', (e) => {
                if (e.target === modal) modal.remove();
            });

            // Form submit
            modal.querySelector('#add-question-form').addEventListener('submit', (e) => {
                e.preventDefault();
                addNewQuestion(modal);
            });

            return modal;
        }

        // Yeni soru ekle
        function addNewQuestion(modal) {
            const newQuestion = {
                id: 'Q' + Date.now(),
                category: modal.querySelector('#new-question-category').value,
                question: modal.querySelector('#new-question-text').value,
                options: [
                    modal.querySelector('#new-option-a').value,
                    modal.querySelector('#new-option-b').value,
                    modal.querySelector('#new-option-c').value,
                    modal.querySelector('#new-option-d').value
                ],
                correctAnswer: parseInt(modal.querySelector('#new-correct-answer').value),
                difficulty: modal.querySelector('#new-question-difficulty').value,
                addedBy: firebase.auth()?.currentUser?.email || 'admin',
                addedAt: new Date().toISOString(),
                status: 'active'
            };

            if (firebase.firestore) {
                firebase.firestore().collection('questions').doc(newQuestion.id).set(newQuestion)
                    .then(() => {
                        showAdminActionSuccess('Soru ba≈üarƒ±yla eklendi!');
                        modal.style.animation = 'fadeOut 0.3s ease-out';
                        setTimeout(() => {
                        modal.remove();
                        loadQuestionsData();
                        }, 300);
                    })
                    .catch((error) => {
                        console.error('Soru eklenirken hata:', error);
                        showAdminActionSuccess('Soru eklenirken hata olu≈ütu!', 'error');
                    });
            } else {
                allQuestions.push(newQuestion);
                localStorage.setItem('adminQuestions', JSON.stringify(allQuestions));
                showAdminActionSuccess('Soru ba≈üarƒ±yla eklendi! (Local Storage)');
                modal.style.animation = 'fadeOut 0.3s ease-out';
                setTimeout(() => {
                modal.remove();
                loadQuestionsData();
                }, 300);
            }
        }

        // Sorularƒ± dƒ±≈üa aktar
        function exportQuestions() {
            const dataToExport = {
                exportDate: new Date().toISOString(),
                exportedBy: firebase.auth()?.currentUser?.email || 'admin',
                source: 'Bilgoo Admin Panel',
                totalQuestions: allQuestions.length,
                questions: allQuestions
            };

            const dataStr = JSON.stringify(dataToExport, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob);
            
            const link = document.createElement('a');
            link.href = url;
            link.download = `bilgoo-sorular-${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            URL.revokeObjectURL(url);
            
            showAdminActionSuccess('Sorular dosyasƒ± indirildi!');
        }

        // Sorularƒ± i√ße aktar
        function importQuestions() {
            const fileInput = document.createElement('input');
            fileInput.type = 'file';
            fileInput.accept = '.json';
            fileInput.addEventListener('change', handleQuestionsImport);
            fileInput.click();
        }

        // Soru dosyasƒ± i√ße aktarma i≈ülemi
        function handleQuestionsImport(event) {
            const file = event.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const importData = JSON.parse(e.target.result);
                    
                    if (!importData.questions || !Array.isArray(importData.questions)) {
                        alert('Ge√ßersiz soru dosyasƒ± formatƒ±!');
                        return;
                    }

                    const questionsToImport = importData.questions;
                    
                    // Onay iste
                    if (!confirm(`${questionsToImport.length} soru i√ße aktarƒ±lacak:\n\nKaynak: ${importData.source || 'Bilinmiyor'}\nTarih: ${importData.exportDate || 'Bilinmiyor'}\n\nDevam edilsin mi?`)) {
                        return;
                    }

                    // Sorularƒ± ekle
                if (firebase.firestore) {
                        const batch = firebase.firestore().batch();
                        questionsToImport.forEach((question) => {
                            // ID yoksa olu≈ütur
                            if (!question.id) {
                                question.id = 'Q' + Date.now() + Math.random().toString(36).substr(2, 9);
                            }
                            
                            // ƒ∞√ße aktarma bilgilerini ekle
                            question.importedAt = new Date().toISOString();
                            question.importedBy = firebase.auth()?.currentUser?.email || 'admin';
                            
                            const docRef = firebase.firestore().collection('questions').doc(question.id);
                            batch.set(docRef, question);
                        });

                        batch.commit().then(() => {
                            showAdminActionSuccess(`${questionsToImport.length} soru ba≈üarƒ±yla i√ße aktarƒ±ldƒ±!`);
                            loadQuestionsData();
                }).catch((error) => {
                            console.error('Sorular i√ße aktarƒ±lƒ±rken hata:', error);
                            showAdminActionSuccess('Sorular i√ße aktarƒ±lƒ±rken hata olu≈ütu!', 'error');
                });
            } else {
                        // Local storage'a ekle
                        questionsToImport.forEach((question) => {
                            if (!question.id) {
                                question.id = 'Q' + Date.now() + Math.random().toString(36).substr(2, 9);
                            }
                            question.importedAt = new Date().toISOString();
                            question.importedBy = 'admin';
                        });
                        
                        allQuestions = [...allQuestions, ...questionsToImport];
                        localStorage.setItem('adminQuestions', JSON.stringify(allQuestions));
                        showAdminActionSuccess(`${questionsToImport.length} soru ba≈üarƒ±yla i√ße aktarƒ±ldƒ±! (Local Storage)`);
                        loadQuestionsData();
                    }

                } catch (error) {
                    console.error('Dosya okuma hatasƒ±:', error);
                    alert('Dosya okunamadƒ±! Ge√ßerli bir JSON dosyasƒ± se√ßin.');
                }
            };
            reader.readAsText(file);
        }
    </script>

    <!-- Yeni soru ekleme fonksiyonu -->
    <script>
        function submitNewQuestion() {
            const form = document.getElementById('question-form');
            const submitBtn = form.querySelector('.submit-button');
            const modal = document.getElementById('add-question-form');
            
            // Loading animasyonu ba≈ülat
            submitBtn.classList.add('loading');
            submitBtn.disabled = true;

            // Form verilerini al
            const questionData = {
                id: 'Q' + Date.now() + Math.random().toString(36).substr(2, 9),
                category: document.getElementById('question-category').value,
                question: document.getElementById('question-text').value,
                options: [
                    document.getElementById('option-a').value,
                    document.getElementById('option-b').value,
                    document.getElementById('option-c').value,
                    document.getElementById('option-d').value
                ],
                correctAnswer: parseInt(document.getElementById('correct-answer').value),
                difficulty: parseInt(document.getElementById('question-difficulty').value),
                addedBy: firebase.auth()?.currentUser?.email || 'user',
                addedAt: new Date().toISOString(),
                status: 'pending' // Bekleyen durumda
            };

            // Verileri doƒürula
            if (!questionData.category || !questionData.question || 
                questionData.options.some(opt => !opt.trim()) || 
                isNaN(questionData.correctAnswer) || isNaN(questionData.difficulty)) {
                alert('L√ºtfen t√ºm alanlarƒ± doldurun!');
                submitBtn.classList.remove('loading');
                submitBtn.disabled = false;
                return;
            }

            // Firebase baƒülantƒ±sƒ±nƒ± kontrol et ve timeout ile LocalStorage'a fallback yap
            let timeoutId;
            let completed = false;

            // 3 saniye timeout
            timeoutId = setTimeout(() => {
                if (!completed) {
                    completed = true;
                    console.log('Firebase timeout - LocalStorage kullanƒ±lƒ±yor');
                    saveToLocalStorage();
                }
            }, 3000);

            // Firebase'e kaydet (varsa ve online ise)
            if (firebase.firestore) {
                firebase.firestore().collection('pendingQuestions').doc(questionData.id).set(questionData)
                    .then(() => {
                        if (!completed) {
                            completed = true;
                            clearTimeout(timeoutId);
                            showSuccessMessage('‚úÖ Soru ba≈üarƒ±yla eklendi! Onay s√ºrecine alƒ±nmƒ±≈ütƒ±r.');
                            resetFormAndCloseModal(form, modal, submitBtn);
                        }
                    })
                    .catch((error) => {
                        if (!completed) {
                            completed = true;
                            clearTimeout(timeoutId);
                            console.error('Firebase hatasƒ±:', error);
                            console.log('Firebase hatasƒ± nedeniyle LocalStorage kullanƒ±lƒ±yor');
                            saveToLocalStorage();
                        }
                    });
            } else {
                // Firebase yoksa direkt LocalStorage
                clearTimeout(timeoutId);
                saveToLocalStorage();
            }

            // LocalStorage'a kaydetme fonksiyonu
            function saveToLocalStorage() {
                try {
                    const storedQuestions = JSON.parse(localStorage.getItem('pendingQuestions') || '[]');
                    storedQuestions.push(questionData);
                    localStorage.setItem('pendingQuestions', JSON.stringify(storedQuestions));
                    
                    showSuccessMessage('‚úÖ Soru ba≈üarƒ±yla eklendi! (Yerel olarak kaydedildi)');
                    resetFormAndCloseModal(form, modal, submitBtn);
                } catch (error) {
                    console.error('LocalStorage hatasƒ±:', error);
                    alert('‚ùå Soru kaydedilemedi. L√ºtfen tekrar deneyin.');
                    submitBtn.classList.remove('loading');
                    submitBtn.disabled = false;
                }
            }
        }

        // Form sƒ±fƒ±rlama ve modal kapatma
        function resetFormAndCloseModal(form, modal, submitBtn) {
            // Form temizle
            form.reset();
            
            // Loading animasyonunu kaldƒ±r
            submitBtn.classList.remove('loading');
            submitBtn.disabled = false;
            
            // Modal'ƒ± kapat (animasyonla)
            modal.style.animation = 'fadeOut 0.3s ease-out';
            setTimeout(() => {
                modal.style.display = 'none';
                modal.style.animation = '';
            }, 300);
        }

        // Ba≈üarƒ± mesajƒ± g√∂ster
        function showSuccessMessage(message) {
            // Eƒüer zaten bir mesaj varsa kaldƒ±r
            const existingMsg = document.querySelector('.success-message');
            if (existingMsg) {
                existingMsg.remove();
            }

            // Yeni mesaj olu≈ütur
            const successDiv = document.createElement('div');
            successDiv.className = 'success-message';
            successDiv.innerHTML = message;
            successDiv.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: linear-gradient(135deg, #48bb78, #38a169);
                color: white;
                padding: 15px 25px;
                border-radius: 12px;
                box-shadow: 0 4px 12px rgba(72,187,120,0.3);
                z-index: 10001;
                font-weight: 600;
                font-size: 16px;
                animation: slideInRight 0.5s ease-out;
            `;

            document.body.appendChild(successDiv);

            // 3 saniye sonra kaldƒ±r
            setTimeout(() => {
                successDiv.style.animation = 'slideOutRight 0.5s ease-out';
                setTimeout(() => {
                    if (successDiv.parentNode) {
                        successDiv.parentNode.removeChild(successDiv);
                    }
                }, 500);
            }, 3000);
        }
    </script>

    <!-- Ayar deƒüi≈üiklik takibi fonksiyonu -->
    <script>
     function setupSettingsChangeTracking() {
        console.log('Ayarlar deƒüi≈üiklik takibi ba≈ülatƒ±lƒ±yor...');
        
        // T√ºm admin toggle switch'lerini bul
        const adminToggles = document.querySelectorAll('.admin-toggle input[type="checkbox"]');
        
        adminToggles.forEach(toggle => {
            toggle.addEventListener('change', function() {
                console.log(`Ayar deƒüi≈üti: ${this.id} = ${this.checked}`);
                // Deƒüi≈üiklik olduƒüunu i≈üaretle
                markSettingsAsChanged();
            });
        });

        // Admin input alanlarƒ±nƒ± izle
        const adminInputs = document.querySelectorAll('.admin-settings-section input, .admin-settings-section select');
        
        adminInputs.forEach(input => {
            input.addEventListener('change', function() {
                console.log(`Ayar deƒüi≈üti: ${this.id} = ${this.value}`);
                markSettingsAsChanged();
            });
        });
    }

    // Ayarlarƒ±n deƒüi≈ütiƒüini i≈üaretle
    function markSettingsAsChanged() {
        const saveBtn = document.getElementById('admin-save-settings');
        if (saveBtn) {
            saveBtn.style.background = '#ff6b6b';
            saveBtn.textContent = 'üíæ Deƒüi≈üiklikleri Kaydet';
            saveBtn.classList.add('changes-pending');
        }
    }

    // Admin ayarlarƒ±nƒ± kaydet
    function saveAdminSettings() {
        console.log('Admin ayarlarƒ± kaydediliyor...');
        
        const settings = {
            userRegistration: document.getElementById('admin-user-registration')?.checked || false,
            questionSubmission: document.getElementById('admin-question-submission')?.checked || false,
            autoQuestionApproval: document.getElementById('admin-auto-approval')?.checked || false,
            maintenanceMode: document.getElementById('admin-maintenance-mode')?.checked || false,
            enableNotifications: document.getElementById('admin-notifications')?.checked || false,
            enableLeaderboard: document.getElementById('admin-leaderboard')?.checked || false,
            maxQuestionsPerUser: document.getElementById('admin-max-questions')?.value || 10,
            sessionTimeout: document.getElementById('admin-session-timeout')?.value || 30,
            lastUpdated: new Date().toISOString(),
            updatedBy: firebase.auth()?.currentUser?.email || 'admin'
        };

        if (firebase.firestore) {
            firebase.firestore().collection('adminSettings').doc('globalSettings').set(settings)
                .then(() => {
                    showAdminActionSuccess('‚úÖ Ayarlar ba≈üarƒ±yla kaydedildi!');
                    resetSaveButton();
                })
                .catch((error) => {
                    console.error('Ayarlar kaydedilirken hata:', error);
                    showAdminActionSuccess('‚ùå Ayarlar kaydedilemedi!', 'error');
                });
        } else {
            localStorage.setItem('adminSettings', JSON.stringify(settings));
            showAdminActionSuccess('‚úÖ Ayarlar ba≈üarƒ±yla kaydedildi! (Local Storage)');
            resetSaveButton();
        }
    }

    // Ayarlarƒ± sƒ±fƒ±rla
    function resetAdminSettings() {
        if (!confirm('‚ö†Ô∏è T√ºm ayarlar varsayƒ±lan deƒüerlere sƒ±fƒ±rlanacak. Emin misiniz?')) {
            return;
        }

        console.log('Admin ayarlarƒ± sƒ±fƒ±rlanƒ±yor...');
        
        const defaultSettings = {
            userRegistration: true,
            questionSubmission: true,
            autoQuestionApproval: false,
            maintenanceMode: false,
            enableNotifications: true,
            enableLeaderboard: true,
            maxQuestionsPerUser: 10,
            sessionTimeout: 30
        };

        // UI'ƒ± g√ºncelle
        Object.keys(defaultSettings).forEach(key => {
            const element = document.getElementById(`admin-${key.replace(/[A-Z]/g, '-$&').toLowerCase()}`);
            if (element) {
                if (element.type === 'checkbox') {
                    element.checked = defaultSettings[key];
                } else {
                    element.value = defaultSettings[key];
                }
            }
        });

        if (firebase.firestore) {
            firebase.firestore().collection('adminSettings').doc('globalSettings').set({
                ...defaultSettings,
                lastUpdated: new Date().toISOString(),
                updatedBy: firebase.auth()?.currentUser?.email || 'admin'
            })
                .then(() => {
                    showAdminActionSuccess('‚úÖ Ayarlar varsayƒ±lan deƒüerlere sƒ±fƒ±rlandƒ±!');
                    resetSaveButton();
                })
                .catch((error) => {
                    console.error('Ayarlar sƒ±fƒ±rlanƒ±rken hata:', error);
                    showAdminActionSuccess('‚ùå Ayarlar sƒ±fƒ±rlanamadƒ±!', 'error');
                });
        } else {
            localStorage.setItem('adminSettings', JSON.stringify(defaultSettings));
            showAdminActionSuccess('‚úÖ Ayarlar varsayƒ±lan deƒüerlere sƒ±fƒ±rlandƒ±! (Local Storage)');
            resetSaveButton();
        }
    }

    // Kaydet butonunu sƒ±fƒ±rla
    function resetSaveButton() {
        const saveBtn = document.getElementById('admin-save-settings');
        if (saveBtn) {
            saveBtn.style.background = '';
            saveBtn.textContent = 'üíæ Ayarlarƒ± Kaydet';
            saveBtn.classList.remove('changes-pending');
        }
    }

    // Admin i≈ülem sonucu mesajƒ± g√∂ster
    function showAdminActionSuccess(message, type = 'success') {
        const existingMsg = document.querySelector('.admin-action-message');
        if (existingMsg) {
            existingMsg.remove();
        }

        const messageDiv = document.createElement('div');
        messageDiv.className = 'admin-action-message';
        messageDiv.innerHTML = message;
        
        const bgColor = type === 'error' ? 'linear-gradient(135deg, #e53e3e, #c53030)' : 'linear-gradient(135deg, #48bb78, #38a169)';
        
        messageDiv.style.cssText = `
            position: fixed;
            top: 20px;
            right: 20px;
            background: ${bgColor};
            color: white;
            padding: 15px 25px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            z-index: 10001;
            font-weight: 600;
            font-size: 16px;
            animation: slideInRight 0.5s ease-out;
            max-width: 300px;
        `;

        document.body.appendChild(messageDiv);

        setTimeout(() => {
            messageDiv.style.animation = 'slideOutRight 0.5s ease-out';
            setTimeout(() => {
                if (messageDiv.parentNode) {
                    messageDiv.parentNode.removeChild(messageDiv);
                }
            }, 500);
        }, 3000);
    }
    </script>
</body>
</html>