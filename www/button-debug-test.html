<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HesabÄ±mÄ± Sil - Buton Test</title>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            margin: 40px;
            background: #f5f5f5;
        }
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        .delete-button {
            background: #dc2626;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            margin: 15px 5px;
            display: inline-flex;
            align-items: center;
            gap: 10px;
        }
        .delete-button:hover {
            background: #b91c1c;
        }
        .log-area {
            background: #1f2937;
            color: #f3f4f6;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            font-family: monospace;
            min-height: 200px;
            overflow-y: auto;
        }
        .status {
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
        }
        .success { background: #d1fae5; color: #065f46; border: 1px solid #a7f3d0; }
        .error { background: #fee2e2; color: #991b1b; border: 1px solid #fca5a5; }
        .warning { background: #fef3c7; color: #92400e; border: 1px solid #fbbf24; }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ”§ "HesabÄ±mÄ± Sil" Buton Test</h1>
        
        <div class="status warning">
            <h3>âš ï¸ Test Durumu</h3>
            <p>Bu sayfa ana uygulamadaki "HesabÄ±mÄ± Sil" butonunun neden Ã§alÄ±ÅŸmadÄ±ÄŸÄ±nÄ± test eder.</p>
        </div>

        <h2>1. Element VarlÄ±k Testi</h2>
        <button class="delete-button" onclick="testElementExists()">
            ğŸ” Element KontrolÃ¼
        </button>
        <div id="element-status"></div>

        <h2>2. JavaScript Console Test</h2>
        <button class="delete-button" onclick="testConsoleOutput()">
            ğŸ“ Console Log Test
        </button>
        <div class="log-area" id="console-output">Console Ã§Ä±ktÄ±larÄ± burada gÃ¶rÃ¼necek...</div>

        <h2>3. Manuel Buton Test</h2>
        <button class="delete-button" id="test-delete-button" onclick="testDeleteButton()">
            ğŸ—‘ï¸ HesabÄ±mÄ± Sil (Test)
        </button>
        <div id="manual-test-status"></div>

        <h2>4. Iframe ile Ana Sayfa Test</h2>
        <button class="delete-button" onclick="loadMainPageInIframe()">
            ğŸŒ Ana SayfayÄ± YÃ¼kle
        </button>
        <iframe id="main-page-iframe" src="" style="width: 100%; height: 400px; border: 1px solid #ddd; border-radius: 8px; margin-top: 10px; display: none;"></iframe>
        <div id="iframe-status"></div>
    </div>

    <script>
        // Console capturing
        let consoleOutput = '';
        const originalConsole = console.log;
        console.log = function(...args) {
            consoleOutput += `[${new Date().toLocaleTimeString()}] LOG: ${args.join(' ')}\n`;
            document.getElementById('console-output').textContent = consoleOutput;
            originalConsole.apply(console, args);
        };

        const originalError = console.error;
        console.error = function(...args) {
            consoleOutput += `[${new Date().toLocaleTimeString()}] ERROR: ${args.join(' ')}\n`;
            document.getElementById('console-output').textContent = consoleOutput;
            originalError.apply(console, args);
        };

        function testElementExists() {
            const statusDiv = document.getElementById('element-status');
            
            // Ana sayfada olmasÄ± gereken elementleri test et
            const requiredElements = [
                'delete-account-button',
                'account-deletion-modal',
                'close-deletion-modal',
                'cancel-deletion',
                'confirm-deletion',
                'deletion-confirmation'
            ];

            let html = '<div class="status"><h4>Element Test SonuÃ§larÄ±:</h4><ul>';
            let foundAny = false;

            requiredElements.forEach(id => {
                const element = document.getElementById(id);
                const exists = element !== null;
                if (exists) foundAny = true;
                const color = exists ? 'green' : 'red';
                const icon = exists ? 'âœ…' : 'âŒ';
                html += `<li style="color: ${color};">${icon} ${id}: ${exists ? 'Mevcut' : 'BulunamadÄ±'}</li>`;
            });

            html += '</ul>';
            
            if (!foundAny) {
                html += '<p style="color: #dc2626;"><strong>âŒ HiÃ§bir element bulunamadÄ± - Bu test sayfasÄ±nda elementler yok.</strong></p>';
                html += '<p style="color: #374151;">Ana sayfada test yapÄ±lmasÄ± gerekiyor.</p>';
            }
            
            html += '</div>';
            statusDiv.innerHTML = html;
        }

        function testConsoleOutput() {
            console.log('ğŸ§ª Console test baÅŸlatÄ±ldÄ±');
            console.log('ğŸ” initializeAccountDeletion fonksiyonu kontrol ediliyor...');
            
            if (typeof window.initializeAccountDeletion === 'function') {
                console.log('âœ… initializeAccountDeletion fonksiyonu mevcut');
            } else {
                console.error('âŒ initializeAccountDeletion fonksiyonu bulunamadÄ±');
            }
            
            console.log('ğŸ” delete-account-button elementi aranÄ±yor...');
            const btn = document.getElementById('delete-account-button');
            if (btn) {
                console.log('âœ… delete-account-button bulundu');
            } else {
                console.error('âŒ delete-account-button bulunamadÄ±');
            }
        }

        function testDeleteButton() {
            const statusDiv = document.getElementById('manual-test-status');
            statusDiv.innerHTML = '<div class="status success"><h4>âœ… Manuel Test BaÅŸarÄ±lÄ±!</h4><p>Bu buton Ã§alÄ±ÅŸÄ±yor. Ana sayfadaki buton da bu ÅŸekilde Ã§alÄ±ÅŸmalÄ±.</p></div>';
            alert('Test butonu Ã§alÄ±ÅŸÄ±yor! Ana sayfadaki buton da bu ÅŸekilde Ã§alÄ±ÅŸmalÄ±.');
        }

        function loadMainPageInIframe() {
            const iframe = document.getElementById('main-page-iframe');
            const statusDiv = document.getElementById('iframe-status');
            
            iframe.src = 'index.html';
            iframe.style.display = 'block';
            
            statusDiv.innerHTML = '<div class="status warning"><h4>ğŸŒ Ana Sayfa YÃ¼klendi</h4><p>Iframe\'de ana sayfa aÃ§Ä±ldÄ±. Konsol mesajlarÄ±nÄ± izleyin.</p></div>';
            
            iframe.onload = function() {
                console.log('ğŸ“„ Ana sayfa iframe\'de yÃ¼klendi');
                
                // Iframe iÃ§indeki elementi kontrol et
                setTimeout(() => {
                    try {
                        const iframeDoc = iframe.contentDocument;
                        const deleteBtn = iframeDoc.getElementById('delete-account-button');
                        
                        if (deleteBtn) {
                            console.log('âœ… delete-account-button iframe iÃ§inde bulundu');
                            statusDiv.innerHTML = '<div class="status success"><h4>âœ… Element Bulundu</h4><p>delete-account-button iframe iÃ§inde mevcut.</p></div>';
                        } else {
                            console.error('âŒ delete-account-button iframe iÃ§inde bulunamadÄ±');
                            statusDiv.innerHTML = '<div class="status error"><h4>âŒ Element BulunamadÄ±</h4><p>delete-account-button iframe iÃ§inde yok.</p></div>';
                        }
                    } catch (error) {
                        console.error('ğŸš« Iframe eriÅŸim hatasÄ±:', error.message);
                        statusDiv.innerHTML = '<div class="status error"><h4>ğŸš« Iframe EriÅŸim HatasÄ±</h4><p>Cross-origin policy nedeniyle iframe iÃ§eriÄŸine eriÅŸilemedi.</p></div>';
                    }
                }, 3000);
            };
        }

        // Sayfa yÃ¼klendiÄŸinde otomatik test
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸš€ Test sayfasÄ± yÃ¼klendi');
            setTimeout(testElementExists, 1000);
        });
    </script>
</body>
</html>
